{"meta":{"title":"Fighting","subtitle":"è®°äºŒä¸‰äº‹è€Œå·²","description":"The biggest adventure you can take is to live the life of your dreams","author":"Zhouheng","url":"http://blogzhou.top"},"pages":[{"title":"OC/Swiftæ··ç¼–çš„ä¸€äº›å°çŸ¥è¯†","date":"2020-12-15T05:31:57.000Z","updated":"2020-12-15T05:43:57.668Z","comments":true,"path":"template.html","permalink":"http://blogzhou.top/template.html","excerpt":"","text":""},{"title":"About","date":"2018-04-14T00:36:27.330Z","updated":"2018-04-14T00:36:27.330Z","comments":true,"path":"about/index.html","permalink":"http://blogzhou.top/about/index.html","excerpt":"","text":"I am what I am, æˆ‘æ°¸è¿œéƒ½çˆ±è¿™æ ·çš„æˆ‘ã€‚ å…è´£å£°æ˜: é„™äººåœ¨æ­¤å‘æ–‡ï¼Œè®°äºŒä¸‰äº‹è€Œå·²ï¼Œå°‘è®¸å€Ÿé‰´ï¼Œçš†æ³¨æ˜å‡ºå¤„ï¼Œå¦‚ç‰ˆæƒå½’å±è€…å­˜æœ‰å¼‚è®®ï¼Œè¿˜è¯·å‘ŠçŸ¥ã€‚æ–‡çš†éšæ„æ•²å‡»é”®ç›˜æ‰€å‡ºï¼Œç”¨ä»¥æ£€éªŒæœ¬äººç”µè„‘é”®ç›˜å½•å…¥ã€å±å¹•æ˜¾ç¤ºã€é¼ æ ‡å®šä½æ€§èƒ½ï¼Œéå¾å¿—ä¹Ÿã€‚ emailï¼šfm939071955@163.com Music Oops Now I have come to the crossroads in my life.I always knew what the right path was.Without exception,I knew,but I never took it.You know why?It was too damn hard!"},{"title":"Categories","date":"2018-04-14T00:36:27.330Z","updated":"2018-04-14T00:36:27.330Z","comments":true,"path":"categories/index.html","permalink":"http://blogzhou.top/categories/index.html","excerpt":"","text":""},{"title":"Tags","date":"2018-04-14T00:36:27.330Z","updated":"2018-04-14T00:36:27.330Z","comments":true,"path":"tags/index.html","permalink":"http://blogzhou.top/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Arrayçš„å¸¸è§æ“ä½œ","slug":"s13.Arrayçš„å¸¸è§æ“ä½œ","date":"2020-11-20T04:31:57.000Z","updated":"2020-12-15T05:53:38.391Z","comments":true,"path":"2020/11/20/s13.Arrayçš„å¸¸è§æ“ä½œ/","link":"","permalink":"http://blogzhou.top/2020/11/20/s13.Arrayçš„å¸¸è§æ“ä½œ/","excerpt":"map / filter / reduce 12345678var arr = [1, 2, 3, 4]// [2, 4, 6, 8]var arr2 = arr.map &#123; $0 * 2 &#125;// [2, 4]var arr3 = arr.filter &#123; $0 % 2 == 0 &#125; // 10var arr4 = arr.reduce(0) &#123; $0 + $1 &#125; // 10// å¯ç®€å†™ä¸ºvar arr5 = arr.reduce(0, +) mapæ¥æ”¶å‡½æ•°ä½œä¸ºå‚æ•° 1234func double(_ i: Int) -&gt; Int &#123; i * 2 &#125; var arr = [1, 2, 3, 4]// [2, 4, 6, 8] print(arr.map(double))","text":"map / filter / reduce 12345678var arr = [1, 2, 3, 4]// [2, 4, 6, 8]var arr2 = arr.map &#123; $0 * 2 &#125;// [2, 4]var arr3 = arr.filter &#123; $0 % 2 == 0 &#125; // 10var arr4 = arr.reduce(0) &#123; $0 + $1 &#125; // 10// å¯ç®€å†™ä¸ºvar arr5 = arr.reduce(0, +) mapæ¥æ”¶å‡½æ•°ä½œä¸ºå‚æ•° 1234func double(_ i: Int) -&gt; Int &#123; i * 2 &#125; var arr = [1, 2, 3, 4]// [2, 4, 6, 8] print(arr.map(double)) compactMapé»˜è®¤è§£åŒ…å¹¶å»é™¤nil 1234567var arr = [&quot;123&quot;, &quot;test&quot;, &quot;jack&quot;, &quot;-30&quot;] // [Optional(123), nil, nil, Optional(-30)] var arr2 = arr.map &#123; Int($0) &#125;// [123, -30]var arr3 = arr.compactMap &#123; Int($0) &#125; ä½¿ç”¨reduceå®ç°mapã€filterå‡½æ•°çš„åŠŸèƒ½ 1234567891011var arr = [1, 2, 3, 4]// [2, 4, 6, 8]print(arr.map &#123; $0 * 2 &#125;) // ç­‰ä»·äºğŸ‘†å‡½æ•°åŠŸèƒ½print(arr.reduce([]) &#123; $0 + [$1 * 2] &#125;)// [2, 4]print(arr.filter &#123; $0 % 2 == 0 &#125;) // ç­‰ä»·äºğŸ‘†å‡½æ•°åŠŸèƒ½print(arr.reduce([]) &#123; $1 % 2 == 0 ? $0 + [$1] : $0 &#125;) map,flatMapåŠŸèƒ½å¯¹æ¯” 12345var arr = [1, 2, 3]// [[1], [2, 2], [3, 3, 3]] æ‹¿åˆ°ä»€ä¹ˆ(æ•°ç»„)ï¼Œè¿”å›æ•°ç»„(äºŒç»´æ•°ç»„)å°±æ”¾ä»€ä¹ˆï¼Œä¸åšå¤„ç†ã€‚var arr2 = arr.map &#123; Array.init(repeating: $0, count: $0) &#125;// [1, 2, 2, 3, 3, 3] å°†æ‹¿åˆ°çš„æ•°ç»„ä¸­çš„å…ƒç´ å–å‡ºæ”¾åˆ°è¿”å›æ•°ç»„(ä¸€ç»´æ•°ç»„)ä¸­ã€‚æ‰å¹³åŒ–å¤„ç†ã€‚var arr3 = arr.flatMap &#123; Array.init(repeating: $0, count: $0) &#125; ç”¨lazyçš„ä¼˜åŒ–map 1234567891011121314151617181920let arr = [1, 2, 3]let result = arr.lazy.map &#123; (i: Int) -&gt; Int in print(&quot;mapping \\(i)&quot;) return i * 2&#125;print(&quot;begin-----&quot;)print(&quot;mapped&quot;, result[0]) print(&quot;mapped&quot;, result[1]) print(&quot;mapped&quot;, result[2]) print(&quot;end----&quot;)// ç¬¬ä¸€æ¬¡ç”¨åˆ°æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œç›¸åº”é€»è¾‘begin----- mapping 1 mapped 2 mapping 2 mapped 4 mapping 3 mapped 6 end---- mapå’ŒflatMapå¯é€‰å€¼Optionalå¤„ç†ä¸­çš„åº”ç”¨ 1234567var num1: Int? = 10// Optional(20)var num2 = num1.map &#123; $0 * 2 &#125;var num3: Int? = nil// nilï¼Œå‘ç°$0ä¸ºnilç›´æ¥è¿”å›nilvar num4 = num3.map &#123; $0 * 2 &#125; map å’Œ flatMapå¯¹æ¯”123456var num1: Int? = 10// Optional(Optional(20)), mapè¿˜æ˜¯ä¼šå¯¹å¯é€‰å€¼å†åŒ…è£…ä¸€å±‚var num2 = num1.map &#123; Optional.some($0 * 2) &#125;// Optional(20), flatMapå‘ç°å·²ç»æ˜¯å¯é€‰å€¼ï¼Œå°±ä¸ä¼šå†åŒ…è£…äº†var num3 = num1.flatMap &#123; Optional.some($0 * 2) &#125; å¯ç”¨äºç®€åŒ–ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960// ç¤ºä¾‹ä¸€ï¼švar num1: Int? = 10var num2 = (num1 != nil) ? (num1! + 10) : nil var num3 = num1.map &#123; $0 + 10 &#125;// num2ã€num3æ˜¯ç­‰ä»·çš„// ç¤ºä¾‹äºŒï¼švar fmt = DateFormatter()fmt.dateFormat = &quot;yyyy-MM-dd&quot;var str: String? = &quot;2011-09-10&quot;// oldvar date1 = str != nil ? fmt.date(from: str!) : nil // newvar date2 = str.flatMap(fmt.date)// ç¤ºä¾‹ä¸‰ï¼švar score: Int? = 98// oldvar str1 = score != nil ? &quot;socre is \\(score!)&quot; : &quot;No score&quot; // newvar str2 = score.map &#123; &quot;score is \\($0)&quot; &#125; ?? &quot;No score&quot;// ç¤ºä¾‹å››ï¼šstruct Person &#123; var name: String var age: Int&#125;var items = [ Person(name: &quot;jack&quot;, age: 20), Person(name: &quot;rose&quot;, age: 21), Person(name: &quot;kate&quot;, age: 22)]// oldfunc getPerson1(_ name: String) -&gt; Person? &#123; let index = items.firstIndex &#123; $0.name == name &#125; return index != nil ? items[index!] : nil&#125;// newfunc getPerson2(_ name: String) -&gt; Person? &#123; return items.firstIndex &#123; $0.name == name &#125;.map &#123; items[$0] &#125;&#125;// ç¤ºä¾‹äº”ï¼šstruct Person &#123; var name: String var age: Int init?(_ json: [String : Any]) &#123; guard let name = json[&quot;name&quot;] as? String, let age = json[&quot;age&quot;] as? Int else &#123; return nil &#125; self.name = name self.age = age &#125; &#125;var json: Dictionary? = [&quot;name&quot; : &quot;Jack&quot;, &quot;age&quot; : 10] // oldvar p1 = json != nil ? Person(json!) : nil// newvar p2 = json.flatMap(Person.init)","categories":[{"name":"iOSå¼€å‘","slug":"iOSå¼€å‘","permalink":"http://blogzhou.top/categories/iOSå¼€å‘/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"http://blogzhou.top/tags/Swift/"}]},{"title":"Swiftä¸­çš„æŒ‡é’ˆ(UnsafePointer)","slug":"s12.Swiftä¸­çš„æŒ‡é’ˆ(UnsafePointer)","date":"2020-11-18T01:31:57.000Z","updated":"2020-12-16T06:15:23.694Z","comments":true,"path":"2020/11/18/s12.Swiftä¸­çš„æŒ‡é’ˆ(UnsafePointer)/","link":"","permalink":"http://blogzhou.top/2020/11/18/s12.Swiftä¸­çš„æŒ‡é’ˆ(UnsafePointer)/","excerpt":"Swiftä¸­ä¹Ÿæœ‰ä¸“é—¨çš„æŒ‡é’ˆç±»å‹ï¼Œè¿™äº›éƒ½è¢«å®šæ€§ä¸ºâ€œUnsafeâ€(ä¸å®‰å…¨çš„)ã€‚å¸¸è§çš„æœ‰ä»¥ä¸‹4ç§ç±»å‹ï¼š UnsafePointer&lt;Pointee&gt;ç±»ä¼¼äº const Pointee * UnsafeMutablePointer&lt;Pointee&gt; ç±»ä¼¼äº Pointee * UnsafeRawPointer ç±»ä¼¼äº const void * UnsafeMutableRawPointer ç±»ä¼¼äº void *123456789101112131415161718192021var age = 10func test1(_ ptr: UnsafeMutablePointer&lt;Int&gt;) &#123; ptr.pointee += 10 &#125;func test2(_ ptr: UnsafePointer&lt;Int&gt;) &#123; print(ptr.pointee)&#125;test1(&amp;age)test2(&amp;age) // 20print(age) // 20var age = 10func test3(_ ptr: UnsafeMutableRawPointer) &#123; ptr.storeBytes(of: 20, as: Int.self) &#125;func test4(_ ptr: UnsafeRawPointer) &#123; print(ptr.load(as: Int.self))&#125;test3(&amp;age)test4(&amp;age) // 20print(age) // 20","text":"Swiftä¸­ä¹Ÿæœ‰ä¸“é—¨çš„æŒ‡é’ˆç±»å‹ï¼Œè¿™äº›éƒ½è¢«å®šæ€§ä¸ºâ€œUnsafeâ€(ä¸å®‰å…¨çš„)ã€‚å¸¸è§çš„æœ‰ä»¥ä¸‹4ç§ç±»å‹ï¼š UnsafePointer&lt;Pointee&gt;ç±»ä¼¼äº const Pointee * UnsafeMutablePointer&lt;Pointee&gt; ç±»ä¼¼äº Pointee * UnsafeRawPointer ç±»ä¼¼äº const void * UnsafeMutableRawPointer ç±»ä¼¼äº void *123456789101112131415161718192021var age = 10func test1(_ ptr: UnsafeMutablePointer&lt;Int&gt;) &#123; ptr.pointee += 10 &#125;func test2(_ ptr: UnsafePointer&lt;Int&gt;) &#123; print(ptr.pointee)&#125;test1(&amp;age)test2(&amp;age) // 20print(age) // 20var age = 10func test3(_ ptr: UnsafeMutableRawPointer) &#123; ptr.storeBytes(of: 20, as: Int.self) &#125;func test4(_ ptr: UnsafeRawPointer) &#123; print(ptr.load(as: Int.self))&#125;test3(&amp;age)test4(&amp;age) // 20print(age) // 20 è·å¾—æŒ‡å‘æŸä¸ªå˜é‡çš„æŒ‡é’ˆ: 123456789101112var age = 11var ptr1 = withUnsafeMutablePointer(to: &amp;age) &#123; $0 &#125; var ptr2 = withUnsafePointer(to: &amp;age) &#123; $0 &#125; ptr1.pointee = 22print(ptr2.pointee) // 22print(age) // 22var ptr3 = withUnsafeMutablePointer(to: &amp;age) &#123; UnsafeMutableRawPointer($0) &#125; var ptr4 = withUnsafePointer(to: &amp;age) &#123; UnsafeRawPointer($0) &#125; ptr3.storeBytes(of: 33, as: Int.self)print(ptr4.load(as: Int.self)) // 33print(age) // 33 è·å¾—æŒ‡å‘å †ç©ºé—´å®ä¾‹çš„æŒ‡é’ˆï¼š 1234567891011// UnsafeRawPointer(bitPattern:)å‡½æ•°ç”¨æ¥ç”ŸæˆæŒ‡å‘æŸä¸€åœ°å€çš„æŒ‡é’ˆvar ptr = UnsafeRawPointer(bitPattern: 0x100001234)class Person &#123;&#125;// ç±»ä¼¼äº *p = personvar person = Person()// p = &amp;personï¼Œ pæ˜¯personå˜é‡çš„åœ°å€å€¼var ptr = withUnsafePointer(to: &amp;person) &#123; UnsafeRawPointer($0) &#125;// ptr.load(as: UInt.self) ç±»ä¼¼äº *pï¼Œ å–å‡ºåœ°å€ä¸­å­˜å‚¨çš„å€¼ï¼Œä¹Ÿå°±æ˜¯Personå®ä¾‹åœ¨å †ä¸Šçš„åœ°å€å€¼var heapPtr = UnsafeRawPointer(bitPattern: ptr.load(as: UInt.self)) print(heapPtr!) åˆ›å»ºæŒ‡é’ˆï¼š éæ³›å‹ 1234567891011121314151617181920 // åˆ›å»ºvar ptr = malloc(16)// å­˜ptr?.storeBytes(of: 11, as: Int.self)ptr?.storeBytes(of: 22, toByteOffset: 8, as: Int.self)// å–print((ptr?.load(as: Int.self))!) // 11 // fromByteOffset: åœ°å€åç§»print((ptr?.load(fromByteOffset: 8, as: Int.self))!) // 22 // é”€æ¯free(ptr)var ptr = UnsafeMutableRawPointer.allocate(byteCount: 16, alignment: 1) ptr.storeBytes(of: 11, as: Int.self)// advanced: ä¹Ÿæ˜¯åœ°å€åç§»ptr.advanced(by: 8).storeBytes(of: 22, as: Int.self) print(ptr.load(as: Int.self)) // 11print(ptr.advanced(by: 8).load(as: Int.self)) // 22 // é”€æ¯ptr.deallocate() æ³›å‹åŸºç¡€æ•°æ®ç±»å‹ï¼š 123456789101112131415 var ptr = UnsafeMutablePointer&lt;Int&gt;.allocate(capacity: 3) ptr.initialize(to: 11)// successor()åç»§, è¡¨ç¤ºå‘åèµ°&lt;Int&gt;é•¿åº¦ä¸ªå­—èŠ‚ptr.successor().initialize(to: 22) ptr.successor().successor().initialize(to: 33)print(ptr.pointee) // 11 // è¿™é‡Œçš„ + æŒ‡çš„æ˜¯æŒ‡é’ˆçš„åŠ ï¼Œæ­¥é•¿ä¸º&lt;Int&gt;é•¿åº¦ä¸ªå­—èŠ‚print((ptr + 1).pointee) // 22 print((ptr + 2).pointee) // 33print(ptr[0]) // 11print(ptr[1]) // 22print(ptr[2]) // 33ptr.deinitialize(count: 3) ptr.deallocate() å¯¹è±¡ç±»å‹ï¼š 123456789101112131415161718 class Person &#123; var age: Int var name: String init(age: Int, name: String) &#123; self.age = age self.name = name &#125; deinit &#123; print(name, &quot;deinit&quot;) &#125; &#125;var ptr = UnsafeMutablePointer&lt;Person&gt;.allocate(capacity: 3) ptr.initialize(to: Person(age: 10, name: &quot;Jack&quot;))(ptr + 1).initialize(to: Person(age: 11, name: &quot;Rose&quot;)) (ptr + 2).initialize(to: Person(age: 12, name: &quot;Kate&quot;))// Jack deinit// Rose deinit// Kate deinit ptr.deinitialize(count: 3) ptr.deallocate() æŒ‡é’ˆä¹‹é—´çš„è½¬æ¢ 1234567891011121314151617 var ptr = UnsafeMutableRawPointer.allocate(byteCount: 16, alignment: 1) ptr.assumingMemoryBound(to: Int.self).pointee = 11(ptr + 8).assumingMemoryBound(to: Double.self).pointee = 22.0 // åªæ”¹å˜ç±»å‹ï¼Œè€Œä¸æ”¹å˜å…¶å€¼ //ï¼ˆå€¼æŒ‡çš„æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä½ å‘Šè¯‰è®¡ç®—æœºè¿™æ˜¯ä»€ä¹ˆç±»å‹ï¼Œè®¡ç®—æœºå°±æŒ‰ä»€ä¹ˆç±»å‹è§£è¯»è¿™äº›äºŒè¿›åˆ¶æ•°æ®ï¼‰print(unsafeBitCast(ptr, to: UnsafePointer&lt;Int&gt;.self).pointee) // 11print(unsafeBitCast(ptr + 8, to: UnsafePointer&lt;Double&gt;.self).pointee) // 22.0 ptr.deallocate()// unsafeBitCastæ˜¯å¿½ç•¥æ•°æ®ç±»å‹çš„å¼ºåˆ¶è½¬æ¢ï¼Œä¸ä¼šå› ä¸ºæ•°æ®ç±»å‹çš„å˜åŒ–è€Œæ”¹å˜åŸæ¥çš„å†…å­˜æ•°æ® // ç±»ä¼¼äºC++ä¸­çš„reinterpret_castclass Person &#123;&#125;var person = Person()var ptr = unsafeBitCast(person, to: UnsafeRawPointer.self) print(ptr) å…³äºæŒ‡é’ˆçš„å¼ºåˆ¶ç±»å‹è½¬æ¢å¯å‚è€ƒè¿™ç¯‡","categories":[{"name":"iOSå¼€å‘","slug":"iOSå¼€å‘","permalink":"http://blogzhou.top/categories/iOSå¼€å‘/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"http://blogzhou.top/tags/Swift/"}]},{"title":"å…³äºæŒ‡é’ˆçš„å¼ºåˆ¶ç±»å‹è½¬æ¢","slug":"s11.å…³äºæŒ‡é’ˆçš„å¼ºåˆ¶ç±»å‹è½¬æ¢","date":"2020-11-15T05:45:57.000Z","updated":"2020-12-15T05:48:31.067Z","comments":true,"path":"2020/11/15/s11.å…³äºæŒ‡é’ˆçš„å¼ºåˆ¶ç±»å‹è½¬æ¢/","link":"","permalink":"http://blogzhou.top/2020/11/15/s11.å…³äºæŒ‡é’ˆçš„å¼ºåˆ¶ç±»å‹è½¬æ¢/","excerpt":"","text":"å°†æŒ‡é’ˆä»ä¸€ç§ç±»å‹å¼ºåˆ¶è½¬æ¢æˆå¦ä¸€ç§ç±»å‹ï¼Œåªæ”¹å˜ä»–çš„ç±»å‹ï¼Œè€Œä¸æ”¹å˜ä»–çš„å€¼ã€‚ å¼ºåˆ¶ç±»å‹è½¬æ¢çš„ä¸€ä¸ªæ•ˆæœæ˜¯æ”¹å˜æŒ‡é’ˆè¿ç®—çš„ä¼¸ç¼©ã€‚ä¾‹å¦‚ï¼šå¦‚æœpæ˜¯ä¸ªchar ç±»å‹çš„æŒ‡é’ˆï¼Œä»–çš„å€¼ä¸ºPï¼Œé‚£ä¹ˆè¡¨è¾¾å¼`(int )p + 7 = P + 28å› ä¸ºintå 4å­—èŠ‚ï¼Œè€Œcharåªå 1å­—èŠ‚ è€Œ:(int )(p + 7) = P + 7`å› ä¸ºï¼Œå¼ºåˆ¶ç±»å‹è½¬æ¢çš„ä¼˜å…ˆçº§é«˜äºåŠ æ³•ã€‚**PS:**æŒ‡é’ˆ+iï¼Œè¡¨ç¤ºåŠ iä¸ªå•å…ƒæ ¼ï¼Œå³åŠ `i sizeof(æŒ‡é’ˆæœ¬èº«å»æ‰ä¸€ä¸ª*)`çš„å­—èŠ‚ï¼š1(int *)p + 7 = P + 7 * sizeof(int) = P + 28","categories":[{"name":"iOSå¼€å‘","slug":"iOSå¼€å‘","permalink":"http://blogzhou.top/categories/iOSå¼€å‘/"}],"tags":[{"name":"code","slug":"code","permalink":"http://blogzhou.top/tags/code/"}]},{"title":"Appå¯åŠ¨ä¼˜åŒ–","slug":"old_02.Appå¯åŠ¨ä¼˜åŒ–","date":"2020-06-25T02:31:30.000Z","updated":"2020-12-16T06:19:20.446Z","comments":true,"path":"2020/06/25/old_02.Appå¯åŠ¨ä¼˜åŒ–/","link":"","permalink":"http://blogzhou.top/2020/06/25/old_02.Appå¯åŠ¨ä¼˜åŒ–/","excerpt":"ä¸€ã€å†·å¯åŠ¨å’Œçƒ­å¯åŠ¨ å®šä¹‰ï¼š 1.å…³äºå†·å¯åŠ¨ï¼šä¸šç•Œå¯¹å†·å¯åŠ¨çš„å®šä¹‰æ²¡æœ‰é—®é¢˜ï¼Œæ™®éè®¤ä¸ºæ˜¯æ‰‹æœºå¼€æœºåç¬¬ä¸€æ¬¡å¯åŠ¨æŸä¸ªAPPã€‚ 2.å…³äºçƒ­å¯åŠ¨ï¼š å¯¹çƒ­å¯åŠ¨æœ‰ä¸¤ç§ä¸åŒçš„çœ‹æ³•ï¼š 1.æœ‰äº›äººè®¤ä¸ºæ˜¯æŒ‰ä¸‹homeé”®æŠŠAPPæŒ‚åˆ°åå°ï¼Œä¹‹åç‚¹å‡»APPçš„iconå†æ‹‰å›æ¥åˆ°å‰å°ç®—æ˜¯çƒ­å¯åŠ¨ï¼› 2.ä¹Ÿæœ‰äº›äººè®¤ä¸ºæ˜¯æ‰‹æœºå¼€æœºååœ¨çŸ­æ—¶é—´å†…ç¬¬äºŒæ¬¡å¯åŠ¨APPï¼ˆæ€æ‰è¿›ç¨‹é‡å¯ï¼‰ç®—æ˜¯çƒ­å¯åŠ¨ï¼ˆæ­¤æ—¶dyldä¼šå¯¹éƒ¨åˆ†APPçš„æ•°æ®å’Œåº“è¿›è¡Œç¼“å­˜ï¼Œæ‰€ä»¥æ¯”ç¬¬ä¸€æ¬¡å¯åŠ¨è¦å¿«ï¼‰ã€‚ ï¼ˆä¸€èˆ¬è®¤ä¸ºAPPä»åå°æ‹‰èµ·åˆ°å‰å°çš„æ—¶é—´æ²¡å•¥ç ”ç©¶çš„æ„ä¹‰ï¼Œæ‰€ä»¥åœ¨ç»Ÿè®¡å¯åŠ¨æ—¶é—´æ—¶ï¼Œä¼šå€¾å‘äºåä¸€ç§è¯´æ³•ï¼Œä¸è¿‡å…·ä½“æ€ä¹ˆå®šä¹‰çœ‹ä¸ªäººï¼ŒçŸ¥é“å…¶ä¸­çš„åŒºåˆ«å°±å¥½ï¼‰ å¦‚æœå¯åŠ¨è¿‡ï¼Œå†…å­˜é¡µå°±å·²ç»åŠ è½½è¿›å†…å­˜äº†ï¼Œå†…å­˜é¡µå¦‚æœè¦é”€æ¯åªèƒ½æ˜¯è¢«è¦†ç›–ï¼Œæ‰€ä»¥è¿™æ—¶å€™çš„åŠ è½½è¿›ç‰©ç†å†…å­˜çš„æ—¶å€™ï¼Œå®é™…å†…å­˜ä¸­å·²ç»å­˜åœ¨å€¼ï¼Œæ‰€ä»¥å¯åŠ¨å°±ä¼šå˜å¿«ã€‚","text":"ä¸€ã€å†·å¯åŠ¨å’Œçƒ­å¯åŠ¨ å®šä¹‰ï¼š 1.å…³äºå†·å¯åŠ¨ï¼šä¸šç•Œå¯¹å†·å¯åŠ¨çš„å®šä¹‰æ²¡æœ‰é—®é¢˜ï¼Œæ™®éè®¤ä¸ºæ˜¯æ‰‹æœºå¼€æœºåç¬¬ä¸€æ¬¡å¯åŠ¨æŸä¸ªAPPã€‚ 2.å…³äºçƒ­å¯åŠ¨ï¼š å¯¹çƒ­å¯åŠ¨æœ‰ä¸¤ç§ä¸åŒçš„çœ‹æ³•ï¼š 1.æœ‰äº›äººè®¤ä¸ºæ˜¯æŒ‰ä¸‹homeé”®æŠŠAPPæŒ‚åˆ°åå°ï¼Œä¹‹åç‚¹å‡»APPçš„iconå†æ‹‰å›æ¥åˆ°å‰å°ç®—æ˜¯çƒ­å¯åŠ¨ï¼› 2.ä¹Ÿæœ‰äº›äººè®¤ä¸ºæ˜¯æ‰‹æœºå¼€æœºååœ¨çŸ­æ—¶é—´å†…ç¬¬äºŒæ¬¡å¯åŠ¨APPï¼ˆæ€æ‰è¿›ç¨‹é‡å¯ï¼‰ç®—æ˜¯çƒ­å¯åŠ¨ï¼ˆæ­¤æ—¶dyldä¼šå¯¹éƒ¨åˆ†APPçš„æ•°æ®å’Œåº“è¿›è¡Œç¼“å­˜ï¼Œæ‰€ä»¥æ¯”ç¬¬ä¸€æ¬¡å¯åŠ¨è¦å¿«ï¼‰ã€‚ ï¼ˆä¸€èˆ¬è®¤ä¸ºAPPä»åå°æ‹‰èµ·åˆ°å‰å°çš„æ—¶é—´æ²¡å•¥ç ”ç©¶çš„æ„ä¹‰ï¼Œæ‰€ä»¥åœ¨ç»Ÿè®¡å¯åŠ¨æ—¶é—´æ—¶ï¼Œä¼šå€¾å‘äºåä¸€ç§è¯´æ³•ï¼Œä¸è¿‡å…·ä½“æ€ä¹ˆå®šä¹‰çœ‹ä¸ªäººï¼ŒçŸ¥é“å…¶ä¸­çš„åŒºåˆ«å°±å¥½ï¼‰ å¦‚æœå¯åŠ¨è¿‡ï¼Œå†…å­˜é¡µå°±å·²ç»åŠ è½½è¿›å†…å­˜äº†ï¼Œå†…å­˜é¡µå¦‚æœè¦é”€æ¯åªèƒ½æ˜¯è¢«è¦†ç›–ï¼Œæ‰€ä»¥è¿™æ—¶å€™çš„åŠ è½½è¿›ç‰©ç†å†…å­˜çš„æ—¶å€™ï¼Œå®é™…å†…å­˜ä¸­å·²ç»å­˜åœ¨å€¼ï¼Œæ‰€ä»¥å¯åŠ¨å°±ä¼šå˜å¿«ã€‚ äºŒã€ä¼˜åŒ–çš„æ–¹å‘1.å‡å°‘æµç¨‹çš„æ•°é‡ã€‚2.å‡å°‘æ¯ä¸ªæµç¨‹çš„æ¶ˆè€—ã€‚ ä¸‰ã€APPçš„å¯åŠ¨è¿‡ç¨‹ å››ã€å¯åŠ¨æ—¶é—´åˆ†å¸ƒåœ¨Xcodeä¸­ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡æ¥æŸ¥çœ‹Appçš„å¯åŠ¨æ—¶é—´ï¼ŒDYLD_PRINT_STATISTICSå’ŒDYLD_PRINT_STATISTICS_DETAILSã€‚æ ¹æ®xcodeæ‰“å°å¯ä»¥çœ‹åˆ°:åŠ¨æ€åº“çš„åŠ è½½ rebase/binding æ–¹æ³•ã€ç±»ã€Categoryè¿™äº›éœ€è¦rebaseå’Œ binding binding Mach-O _DATAå»ºç«‹æŒ‡é’ˆï¼ŒæŒ‡å‘å¤–éƒ¨å‡½æ•°ï¼Œæˆ‘ä»¬ç¼–è¯‘çš„æ—¶å€™ï¼Œå…±äº«ç¼“å­˜åº“é‡Œè¾¹çš„ä»£ç æŒ‡å‘çš„å°±æ˜¯è¿™é‡Œï¼Œé“¾æ¥çš„æ—¶å€™ï¼Œé€šè¿‡dyldæŒ‡å‘å¤–éƒ¨å…·ä½“çœŸå®çš„åœ°å€ã€‚PICæŠ€æœ¯fishookå°±æ˜¯åˆ©ç”¨è¿™ä¸ªä¸­è½¬ï¼Œhookçš„ç³»ç»Ÿcå‡½æ•°ã€‚ Objc setup ç±»çš„åˆå§‹åŒ–è¿‡ç¨‹åœ¨è¿™é‡Œè¾¹â‘ è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶çš„ DATA æ®µå†…å®¹ï¼Œæ‰¾åˆ°ä¸ objc ç›¸å…³çš„ä¿¡æ¯â‘¡æ³¨å†Œ Objc ç±»ï¼ŒObjC Runtime éœ€è¦ç»´æŠ¤ä¸€å¼ æ˜ å°„ç±»åä¸ç±»çš„å…¨å±€è¡¨ã€‚å½“åŠ è½½ä¸€ä¸ª dylib æ—¶ï¼Œå…¶å®šä¹‰çš„æ‰€æœ‰çš„ç±»éƒ½éœ€è¦è¢«æ³¨å†Œåˆ°è¿™ä¸ªå…¨å±€è¡¨ä¸­ï¼›â‘¢è¯»å– protocol ä»¥åŠ category çš„ä¿¡æ¯ï¼ŒæŠŠcategoryçš„å®šä¹‰æ’å…¥æ–¹æ³•åˆ—è¡¨ (category registration)ï¼Œâ‘£ç¡®ä¿ selector çš„å”¯ä¸€æ€§ initializer loadç­‰å‡½æ•°ï¼ŒC++çš„æ„é€ å‡½æ•° è€—æ—¶æ¯”è¾ƒå¤šçš„åŠ è½½è‡ªå·±çš„åº“å¯èƒ½æ¯”è¾ƒè€—æ—¶ ä¸¤ä¸ªé˜¶æ®µåˆ†åˆ«æ˜¯ pre- main å’Œ mainå¯åŠ¨åˆ°viewDidAppear:pre-mainè¿‡ç¨‹ï¼šä»€ä¹ˆæ˜¯dyld? dyldæ˜¯ä¸€ä¸ªä¸“é—¨ç”¨æ¥åŠ è½½åŠ¨æ€é“¾æ¥åº“çš„åº“ã€‚ æ‰§è¡Œä»dyldå¼€å§‹ï¼Œdyldä»å¯æ‰§è¡Œæ–‡ä»¶çš„ä¾èµ–å¼€å§‹, é€’å½’åŠ è½½æ‰€æœ‰çš„ä¾èµ–åŠ¨æ€é“¾æ¥åº“ã€‚ äº”ã€ DyldåŠ è½½è¿‡ç¨‹åŠ è½½Mach-Oæ–‡ä»¶ï¼ŒåŠ è½½ä¸€å—æ¯”è¾ƒå¤§çš„å†…å­˜ç©ºé—´ï¼Œåœ°å€é‡å®šå‘å¯åŠ¨dyldçš„mainå‡½æ•° é…ç½®xcodeçš„ç¯å¢ƒå˜é‡ (arguments) åŠ è½½å…±äº«ç¼“å­˜åº“ï¼ŒUIKit å’Œ Foundationè¿™äº› åŠ è½½LoadCommonsæ®µä¸€ç³»åˆ—åŠ è½½åŠ è½½åŠ¨æ€åº“ï¼ŒåŒ…æ‹¬è‡ªå·±çš„å’Œç³»ç»Ÿçš„ï¼Œå®ä¾‹åŒ–ä¸»ç¨‹åºçš„imageLoaderï¼Œæ·»åŠ è¿›imageListé“¾æ¥ä¸»ç¨‹åº å¼€å§‹åˆå§‹åŒ–ä¸»ç¨‹åº runtimeé…åˆåŠ è½½ï¼ŒruntimeåŠ è½½loadImagesæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯prepare_load_methods(mh) åŠ è½½loadå’ŒC++æ„é€ å‡½æ•°æ‰¾mainå‡½æ•°é…ç½®ï¼ˆç¯å¢ƒå˜é‡ï¼‰ â€” åŠ è½½ï¼ˆå…±äº«åŠ¨æ€åº“ï¼Œä¸»ç¨‹åºï¼ŒåŠ¨æ€åº“ï¼‰ â€” é“¾æ¥ï¼ˆé“¾æ¥ä¸»ç¨‹åºï¼ŒåŠ¨æ€åº“ï¼‰ â€” åˆå§‹åŒ–ï¼ˆç¨‹åºï¼‰ åŠ è½½åŠ¨æ€åº“è¿‡ç¨‹ï¼ŒåŠ¨æ€é“¾æ¥å™¨dyldéœ€è¦åšå¦‚ä¸‹æ“ä½œ1.åˆ†æä¾èµ–çš„åŠ¨æ€åº“2.æ‰¾åˆ°åŠ¨æ€åº“çš„Mach-Oæ–‡ä»¶3.æ‰“å¼€æ–‡ä»¶4.éªŒè¯æ–‡ä»¶5.åœ¨ç³»ç»Ÿçš„å†…æ ¸æ³¨å†Œæ–‡ä»¶ç­¾å6.å¯¹åŠ¨æ€åº“çš„æ¯ä¸ªsegmentè°ƒç”¨mmap() é’ˆå¯¹è¿™ä¸€æ­¥ä¼˜åŒ– 1.å‡å°‘éç³»ç»Ÿçš„åŠ¨æ€åº“2.ä½¿ç”¨é™æ€åº“è€Œä¸æ˜¯åŠ¨æ€åº“3.åˆå¹¶éç³»ç»Ÿçš„åŠ¨æ€åº“ä¸ºä¸€ä¸ª 1.åŠ¨æ€åº“å°½å¯èƒ½å°‘ï¼Œä¸è¦å¤šä¸6ä¸ªï¼Œå¦‚æœå¤šäº†ï¼Œå°½å¯èƒ½åˆå¹¶2.20000ä¸ªç±» 800æ¯«ç§’3.swifté™æ€è¯­è¨€ï¼Œæ€§èƒ½æ›´é«˜ å…­ã€ObjC SetUpç”±äºä¹‹å‰2æ­¥éª¤çš„ä¼˜åŒ–ï¼Œè¿™ä¸€æ­¥å®é™…ä¸Šæ²¡æœ‰ä»€ä¹ˆå¯åšçš„ã€‚å‡ ä¹éƒ½é  Rebasing å’Œ Binding æ­¥éª¤ä¸­å‡å°‘æ‰€éœ€ fix-up å†…å®¹ã€‚å› ä¸ºå‰é¢çš„å·¥ä½œä¹Ÿä¼šä½¿å¾—è¿™æ­¥è€—æ—¶å‡å°‘ã€‚ ä¸ƒã€Initializers ä»¥ä¸Šä¸‰æ­¥å±äºé™æ€è°ƒæ•´ï¼Œéƒ½æ˜¯åœ¨ä¿®æ”¹__DATA segmentä¸­çš„å†…å®¹ç°åœ¨å¼€å§‹åŠ¨æ€è°ƒæ•´ï¼Œåœ¨å †å’Œæ ˆä¸­å†™å…¥å†…å®¹ã€‚ å·¥ä½œä¸»è¦æœ‰ï¼š1ã€Objcçš„+load()å‡½æ•°2ã€C++çš„æ„é€ å‡½æ•°å±æ€§å‡½æ•° å½¢å¦‚attribute((constructor)) void DoSomeInitializationWork()3ã€éåŸºæœ¬ç±»å‹çš„C++é™æ€å…¨å±€å˜é‡çš„åˆ›å»º(é€šå¸¸æ˜¯ç±»æˆ–ç»“æ„ä½“)(non-trivial initializer) æ¯”å¦‚ä¸€ä¸ªå…¨å±€é™æ€ç»“æ„ä½“çš„æ„å»ºï¼Œå¦‚æœåœ¨æ„é€ å‡½æ•°ä¸­æœ‰ç¹é‡çš„å·¥ä½œï¼Œé‚£ä¹ˆä¼šæ‹–æ…¢å¯åŠ¨é€Ÿåº¦å¯ä»¥åšçš„ä¼˜åŒ–æœ‰ï¼šâ‘ ä½¿ç”¨ +initialize æ¥æ›¿ä»£ +loadâ‘¡ä¸è¦ä½¿ç”¨ atribute((constructor)) å°†æ–¹æ³•æ˜¾å¼æ ‡è®°ä¸ºåˆå§‹åŒ–å™¨ï¼Œè€Œæ˜¯è®©åˆå§‹åŒ–æ–¹æ³•è°ƒç”¨æ—¶æ‰æ‰§è¡Œã€‚ æ¯”å¦‚ä½¿ç”¨ dispatch_once(),pthread_once() æˆ– std::once()ã€‚ä¹Ÿå°±æ˜¯åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æ‰åˆå§‹åŒ–ï¼Œæ¨è¿Ÿäº†ä¸€éƒ¨åˆ†å·¥ä½œè€—æ—¶ã€‚ ä¹Ÿå°½é‡ä¸è¦ç”¨åˆ°C++çš„é™æ€å¯¹è±¡ã€‚ ä»æ•ˆç‡ä¸Šæ¥è¯´ï¼Œåœ¨+load å’Œ+initializeé‡Œæ‰§è¡ŒåŒæ ·çš„ä»£ç ï¼Œæ•ˆç‡æ˜¯ä¸€æ ·çš„ï¼Œå³ä½¿æœ‰å·®è·ï¼Œä¹Ÿä¸ä¼šå·®è·å¤ªå¤§ã€‚ ä½†æ‰€æœ‰çš„+loadæ–¹æ³•éƒ½åœ¨å¯åŠ¨çš„æ—¶å€™è°ƒç”¨ï¼Œæ–¹æ³•å¤šäº†å°±ä¼šä¸¥é‡å½±å“å¯åŠ¨é€Ÿåº¦äº†ã€‚ å°±è¯´æˆ‘ä»¬é¡¹ç›®ä¸­ï¼Œæœ‰200ä¸ªå·¦å³+loadæ–¹æ³•ï¼Œä¸€å…±è€—æ—¶å¤§æ¦‚1s å·¦å³ï¼Œè¿™å—å°±ä¼šä¸¥é‡å½±å“åˆ°ç”¨æˆ·æ„ŸçŸ¥äº†ã€‚ è€Œ+initializeæ–¹æ³•æ˜¯åœ¨å¯¹åº” Class ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„æ—¶å€™è°ƒç”¨ï¼Œè¿™æ˜¯ä¸€ä¸ªæ‡’åŠ è½½çš„æ–¹æ³•ï¼Œç†æƒ³æƒ…å†µä¸‹ï¼Œè¿™200ä¸ª+loadæ–¹æ³•éƒ½ä½¿ç”¨+initializeæ¥ä»£æ›¿ï¼Œå°†è€—æ—¶åˆ†æ‘Šåˆ°ç”¨æˆ·ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªæ–¹æ³•å¹³å‡è€—æ—¶åªæœ‰5msï¼Œç”¨æˆ·å®Œå…¨å¯ä»¥æ— æ„ŸçŸ¥ã€‚ #####å…«ã€äºŒè¿›åˆ¶é‡æ’iOSçš„è™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜ï¼šä¹‹å‰æ‰€æœ‰åº”ç”¨éƒ½åŠ è½½è¿›å†…å­˜æ¡ä¸­ï¼Œä¼šæœ‰å®‰å…¨é—®é¢˜ï¼Œä¼šè®¿é—®åˆ°å…¶ä»–äººçš„è½¯ä»¶ä¸­å» iOSè™šæ‹Ÿå†…å­˜æœ‰4Gçš„ CPUé€šè¿‡ æ“ä½œç³»ç»Ÿæ˜ å°„è¡¨ æ˜ å°„è™šæ‹Ÿå†…å­˜å’Œç‰©ç†çœŸå®å†…å­˜ä¹Ÿå°±æ˜¯æˆ‘ä»¬è®¿é—®è™šæ‹Ÿå†…å­˜ï¼Œéƒ½ä¼šèµ°åˆ°æ˜ å°„è¡¨ï¼Œç„¶åæ˜ å°„åˆ°çœŸå®çš„ç‰©ç†å†…å­˜ã€‚ï¼ˆæ¯ä¸ªæ˜ è™šæ‹Ÿå†…å­˜å¯¹åº”ä¸€ä¸ªæ˜ å°„è¡¨ï¼‰ï¼ˆmmpï¼‰åˆ†é¡µåŠ è½½ï¼Œæé«˜å†…å­˜çš„åˆ©ç”¨ç‡å†…å­˜æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œå†…å­˜ä»¥é¡µç®¡ç† PAGEï¼ŒLinuxæ¯1é¡µ4KBï¼ŒiOSæ¯ä¸€é¡µ16KB ç”¨è¿™ç§åˆ†é¡µåŠ è½½ï¼Œç”¨åˆ°å“ªå—å†…å­˜å°±åŠ è½½åˆ°çœŸå®å†…å­˜ä¸Šè¿°P2åŠ è½½çš„æ—¶å€™ï¼Œå‘ç°çœŸå®å†…å­˜æ²¡æœ‰ï¼Œç¼ºé¡µï¼ŒCPUä¼šä¸´æ—¶åŠ è½½ å¦‚æœå¯åŠ¨çš„æ—¶å€™ç¼ºé¡µæ¯”è¾ƒå¤šï¼ˆç¼ºé¡µå¼‚å¸¸ï¼‰ï¼Œå°±ä¼šä¸æ–­å»æ˜ å°„åˆ°ç‰©ç†å†…å­˜ï¼Œå°±ä¼šå¡é¡¿iOSçš„å†…å­˜åœ°å€ï¼Œä¸ç¼–è¯‘é¡ºåºæœ‰å…³ï¼Œæ‰€ä»¥å¦‚æœæ–¹æ³•åœ¨ä¸åŒçš„ç±»ï¼Œç±»çš„åŠ è½½å·®è·æ¯”è¾ƒå¤§ï¼Œé‚£ä¹ˆå°±ä¼šåŠ è½½æ¯”è¾ƒå¤šçš„é¡µï¼Œå°±ä¼šæµªè´¹æ—¶é—´ã€‚iOSç³»ç»Ÿè¿˜ä¼šå¯¹åŠ è½½çš„æ¯ä¸€é¡µåšç­¾åè®¤è¯ï¼Œæ‰€ä»¥æ›´åŠ æ¶ˆè€—æ—¶é—´ã€‚ system traceMain ThreadVirtual Memory File Backard Page In ldydorder_file è‡ªå·±å†™ä¸€ä¸ªæ–‡ä»¶ï¼Œé‡Œè¾¹æŒ‡å®šæ–¹æ³•çš„é¡ºåºï¼Œå¯ä»¥å°†å¯åŠ¨è¦è°ƒç”¨çš„æ–¹æ³•ï¼Œéƒ½æ”¾åˆ°é‡Œè¾¹ã€‚libc-orderåœ¨objcæºç é‡Œè¾¹ï¼Œè¿™å°±æ˜¯äºŒè¿›åˆ¶é‡æ’ æ‰€æœ‰OCæ–¹æ³•è·å–ç”¨fishhook å» HOOK objc_msgSend()æ–¹æ³•ï¼Œå¯ä»¥æ‹¿åˆ°æ‰€æœ‰çš„å‡½æ•°å¯ä»¥ç”¨Clangæ’åº’çš„æ–¹å¼AOP å…«ã€mainè¿‡ç¨‹ï¼š Mainå‡½æ•°ä¹‹å 1.æ‡’åŠ è½½2.å‘æŒ¥CPUçš„ä»·å€¼ï¼Œç”¨å¤šçº¿ç¨‹çš„æ–¹å¼ã€‚3.æ¡†æ¶çš„æ­å»ºå°½é‡é¿å…stroyboard å’Œ xib åˆ†é˜¶æ®µåŠ è½½ï¼š åœ¨didFinishLunchä¸­å¯åŠ¨çš„ï¼š åŸ‹ç‚¹åŠŸèƒ½ã€ Crash é‡‡é›† ç½‘ç»œé…ç½®ç­‰ åœ¨é¦–é¡µviewDidappear åˆå§‹åŒ–SDKï¼Œå‹ç›ŸSDKã€äººè„¸è¯†åˆ«SDKåç§» å¼€å§‹å®šä½ï¼ˆæ˜¾ç¤ºå®šä½ä¸­ï¼‰ï¼Œå®šä½å¯ä»¥ç¼“å­˜ï¼Œå…ˆåŠ è½½ï¼Œå®šä½åŒæ­¥è¿›è¡Œï¼Œå¦‚æœç¼“å­˜çš„åœ°ç†ä½ç½®ä¸ä¸€æ ·ï¼Œç„¶åæ‰æ›´æ–° é…ç½®ä¸‹å‘ç­‰ å¤šçº¿ç¨‹å¯åŠ¨ å°è¯•ä½¿ç”¨å¤šçº¿ç¨‹å¯åŠ¨å°†æ•°æ®åº“çš„é…ç½®ã€SDwebimage UAçš„é…ç½®æ”¾åˆ°å­çº¿ç¨‹ä¸­åˆå§‹åŒ–ï¼Œå¼•å…¥çŠ¶æ€ç®¡ç†ï¼Œéœ€è¦ç›‘æ§å­çº¿ç¨‹ä»»åŠ¡çŠ¶æ€ï¼Œåˆ¤æ–­æ˜¯å¦å–æ¶ˆå‡çš„å¼€å±é¡µé¢ã€‚ å¹¿å‘ŠåŒæ­¥åŠ è½½ï¼Œ2ç§’å›æ¥äº†å°±å±•ç¤ºï¼Œä¸å›æ¥å°±è¿‡Timer Profileçš„ä½¿ç”¨)","categories":[{"name":"iOSå¼€å‘","slug":"iOSå¼€å‘","permalink":"http://blogzhou.top/categories/iOSå¼€å‘/"}],"tags":[{"name":"OC","slug":"OC","permalink":"http://blogzhou.top/tags/OC/"}]},{"title":"Swift å°è®°","slug":"s14.Swift å°è®°","date":"2019-12-25T02:31:30.000Z","updated":"2020-12-16T06:19:09.305Z","comments":true,"path":"2019/12/25/s14.Swift å°è®°/","link":"","permalink":"http://blogzhou.top/2019/12/25/s14.Swift å°è®°/","excerpt":"å¾€æ—¥é‡Œé¡¹ç›®å¤ªèµ¶ï¼Œè™½æ–­æ–­ç»­ç»­è·Ÿäº†ä»¨Swifté¡¹ç›®ï¼Œä½†æœ‰äº›ä¸œè¥¿å§‹ç»ˆåœç•™åœ¨ä¼šç”¨çš„å±‚é¢ä¸Šï¼ŒçŸ¥å…¶ç„¶ï¼Œè€Œä¸çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚åˆšå¥½å½“ä¸‹æ— äº‹ï¼Œ5.0ä¹‹åABIä¹ŸåŸºæœ¬ç¨³å®šï¼Œä¾¿æƒ³ç€å¥½å¥½æ¢³ç†ä¸€ç•ªã€‚å£°æ˜å¦‚ä¸‹ï¼šæ–‡ç« å†…å®¹çš†éšå¿ƒéšæ€§æ‰€è®°ï¼Œæ—¨åœ¨æç‚¹æ£€ç´¢è®°å¿†ä¸­æ‰€å­˜å¯¹åº”çŸ¥è¯†æ‰€ç”¨ï¼Œå¯¹ä»–äººçš„åŠ©ç›Šå¯èƒ½å¾®ä¹å…¶å¾®ã€‚è‹¥ä¸å°å¿ƒç‚¹å‡»è¿›å…¥ï¼Œå¹¶å› æ­¤æµªè´¹ä½ å®è´µçš„æ—¶é—´ï¼Œå®åœ¨æ˜¯æŠ±æ­‰ã€‚è‹¥ä½ å› æ­¤å¿ƒæƒ…ä¸çˆ½ï¼Œé‚£å°±åœ¨è¯„è®ºåŒºéª‚æˆ‘ä¸¤å¥ï¼Œä»¥æ’è§£å¿ƒä¸­æ„¤æ‡‘ã€‚æˆ‘ä¿è¯ç§‰æ‰¿ å…¬å¹³ å…¬æ­£ å…¬å¼€çš„åŸåˆ™æ€¼å›å»ã€‚ 1. Playgroundæ”¯æŒMarkup(ç±»ä¼¼Markdown)è¯­è¨€ä¹¦å†™æ³¨é‡Šã€‚ //: [ä¸Šä¸€é¡µ](@previous): ä¸Šä¸€é¡µ //: [ä¸‹ä¸€é¡µ](@next): ä¸‹ä¸€é¡µ #ï¼šå‡ ä¸ªå¯¹åº”å‡ çº§æ ‡é¢˜ -ï¼šæ— åºæ ‡é¢˜ 1.ï¼šæœ‰åºæ ‡é¢˜ &gt;ï¼šç¬”è®° ---ï¼šåˆ†å‰²çº¿ [å›¾ç‰‡ä¸Šä¼ å¤±è´¥...(image-16af49-1606451751395)]ï¼šå›¾ç‰‡ [blog](http://blogzhou.top)ï¼šè¿æ¥ ** bold **ï¼šç²—ä½“ * italic *ï¼šæ–œä½“","text":"å¾€æ—¥é‡Œé¡¹ç›®å¤ªèµ¶ï¼Œè™½æ–­æ–­ç»­ç»­è·Ÿäº†ä»¨Swifté¡¹ç›®ï¼Œä½†æœ‰äº›ä¸œè¥¿å§‹ç»ˆåœç•™åœ¨ä¼šç”¨çš„å±‚é¢ä¸Šï¼ŒçŸ¥å…¶ç„¶ï¼Œè€Œä¸çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚åˆšå¥½å½“ä¸‹æ— äº‹ï¼Œ5.0ä¹‹åABIä¹ŸåŸºæœ¬ç¨³å®šï¼Œä¾¿æƒ³ç€å¥½å¥½æ¢³ç†ä¸€ç•ªã€‚å£°æ˜å¦‚ä¸‹ï¼šæ–‡ç« å†…å®¹çš†éšå¿ƒéšæ€§æ‰€è®°ï¼Œæ—¨åœ¨æç‚¹æ£€ç´¢è®°å¿†ä¸­æ‰€å­˜å¯¹åº”çŸ¥è¯†æ‰€ç”¨ï¼Œå¯¹ä»–äººçš„åŠ©ç›Šå¯èƒ½å¾®ä¹å…¶å¾®ã€‚è‹¥ä¸å°å¿ƒç‚¹å‡»è¿›å…¥ï¼Œå¹¶å› æ­¤æµªè´¹ä½ å®è´µçš„æ—¶é—´ï¼Œå®åœ¨æ˜¯æŠ±æ­‰ã€‚è‹¥ä½ å› æ­¤å¿ƒæƒ…ä¸çˆ½ï¼Œé‚£å°±åœ¨è¯„è®ºåŒºéª‚æˆ‘ä¸¤å¥ï¼Œä»¥æ’è§£å¿ƒä¸­æ„¤æ‡‘ã€‚æˆ‘ä¿è¯ç§‰æ‰¿ å…¬å¹³ å…¬æ­£ å…¬å¼€çš„åŸåˆ™æ€¼å›å»ã€‚ 1. Playgroundæ”¯æŒMarkup(ç±»ä¼¼Markdown)è¯­è¨€ä¹¦å†™æ³¨é‡Šã€‚ //: [ä¸Šä¸€é¡µ](@previous): ä¸Šä¸€é¡µ //: [ä¸‹ä¸€é¡µ](@next): ä¸‹ä¸€é¡µ #ï¼šå‡ ä¸ªå¯¹åº”å‡ çº§æ ‡é¢˜ -ï¼šæ— åºæ ‡é¢˜ 1.ï¼šæœ‰åºæ ‡é¢˜ &gt;ï¼šç¬”è®° ---ï¼šåˆ†å‰²çº¿ [å›¾ç‰‡ä¸Šä¼ å¤±è´¥...(image-16af49-1606451751395)]ï¼šå›¾ç‰‡ [blog](http://blogzhou.top)ï¼šè¿æ¥ ** bold **ï¼šç²—ä½“ * italic *ï¼šæ–œä½“ 2. Let :ä¸è¦æ±‚åœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼Œä½†ä½¿ç”¨å‰å¿…é¡»èµ‹å€¼ã€‚ä¹Ÿå°±æ˜¯å®ä¾‹åˆå§‹åŒ–å‰å¿…é¡»æœ‰å€¼ï¼Œ(å­˜å‚¨ç±»å‹å±æ€§é™¤å¤–)123// ä¸‹é¢ä»£ç é”™è¯¯ï¼Œå› å£°æ˜æ—¶æœªæŒ‡æ˜å¸¸é‡ç±»å‹let ageage = 18 #####3. å¯å˜å‚æ•° public func print(_ items: Any..., separator: String = &quot; &quot;, terminator: String = &quot;\\n&quot;)ï¼šå½¢å¦‚ Anyâ€¦ ä¸ºå¯å˜å‚æ•° #####4. å‡½æ•°å¯ä½œä¸ºå‚æ•°å’Œè¿”å›å€¼ã€‚ 123456789101112131415161718192021222324252627282930// ä½œä¸ºå‚æ•°func sum(v1: Int, v2: Int) -&gt; Int &#123; v1 + v2&#125;func difference(v1: Int, v2: Int) -&gt; Int &#123; v1 - v2&#125;func printResult(_ mathFn: (Int, Int) -&gt; Int, _ a: Int, _ b: Int) &#123; print(&quot;Result: \\(mathFn(a, b))&quot;)&#125;printResult(sum, 5, 2) // Result: 7printResult(difference, 5, 2) // Result: 3----------------------------------------------------------------------------------------------------------// ä½œä¸ºè¿”å›å€¼func next(_ input: Int) -&gt; Int &#123; input + 1&#125;func previous(_ input: Int) -&gt; Int &#123; input - 1 &#125;func forward(_ forward: Bool) -&gt; (Int) -&gt; Int &#123; forward ? next : previous&#125;forward(true)(3) // 4forward(false)(3) // 2nè¿”å›å€¼æ˜¯å‡½æ•°ç±»å‹çš„å‡½æ•°ï¼Œå«åšé«˜é˜¶å‡½æ•°(Higher-Order Function) 5. æ–¹æ³•123456789101112// åµŒå¥—å‡½æ•°ã€‚ func forward(_ forward: Bool) -&gt; (Int) -&gt; Int &#123; func next(_ input: Int) -&gt; Int &#123; input + 1 &#125; func previous(_ input: Int) -&gt; Int &#123; input - 1 &#125; return forward ? next : previous&#125;forward(true)(3) // 4forward(false)(3) // 2 å°†æ–¹æ³•èµ‹å€¼ç»™var\\letæ–¹æ³•ä¹Ÿå¯ä»¥åƒå‡½æ•°é‚£æ ·ï¼Œèµ‹å€¼ç»™ä¸€ä¸ªletæˆ–è€…var 12345678910111213struct Person &#123; var age: Int func run(_ v: Int) &#123; print(&quot;func run&quot;, age, v) &#125; static func run(_ v: Int) &#123; print(&quot;static func run&quot;, v) &#125; &#125;let fn1 = Person.runfn1(10) // static func run 10let fn2: (Int) -&gt; () = Person.run fn2(20) // static func run 20let fn3: (Person) -&gt; ((Int) -&gt; ()) = Person.run fn3(Person(age: 18))(30) // func run 18 30 6. æšä¸¾ã€‚ å…³è”å€¼(Associated Values) æœ‰æ—¶å°†æšä¸¾çš„æˆå‘˜å€¼è·Ÿå…¶ä»–ç±»å‹çš„å€¼å…³è”å­˜å‚¨åœ¨ä¸€èµ·ï¼Œä¼šéå¸¸æœ‰ç”¨1234567891011121314enum Score &#123; case points(Int) case grade(Character)&#125;var score = Score.points(96) score = .grade(&quot;A&quot;)switch score &#123; case let .points(i): print(i, &quot;points&quot;) case let .grade(i): print(&quot;grade&quot;, i)&#125; // grade A é€’å½’æšä¸¾ï¼š 1234567891011121314151617181920212223242526272829// indirectä¿®é¥°indirect enum ArithExpr &#123; case number(Int) case sum(ArithExpr, ArithExpr) case difference(ArithExpr, ArithExpr)&#125;enum ArithExpr &#123; case number(Int) indirect case sum(ArithExpr, ArithExpr) indirect case difference(ArithExpr, ArithExpr)&#125;let five = ArithExpr.number(5)let four = ArithExpr.number(4)let two = ArithExpr.number(2)let sum = ArithExpr.sum(five, four)let difference = ArithExpr.difference(sum, two)func calculate(_ expr: ArithExpr) -&gt; Int &#123; switch expr &#123; case let .number(value): return value case let .sum(left, right): return calculate(left) + calculate(right) case let .difference(left, right): return calculate(left) - calculate(right) &#125; &#125;calculate(difference) 7. å¯ä»¥ä½¿ç”¨MemoryLayoutè·å–æ•°æ®ç±»å‹å ç”¨çš„å†…å­˜å¤§å°1234567891011121314enum Password &#123; case number(Int, Int, Int, Int) case other&#125; MemoryLayout&lt;Password&gt;.stride // 40, åˆ†é…å ç”¨çš„ç©ºé—´å¤§å° MemoryLayout&lt;Password&gt;.size // 33, å®é™…ç”¨åˆ°çš„ç©ºé—´å¤§å° MemoryLayout&lt;Password&gt;.alignment // 8, å¯¹é½å‚æ•°var pwd = Password.number(9, 8, 6, 4)pwd = .other MemoryLayout.stride(ofValue: pwd) // 40 MemoryLayout.size(ofValue: pwd) // 33MemoryLayout.alignment(ofValue: pwd) // 8 8. å¯é€‰é¡¹(Optional)1234567891011121314151617// n å¯é€‰é¡¹ï¼Œä¸€èˆ¬ä¹Ÿå«å¯é€‰ç±»å‹ï¼Œå®ƒå…è®¸å°†å€¼è®¾ç½®ä¸ºnil // nåœ¨ç±»å‹åç§°åé¢åŠ ä¸ªé—®å·? æ¥å®šä¹‰ä¸€ä¸ªå¯é€‰é¡¹var name: String? = &quot;Jack&quot;name = nilvar age: Int? // é»˜è®¤å°±æ˜¯nil age = 10age = nilvar array = [1, 15, 40, 29] func get(_ index: Int) -&gt; Int? &#123; if index &lt; 0 || index &gt;= array.count &#123; return nil &#125; return array[index]&#125; print(get(1)) // Optional(15)print(get(-1)) // nil print(get(4)) // nil å¯é€‰é¡¹æ˜¯å¯¹å…¶ä»–ç±»å‹çš„ä¸€å±‚åŒ…è£…ï¼Œå¯ä»¥å°†å®ƒç†è§£ä¸ºä¸€ä¸ªç›’å­ å¦‚æœä¸ºnilï¼Œé‚£ä¹ˆå®ƒæ˜¯ä¸ªç©ºç›’å­ å¦‚æœä¸ä¸ºnilï¼Œé‚£ä¹ˆç›’å­é‡Œè£…çš„æ˜¯:è¢«åŒ…è£…ç±»å‹çš„æ•°æ® å¦‚æœè¦ä»å¯é€‰é¡¹ä¸­å–å‡ºè¢«åŒ…è£…çš„æ•°æ®(å°†ç›’å­é‡Œè£…çš„ä¸œè¥¿å–å‡ºæ¥)ï¼Œéœ€è¦ä½¿ç”¨æ„Ÿå¹å·! è¿›è¡Œå¼ºåˆ¶è§£åŒ… å¦‚æœå¯¹å€¼ä¸ºnilçš„å¯é€‰é¡¹(ç©ºç›’å­)è¿›è¡Œå¼ºåˆ¶è§£åŒ…ï¼Œå°†ä¼šäº§ç”Ÿè¿è¡Œæ—¶é”™è¯¯var age: Int?age!Fatal error: Unexpectedly found nil while unwrapping an Optional value å¤šé‡å¯é€‰é¡¹12345var num1: Int? = 10var num2: Int?? = num1var num3: Int?? = 10 print(num2 == num3) // true 1234567var num1: Int? = nilvar num2: Int?? = num1var num3: Int?? = nil// num2ä¸­è£…çš„æ˜¯ä¸ªå¯é€‰ç±»å‹ï¼Œnum3ä¸­è£…çš„æ˜¯nilï¼Œæ‰€ä»¥ä¸ç›¸ç­‰ã€‚print(num2 == num3) // false(num2 ?? 1) ?? 2 // 2(num3 ?? 1) ?? 2 // 1 9. ç©ºåˆå¹¶è¿ç®—ç¬¦ ??(Nil-Coalescing Operator)123public func ?? &lt;T&gt;(optional: T?, defaultValue: @autoclosure () throws -&gt; T?) rethrows -&gt; T?public func ?? &lt;T&gt;(optional: T?, defaultValue: @autoclosure () throws -&gt; T) rethrows -&gt; T a ?? ba æ˜¯å¯é€‰é¡¹b æ˜¯å¯é€‰é¡¹ æˆ–è€… ä¸æ˜¯å¯é€‰é¡¹b è·Ÿ a çš„å­˜å‚¨ç±»å‹å¿…é¡»ç›¸åŒå¦‚æœ a ä¸ä¸ºnilï¼Œå°±è¿”å› aå¦‚æœ a ä¸ºnilï¼Œå°±è¿”å› bå¦‚æœ b ä¸æ˜¯å¯é€‰é¡¹ï¼Œè¿”å› a æ—¶ä¼šè‡ªåŠ¨è§£åŒ… #####10. ç±» å’Œ ç»“æ„ä½“ ç±»ï¼šå¼•ç”¨ç±»å‹ï¼Œå†…å­˜åœ¨å †ä¸Šï¼Œé»˜è®¤åªæœ‰ä¸€ä¸ªæ— å‚çš„åˆå§‹åŒ–å™¨ï¼ˆå®šä¹‰æˆå‘˜æ—¶æŒ‡å®šäº†åˆå§‹åŒ–å€¼ï¼Œå¦åˆ™ä¸€ä¸ªæ²¡æœ‰ï¼‰ã€‚ ç»“æ„ä½“ï¼šå€¼ç±»å‹ï¼Œå†…å­˜æ ¹æ®ä»£ç å®šä¹‰çš„åœ°æ–¹ä¸åŒè€Œä¸åŒï¼Œé»˜è®¤æœ‰å¥½å¤šä¸ªåˆå§‹åŒ–å™¨ã€‚ #####11. é—­åŒ…è¡¨è¾¾å¼(Closure Expression) ï¼šä¸€ç§å‡½æ•°çš„å®šä¹‰æ–¹å¼ åœ¨Swiftä¸­ï¼Œå¯ä»¥é€šè¿‡funcå®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é—­åŒ…è¡¨è¾¾å¼å®šä¹‰ä¸€ä¸ªå‡½æ•°12345678910111213141516func sum(_ v1: Int, _ v2: Int) -&gt; Int &#123; v1 + v2 &#125;var fn = &#123;(v1: Int, v2: Int) -&gt; Int in return v1 + v2&#125;fn(10, 20)&#123;(v1: Int, v2: Int) -&gt; Int in return v1 + v2&#125;(10, 20)&#123;(å‚æ•°åˆ—è¡¨) -&gt; è¿”å›å€¼ç±»å‹ in å‡½æ•°ä½“ä»£ç &#125; 12. é—­åŒ… ä¸€ä¸ªå‡½æ•°å’Œå®ƒæ‰€æ•è·çš„å˜é‡\\å¸¸é‡ç¯å¢ƒç»„åˆèµ·æ¥ï¼Œç§°ä¸ºé—­åŒ… ä¸€èˆ¬æŒ‡å®šä¹‰åœ¨å‡½æ•°å†…éƒ¨çš„å‡½æ•° ä¸€èˆ¬å®ƒæ•è·çš„æ˜¯å¤–å±‚å‡½æ•°çš„å±€éƒ¨å˜é‡\\å¸¸é‡123456789typealias Fn = (Int) -&gt; Int func getFn() -&gt; Fn &#123; var num = 0 func plus(_ i: Int) -&gt; Int &#123; num += i return num &#125; return plus&#125; // è¿”å›çš„pluså’Œnumå½¢æˆäº†é—­åŒ… è¾…åŠ©ç†è§£ï¼š å¯ä»¥æŠŠé—­åŒ…æƒ³è±¡æˆæ˜¯ä¸€ä¸ªç±»çš„å®ä¾‹å¯¹è±¡ å†…å­˜åœ¨å †ç©ºé—´ æ•è·çš„å±€éƒ¨å˜é‡\\å¸¸é‡å°±æ˜¯å¯¹è±¡çš„æˆå‘˜(å­˜å‚¨å±æ€§) ç»„æˆé—­åŒ…çš„å‡½æ•°å°±æ˜¯ç±»å†…éƒ¨å®šä¹‰çš„æ–¹æ³•123456class Closure &#123; var num = 0 func plus(_ i: Int) -&gt; Int &#123; num += i return num &#125;&#125; 13. è‡ªåŠ¨é—­åŒ…@autoclosure12345678910111213141516// å¦‚æœç¬¬1ä¸ªæ•°å¤§äº0ï¼Œè¿”å›ç¬¬ä¸€ä¸ªæ•°ã€‚å¦åˆ™è¿”å›ç¬¬2ä¸ªæ•°func getFirstPositive(_ v1: Int, _ v2: Int) -&gt; Int &#123; return v1 &gt; 0 ? v1 : v2&#125;getFirstPositive(10, 20) // 10 getFirstPositive(-2, 20) // 20 getFirstPositive(0, -4) // -4// æ”¹æˆå‡½æ•°ç±»å‹çš„å‚æ•°ï¼Œå¯ä»¥è®©v2å»¶è¿ŸåŠ è½½func getFirstPositive(_ v1: Int, _ v2: () -&gt; Int) -&gt; Int? &#123; return v1 &gt; 0 ? v1 : v2() &#125;getFirstPositive(-4) &#123; 20 &#125;func getFirstPositive(_ v1: Int, _ v2: @autoclosure () -&gt; Int) -&gt; Int? &#123; return v1 &gt; 0 ? v1 : v2()&#125;getFirstPositive(-4, 20) @autoclosure ä¼šè‡ªåŠ¨å°† 20 å°è£…æˆé—­åŒ… { 20 } @autoclosure åªæ”¯æŒ () -&gt; T æ ¼å¼çš„å‚æ•° @autoclosure å¹¶éåªæ”¯æŒæœ€å1ä¸ªå‚æ•° ç©ºåˆå¹¶è¿ç®—ç¬¦ ?? ä½¿ç”¨äº† @autoclosure æŠ€æœ¯ æœ‰@autoclosureã€æ— @autoclosureï¼Œæ„æˆäº†å‡½æ•°é‡è½½ä¸ºäº†é¿å…ä¸æœŸæœ›å†²çªï¼Œä½¿ç”¨äº†@autoclosureçš„åœ°æ–¹æœ€å¥½æ˜ç¡®æ³¨é‡Šæ¸…æ¥š:è¿™ä¸ªå€¼ä¼šè¢«æ¨è¿Ÿæ‰§è¡Œ 14. å±æ€§ å­˜å‚¨å±æ€§(Stored Property) ç±»ä¼¼äºæˆå‘˜å˜é‡è¿™ä¸ªæ¦‚å¿µ å­˜å‚¨åœ¨å®ä¾‹çš„å†…å­˜ä¸­ ç»“æ„ä½“ã€ç±»å¯ä»¥å®šä¹‰å­˜å‚¨å±æ€§ æšä¸¾ä¸å¯ä»¥å®šä¹‰å­˜å‚¨å±æ€§ åœ¨åˆ›å»ºç±» æˆ– ç»“æ„ä½“çš„å®ä¾‹æ—¶ï¼Œå¿…é¡»ä¸ºæ‰€æœ‰çš„å­˜å‚¨å±æ€§è®¾ç½®ä¸€ä¸ªåˆé€‚çš„åˆå§‹å€¼ å¯ä»¥åœ¨åˆå§‹åŒ–å™¨é‡Œä¸ºå­˜å‚¨å±æ€§è®¾ç½®ä¸€ä¸ªåˆå§‹å€¼ å¯ä»¥åˆ†é…ä¸€ä¸ªé»˜è®¤çš„å±æ€§å€¼ä½œä¸ºå±æ€§å®šä¹‰çš„ä¸€éƒ¨åˆ† å»¶è¿Ÿå­˜å‚¨å±æ€§(Lazy Stored Property): ä½¿ç”¨lazyå¯ä»¥å®šä¹‰ä¸€ä¸ªå»¶è¿Ÿå­˜å‚¨å±æ€§ï¼Œåœ¨ç¬¬ä¸€æ¬¡ç”¨åˆ°å±æ€§çš„æ—¶å€™æ‰ä¼šè¿›è¡Œåˆå§‹åŒ– lazyå±æ€§å¿…é¡»æ˜¯varï¼Œä¸èƒ½æ˜¯let(å­˜å‚¨ç±»å‹å±æ€§é™¤å¤–) letå¿…é¡»åœ¨å®ä¾‹çš„åˆå§‹åŒ–æ–¹æ³•å®Œæˆä¹‹å‰å°±æ‹¥æœ‰å€¼ å¦‚æœå¤šæ¡çº¿ç¨‹åŒæ—¶ç¬¬ä¸€æ¬¡è®¿é—®lazyå±æ€§ æ— æ³•ä¿è¯å±æ€§åªè¢«åˆå§‹åŒ–1æ¬¡ å½“ç»“æ„ä½“åŒ…å«ä¸€ä¸ªå»¶è¿Ÿå­˜å‚¨å±æ€§æ—¶ï¼Œåªæœ‰varæ‰èƒ½è®¿é—®å»¶è¿Ÿå­˜å‚¨å±æ€§, å› ä¸ºå»¶è¿Ÿå±æ€§åˆå§‹åŒ–æ—¶éœ€è¦æ”¹å˜ç»“æ„ä½“çš„å†…å­˜ è®¡ç®—å±æ€§(Computed Property) æœ¬è´¨å°±æ˜¯æ–¹æ³•(å‡½æ•°) ä¸å ç”¨å®ä¾‹çš„å†…å­˜ æšä¸¾ã€ç»“æ„ä½“ã€ç±»éƒ½å¯ä»¥å®šä¹‰è®¡ç®—å±æ€§ setä¼ å…¥çš„æ–°å€¼é»˜è®¤å«åšnewValueï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰ åªè¯»è®¡ç®—å±æ€§:åªæœ‰getï¼Œæ²¡æœ‰set(æœ‰setï¼Œå¿…é¡»æœ‰get) å®šä¹‰è®¡ç®—å±æ€§åªèƒ½ç”¨varï¼Œä¸èƒ½ç”¨letã€‚letä»£è¡¨å¸¸é‡:å€¼æ˜¯ä¸€æˆä¸å˜çš„ ï¼Œè€Œè®¡ç®—å±æ€§çš„å€¼æ˜¯å¯èƒ½å‘ç”Ÿå˜åŒ–çš„(å³ä½¿æ˜¯åªè¯»è®¡ç®—å±æ€§) æšä¸¾åŸå§‹å€¼rawValueçš„æœ¬è´¨æ˜¯:åªè¯»è®¡ç®—å±æ€§ ######ç±»å‹å±æ€§(Type Property): å±æ€§å¯ä»¥åˆ†ä¸º: å®ä¾‹å±æ€§(Instance Property):åªèƒ½é€šè¿‡å®ä¾‹å»è®¿é—® å­˜å‚¨å®ä¾‹å±æ€§(Stored Instance Property):å­˜å‚¨åœ¨å®ä¾‹çš„å†…å­˜ä¸­ï¼Œæ¯ä¸ªå®ä¾‹éƒ½æœ‰1ä»½ è®¡ç®—å®ä¾‹å±æ€§(Computed Instance Property) ç±»å‹å±æ€§(Type Property):åªèƒ½é€šè¿‡ç±»å‹å»è®¿é—® å­˜å‚¨ç±»å‹å±æ€§(Stored Type Property):æ•´ä¸ªç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå°±åªæœ‰1ä»½å†…å­˜(ç±»ä¼¼äºå…¨å±€å˜é‡) è®¡ç®—ç±»å‹å±æ€§(Computed Type Property) å¯ä»¥é€šè¿‡staticå®šä¹‰ç±»å‹å±æ€§ å¦‚æœæ˜¯ç±»ï¼Œä¹Ÿå¯ä»¥ç”¨å…³é”®å­—class ps:ç±»å‹å±æ€§ç»†èŠ‚ ä¸åŒäºå­˜å‚¨å®ä¾‹å±æ€§ï¼Œä½ å¿…é¡»ç»™å­˜å‚¨ç±»å‹å±æ€§è®¾å®šåˆå§‹å€¼ã€‚ å› ä¸ºç±»å‹æ²¡æœ‰åƒå®ä¾‹é‚£æ ·çš„initåˆå§‹åŒ–å™¨æ¥åˆå§‹åŒ–å­˜å‚¨å±æ€§ å­˜å‚¨ç±»å‹å±æ€§é»˜è®¤å°±æ˜¯lazyï¼Œä¼šåœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„æ—¶å€™æ‰åˆå§‹åŒ–ã€‚ å°±ç®—è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œä¿è¯åªä¼šåˆå§‹åŒ–ä¸€æ¬¡ã€‚ å­˜å‚¨ç±»å‹å±æ€§å¯ä»¥æ˜¯let æšä¸¾ç±»å‹ä¹Ÿå¯ä»¥å®šä¹‰ç±»å‹å±æ€§(å­˜å‚¨ç±»å‹å±æ€§ã€è®¡ç®—ç±»å‹å±æ€§)12345678910111213// å•ä¾‹æ¨¡å¼public class FileManager &#123; public static let shared = FileManager() private init() &#123; &#125;&#125;public class FileManager &#123; public static let shared = &#123; // .... // .... return FileManager() &#125;() private init() &#123; &#125;&#125; #####15. å±æ€§è§‚å¯Ÿå™¨(Property Observer) å¯ä»¥ä¸ºélazyçš„varå­˜å‚¨å±æ€§è®¾ç½®å±æ€§è§‚å¯Ÿå™¨ willSetä¼šä¼ é€’æ–°å€¼ï¼Œé»˜è®¤å«newValu didSetä¼šä¼ é€’æ—§å€¼ï¼Œé»˜è®¤å«oldValue åœ¨åˆå§‹åŒ–å™¨ä¸­è®¾ç½®å±æ€§å€¼ä¸ä¼šè§¦å‘willSetå’ŒdidSet åœ¨å±æ€§å®šä¹‰æ—¶è®¾ç½®åˆå§‹å€¼ä¹Ÿä¸ä¼šè§¦å‘willSetå’ŒdidSet çˆ¶ç±»çš„å±æ€§åœ¨å®ƒè‡ªå·±çš„åˆå§‹åŒ–å™¨ä¸­èµ‹å€¼ä¸ä¼šè§¦å‘å±æ€§è§‚å¯Ÿå™¨ï¼Œä½†åœ¨å­ç±»çš„åˆå§‹åŒ–å™¨ä¸­èµ‹å€¼ä¼šè§¦å‘å±æ€§è§‚å¯Ÿå™¨ å±æ€§è§‚å¯Ÿå™¨ã€è®¡ç®—å±æ€§çš„åŠŸèƒ½ï¼ŒåŒæ ·å¯ä»¥åº”ç”¨åœ¨å…¨å±€å˜é‡ã€å±€éƒ¨å˜é‡èº«ä¸Š1234567891011121314struct Circle &#123; var radius: Double &#123; willSet &#123; print(&quot;willSet&quot;, newValue) &#125; didSet &#123; print(&quot;didSet&quot;, oldValue, radius) &#125; &#125; init() &#123; self.radius = 1.0 print(&quot;Circle init!&quot;) &#125;&#125; #####16. inoutçš„æœ¬è´¨ å¦‚æœå®å‚æœ‰ç‰©ç†å†…å­˜åœ°å€ï¼Œä¸”æ²¡æœ‰è®¾ç½®å±æ€§è§‚å¯Ÿå™¨ ç›´æ¥å°†å®å‚çš„å†…å­˜åœ°å€ä¼ å…¥å‡½æ•°(å®å‚è¿›è¡Œå¼•ç”¨ä¼ é€’) å¦‚æœå®å‚æ˜¯è®¡ç®—å±æ€§ æˆ–è€… è®¾ç½®äº†å±æ€§è§‚å¯Ÿå™¨ é‡‡å–äº†Copy In Copy Outçš„åšæ³• è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œå…ˆå¤åˆ¶å®å‚çš„å€¼ï¼Œäº§ç”Ÿå‰¯æœ¬ã€getã€‘ å°†å‰¯æœ¬çš„å†…å­˜åœ°å€ä¼ å…¥å‡½æ•°(å‰¯æœ¬è¿›è¡Œå¼•ç”¨ä¼ é€’)ï¼Œåœ¨å‡½æ•°å†…éƒ¨å¯ä»¥ä¿®æ”¹å‰¯æœ¬çš„å€¼ å‡½æ•°è¿”å›åï¼Œå†å°†å‰¯æœ¬çš„å€¼è¦†ç›–å®å‚çš„å€¼ã€setã€‘ æ€»ç»“:inoutçš„æœ¬è´¨å°±æ˜¯å¼•ç”¨ä¼ é€’(åœ°å€ä¼ é€’) #####17. æ–¹æ³• mutatingç»“æ„ä½“å’Œæšä¸¾æ˜¯å€¼ç±»å‹ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå€¼ç±»å‹çš„å±æ€§ä¸èƒ½è¢«è‡ªèº«çš„å®ä¾‹æ–¹æ³•ä¿®æ”¹ã€‚åœ¨funcå…³é”®å­—å‰åŠ mutatingå¯ä»¥å…è®¸è¿™ç§ä¿®æ”¹è¡Œä¸º @discardableResult åœ¨funcå‰é¢åŠ ä¸ª@discardableResultï¼Œå¯ä»¥æ¶ˆé™¤:å‡½æ•°è°ƒç”¨åè¿”å›å€¼æœªè¢«ä½¿ç”¨çš„è­¦å‘Šâš  #####18. ä¸‹æ ‡(subscript) ä½¿ç”¨subscriptå¯ä»¥ç»™ä»»æ„ç±»å‹(æšä¸¾ã€ç»“æ„ä½“ã€ç±»)å¢åŠ ä¸‹æ ‡åŠŸèƒ½ï¼Œæœ‰äº›åœ°æ–¹ä¹Ÿç¿»è¯‘ä¸º:ä¸‹æ ‡è„šæœ¬ subscriptçš„è¯­æ³•ç±»ä¼¼äºå®ä¾‹æ–¹æ³•ã€è®¡ç®—å±æ€§ï¼Œæœ¬è´¨å°±æ˜¯æ–¹æ³•(å‡½æ•°) subscriptä¸­å®šä¹‰çš„è¿”å›å€¼ç±»å‹å†³å®šäº† getæ–¹æ³•çš„è¿”å›å€¼ç±»å‹ setæ–¹æ³•ä¸­newValueçš„ç±»å‹ subscriptå¯ä»¥æ¥å—å¤šä¸ªå‚æ•°ï¼Œå¹¶ä¸”ç±»å‹ä»»æ„ subscriptå¯ä»¥æ²¡æœ‰setæ–¹æ³•ï¼Œä½†å¿…é¡»è¦æœ‰getæ–¹æ³•ã€‚å¦‚æœåªæœ‰getæ–¹æ³•ï¼Œå¯ä»¥çœç•¥ã€‚ #####19.ç»§æ‰¿(Inheritance) å€¼ç±»å‹(æšä¸¾ã€ç»“æ„ä½“)ä¸æ”¯æŒç»§æ‰¿ï¼Œåªæœ‰ç±»æ”¯æŒç»§æ‰¿ã€‚ æ²¡æœ‰çˆ¶ç±»çš„ç±»ï¼Œç§°ä¸º:åŸºç±» Swiftå¹¶æ²¡æœ‰åƒOCã€Javaé‚£æ ·çš„è§„å®š:ä»»ä½•ç±»æœ€ç»ˆéƒ½è¦ç»§æ‰¿è‡ªæŸä¸ªåŸºç±» å­ç±»å¯ä»¥é‡å†™çˆ¶ç±»çš„ä¸‹æ ‡ã€æ–¹æ³•ã€å±æ€§ï¼Œé‡å†™å¿…é¡»åŠ ä¸Šoverrideå…³é”®å­— é‡å†™ç±»å‹æ–¹æ³•ã€ä¸‹æ ‡ï¼š1.è¢«classä¿®é¥°çš„ç±»å‹æ–¹æ³•ã€ä¸‹æ ‡ï¼Œå…è®¸è¢«å­ç±»é‡å†™2.è¢«staticä¿®é¥°çš„ç±»å‹æ–¹æ³•ã€ä¸‹æ ‡ï¼Œä¸å…è®¸è¢«å­ç±»é‡å†™ é‡å†™å±æ€§ï¼š å­ç±»å¯ä»¥å°†çˆ¶ç±»çš„å±æ€§(å­˜å‚¨ã€è®¡ç®—)é‡å†™ä¸ºè®¡ç®—å±æ€§ å­ç±»ä¸å¯ä»¥å°†çˆ¶ç±»å±æ€§é‡å†™ä¸ºå­˜å‚¨å±æ€§ åªèƒ½é‡å†™varå±æ€§ï¼Œä¸èƒ½é‡å†™letå±æ€§ é‡å†™æ—¶ï¼Œå±æ€§åã€ç±»å‹è¦ä¸€è‡´ å­ç±»é‡å†™åçš„å±æ€§æƒé™ ä¸èƒ½å°äº çˆ¶ç±»å±æ€§çš„æƒé™ å¦‚æœçˆ¶ç±»å±æ€§æ˜¯åªè¯»çš„ï¼Œé‚£ä¹ˆå­ç±»é‡å†™åçš„å±æ€§å¯ä»¥æ˜¯åªè¯»çš„ã€ä¹Ÿå¯ä»¥æ˜¯å¯è¯»å†™çš„ å¦‚æœçˆ¶ç±»å±æ€§æ˜¯å¯è¯»å†™çš„ï¼Œé‚£ä¹ˆå­ç±»é‡å†™åçš„å±æ€§ä¹Ÿå¿…é¡»æ˜¯å¯è¯»å†™çš„ é‡å†™ç±»å‹å±æ€§: è¢«classä¿®é¥°çš„è®¡ç®—ç±»å‹å±æ€§ï¼Œå¯ä»¥è¢«å­ç±»é‡å†™ è¢«staticä¿®é¥°çš„ç±»å‹å±æ€§(å­˜å‚¨ã€è®¡ç®—)ï¼Œä¸å¯ä»¥è¢«å­ç±»é‡å†™ å±æ€§è§‚å¯Ÿå™¨: å¯ä»¥åœ¨å­ç±»ä¸­ä¸ºçˆ¶ç±»å±æ€§(é™¤äº†åªè¯»è®¡ç®—å±æ€§ã€letå±æ€§)å¢åŠ å±æ€§è§‚å¯Ÿå™¨ final: è¢«finalä¿®é¥°çš„æ–¹æ³•ã€ä¸‹æ ‡ã€å±æ€§ï¼Œç¦æ­¢è¢«é‡å†™ è¢«finalä¿®é¥°çš„ç±»ï¼Œç¦æ­¢è¢«ç»§æ‰¿ å¤šæ€ï¼ˆç»§æ‰¿ï¼‰åŸç†å›¾ç¤ºï¼š #####20. åˆå§‹åŒ–å™¨ ç±»ã€ç»“æ„ä½“ã€æšä¸¾éƒ½å¯ä»¥å®šä¹‰åˆå§‹åŒ–å™¨ ç±»æœ‰2ç§åˆå§‹åŒ–å™¨:æŒ‡å®šåˆå§‹åŒ–å™¨(çºµå‘)(designated initializer)ã€ä¾¿æ·åˆå§‹åŒ–å™¨(æ¨ªå‘)(convenience initializer)12345678// æŒ‡å®šåˆå§‹åŒ–å™¨ init(parameters) &#123; statements &#125;// ä¾¿æ·åˆå§‹åŒ–å™¨convenience init(parameters) &#123; statements &#125; æ¯ä¸ªç±»è‡³å°‘æœ‰ä¸€ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ï¼ŒæŒ‡å®šåˆå§‹åŒ–å™¨æ˜¯ç±»çš„ä¸»è¦åˆå§‹åŒ–å™¨ é»˜è®¤åˆå§‹åŒ–å™¨æ€»æ˜¯ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ç±»åå‘äºå°‘é‡æŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œä¸€ä¸ªç±»é€šå¸¸åªæœ‰ä¸€ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ åˆå§‹åŒ–å™¨çš„ç›¸äº’è°ƒç”¨è§„åˆ™:æŒ‡å®šåˆå§‹åŒ–å™¨å¿…é¡»ä»å®ƒçš„ç›´ç³»çˆ¶ç±»è°ƒç”¨æŒ‡å®šåˆå§‹åŒ–å™¨ä¾¿æ·åˆå§‹åŒ–å™¨å¿…é¡»ä»ç›¸åŒçš„ç±»é‡Œè°ƒç”¨å¦ä¸€ä¸ªåˆå§‹åŒ–å™¨ä¾¿æ·åˆå§‹åŒ–å™¨æœ€ç»ˆå¿…é¡»è°ƒç”¨ä¸€ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ #####21. ä¸¤æ®µå¼åˆå§‹åŒ– Swiftåœ¨ç¼–ç å®‰å…¨æ–¹é¢æ˜¯ç…è´¹è‹¦å¿ƒï¼Œä¸ºäº†ä¿è¯åˆå§‹åŒ–è¿‡ç¨‹çš„å®‰å…¨ï¼Œè®¾å®šäº†ä¸¤æ®µå¼åˆå§‹åŒ–ã€ å®‰å…¨æ£€æŸ¥ ä¸¤æ®µå¼åˆå§‹åŒ–ï¼š ç¬¬1é˜¶æ®µ:åˆå§‹åŒ–æ‰€æœ‰å­˜å‚¨å±æ€§:1 å¤–å±‚è°ƒç”¨æŒ‡å®š\\ä¾¿æ·åˆå§‹åŒ–å™¨2 åˆ†é…å†…å­˜ç»™å®ä¾‹ï¼Œä½†æœªåˆå§‹åŒ–3 æŒ‡å®šåˆå§‹åŒ–å™¨ç¡®ä¿å½“å‰ç±»å®šä¹‰çš„å­˜å‚¨å±æ€§éƒ½åˆå§‹åŒ–4 æŒ‡å®šåˆå§‹åŒ–å™¨è°ƒç”¨çˆ¶ç±»çš„åˆå§‹åŒ–å™¨ï¼Œä¸æ–­å‘ä¸Šè°ƒç”¨ï¼Œå½¢æˆåˆå§‹åŒ–å™¨é“¾ - ***ç¬¬2é˜¶æ®µ:è®¾ç½®æ–°çš„å­˜å‚¨å±æ€§å€¼***: &gt;1 ä»é¡¶éƒ¨åˆå§‹åŒ–å™¨å¾€ä¸‹ï¼Œé“¾ä¸­çš„æ¯ä¸€ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨éƒ½æœ‰æœºä¼šè¿›ä¸€æ­¥å®šåˆ¶å®ä¾‹ 2 åˆå§‹åŒ–å™¨ç°åœ¨èƒ½å¤Ÿä½¿ç”¨self(è®¿é—®ã€ä¿®æ”¹å®ƒçš„å±æ€§ï¼Œè°ƒç”¨å®ƒçš„å®ä¾‹æ–¹æ³•ç­‰ç­‰)3 æœ€ç»ˆï¼Œé“¾ä¸­ä»»ä½•ä¾¿æ·åˆå§‹åŒ–å™¨éƒ½æœ‰æœºä¼šå®šåˆ¶å®ä¾‹ä»¥åŠä½¿ç”¨self #####22. å®‰å…¨æ£€æŸ¥ã€é‡å†™ã€è‡ªåŠ¨ç»§æ‰¿ã€required å®‰å…¨æ£€æŸ¥: æŒ‡å®šåˆå§‹åŒ–å™¨å¿…é¡»ä¿è¯åœ¨è°ƒç”¨çˆ¶ç±»åˆå§‹åŒ–å™¨ä¹‹å‰ï¼Œå…¶æ‰€åœ¨ç±»å®šä¹‰çš„æ‰€æœ‰å­˜å‚¨å±æ€§éƒ½è¦åˆå§‹åŒ–å®Œæˆ æŒ‡å®šåˆå§‹åŒ–å™¨å¿…é¡»å…ˆè°ƒç”¨çˆ¶ç±»åˆå§‹åŒ–å™¨ï¼Œç„¶åæ‰èƒ½ä¸ºç»§æ‰¿çš„å±æ€§è®¾ç½®æ–°å€¼ ä¾¿æ·åˆå§‹åŒ–å™¨å¿…é¡»å…ˆè°ƒç”¨åŒç±»ä¸­çš„å…¶å®ƒåˆå§‹åŒ–å™¨ï¼Œç„¶åå†ä¸ºä»»æ„å±æ€§è®¾ç½®æ–°å€¼ åˆå§‹åŒ–å™¨åœ¨ç¬¬1é˜¶æ®µåˆå§‹åŒ–å®Œæˆä¹‹å‰ï¼Œä¸èƒ½è°ƒç”¨ä»»ä½•å®ä¾‹æ–¹æ³•ã€ä¸èƒ½è¯»å–ä»»ä½•å®ä¾‹å±æ€§çš„å€¼ï¼Œä¹Ÿä¸èƒ½å¼•ç”¨self ç›´åˆ°ç¬¬1é˜¶æ®µç»“æŸï¼Œå®ä¾‹æ‰ç®—å®Œå…¨åˆæ³• é‡å†™ï¼š1.å½“é‡å†™çˆ¶ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨æ—¶ï¼Œå¿…é¡»åŠ ä¸Šoverride(å³ä½¿å­ç±»çš„å®ç°æ˜¯ä¾¿æ·åˆå§‹åŒ–å™¨)2.å¦‚æœå­ç±»å†™äº†ä¸€ä¸ªåŒ¹é…çˆ¶ç±»ä¾¿æ·åˆå§‹åŒ–å™¨çš„åˆå§‹åŒ–å™¨ï¼Œä¸ç”¨åŠ ä¸Šoverrideï¼Œå› ä¸ºçˆ¶ç±»çš„ä¾¿æ·åˆå§‹åŒ–å™¨æ°¸è¿œä¸ä¼šé€šè¿‡å­ç±»ç›´æ¥è°ƒç”¨ï¼Œå› æ­¤ï¼Œä¸¥æ ¼æ¥è¯´ï¼Œå­ç±»æ— æ³•é‡å†™çˆ¶ç±»çš„ä¾¿æ·åˆå§‹åŒ– è‡ªåŠ¨ç»§æ‰¿: 1 å¦‚æœå­ç±»æ²¡æœ‰è‡ªå®šä¹‰ä»»ä½•æŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œå®ƒä¼šè‡ªåŠ¨ç»§æ‰¿çˆ¶ç±»æ‰€æœ‰çš„æŒ‡å®šåˆå§‹åŒ–å™¨ 2 å¦‚æœå­ç±»æä¾›äº†çˆ¶ç±»æ‰€æœ‰æŒ‡å®šåˆå§‹åŒ–å™¨çš„å®ç°(è¦ä¹ˆé€šè¿‡æ–¹å¼1ç»§æ‰¿ï¼Œè¦ä¹ˆé‡å†™) å­ç±»è‡ªåŠ¨ç»§æ‰¿æ‰€æœ‰çš„çˆ¶ç±»ä¾¿æ·åˆå§‹åŒ–å™¨ 3 å°±ç®—å­ç±»æ·»åŠ äº†æ›´å¤šçš„ä¾¿æ·åˆå§‹åŒ–å™¨ï¼Œè¿™äº›è§„åˆ™ä»ç„¶é€‚ç”¨ 4 å­ç±»ä»¥ä¾¿æ·åˆå§‹åŒ–å™¨çš„å½¢å¼é‡å†™çˆ¶ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºæ»¡è¶³è§„åˆ™2çš„ä¸€éƒ¨åˆ† required:1.ç”¨requiredä¿®é¥°æŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œè¡¨æ˜å…¶æ‰€æœ‰å­ç±»éƒ½å¿…é¡»å®ç°è¯¥åˆå§‹åŒ–å™¨(é€šè¿‡ç»§æ‰¿æˆ–è€…é‡å†™å®ç°)2.å¦‚æœå­ç±»é‡å†™äº†requiredåˆå§‹åŒ–å™¨ï¼Œä¹Ÿå¿…é¡»åŠ ä¸Šrequiredï¼Œä¸ç”¨åŠ override #####23. å¯å¤±è´¥åˆå§‹åŒ–å™¨ ç±»ã€ç»“æ„ä½“ã€æšä¸¾éƒ½å¯ä»¥ä½¿ç”¨init?å®šä¹‰å¯å¤±è´¥åˆå§‹åŒ–å™¨123456789101112131415class Person &#123; var name: String init?(name: String) &#123; if name.isEmpty &#123; return nil &#125; self.name = name &#125;&#125;1. ä¸å…è®¸åŒæ—¶å®šä¹‰å‚æ•°æ ‡ç­¾ã€å‚æ•°ä¸ªæ•°ã€å‚æ•°ç±»å‹ç›¸åŒçš„å¯å¤±è´¥åˆå§‹åŒ–å™¨å’Œéå¯å¤±è´¥åˆå§‹åŒ–å™¨2. å¯ä»¥ç”¨init!å®šä¹‰éšå¼è§£åŒ…çš„å¯å¤±è´¥åˆå§‹åŒ–å™¨3. å¯å¤±è´¥åˆå§‹åŒ–å™¨å¯ä»¥è°ƒç”¨éå¯å¤±è´¥åˆå§‹åŒ–å™¨ï¼Œéå¯å¤±è´¥åˆå§‹åŒ–å™¨è°ƒç”¨å¯å¤±è´¥åˆå§‹åŒ–å™¨éœ€è¦è¿›è¡Œè§£åŒ…4. å¦‚æœåˆå§‹åŒ–å™¨è°ƒç”¨ä¸€ä¸ªå¯å¤±è´¥åˆå§‹åŒ–å™¨å¯¼è‡´åˆå§‹åŒ–å¤±è´¥ï¼Œé‚£ä¹ˆæ•´ä¸ªåˆå§‹åŒ–è¿‡ç¨‹éƒ½å¤±è´¥ï¼Œå¹¶ä¸”ä¹‹åçš„ä»£ç éƒ½åœæ­¢æ‰§è¡Œ 5. å¯ä»¥ç”¨ä¸€ä¸ªéå¯å¤±è´¥åˆå§‹åŒ–å™¨é‡å†™ä¸€ä¸ªå¯å¤±è´¥åˆå§‹åŒ–å™¨ï¼Œä½†åè¿‡æ¥æ˜¯ä¸è¡Œçš„ #####24. ååˆå§‹åŒ–å™¨(deinit) deinitå«åšååˆå§‹åŒ–å™¨ï¼Œç±»ä¼¼äºC++çš„ææ„å‡½æ•°ã€OCä¸­çš„deallocæ–¹æ³• å½“ç±»çš„å®ä¾‹å¯¹è±¡è¢«é‡Šæ”¾å†…å­˜æ—¶ï¼Œå°±ä¼šè°ƒç”¨å®ä¾‹å¯¹è±¡çš„deinitæ–¹æ³• 12345678class Person &#123; deinit &#123; print(&quot;Personå¯¹è±¡é”€æ¯äº†&quot;) &#125;&#125;// deinitä¸æ¥å—ä»»ä½•å‚æ•°ï¼Œä¸èƒ½å†™å°æ‹¬å·ï¼Œä¸èƒ½è‡ªè¡Œè°ƒç”¨ // çˆ¶ç±»çš„deinitèƒ½è¢«å­ç±»ç»§æ‰¿// å­ç±»çš„deinitå®ç°æ‰§è¡Œå®Œæ¯•åä¼šè°ƒç”¨çˆ¶ç±»çš„deinit #####25. å¯é€‰é“¾(Optional Chaining) å¦‚æœå¯é€‰é¡¹ä¸ºnilï¼Œè°ƒç”¨æ–¹æ³•ã€ä¸‹æ ‡ã€å±æ€§å¤±è´¥ï¼Œç»“æœä¸ºnil å¦‚æœå¯é€‰é¡¹ä¸ä¸ºnilï¼Œè°ƒç”¨æ–¹æ³•ã€ä¸‹æ ‡ã€å±æ€§æˆåŠŸï¼Œç»“æœä¼šè¢«åŒ…è£…æˆå¯é€‰é¡¹ å¦‚æœç»“æœæœ¬æ¥å°±æ˜¯å¯é€‰é¡¹ï¼Œä¸ä¼šè¿›è¡Œå†æ¬¡åŒ…è£…12345678910111213141516171819202122// å¤šä¸ª?å¯ä»¥é“¾æ¥åœ¨ä¸€èµ·// å¦‚æœé“¾ä¸­ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹æ˜¯nilï¼Œé‚£ä¹ˆæ•´ä¸ªé“¾å°±ä¼šè°ƒç”¨å¤±è´¥var dog = person?.dog // Dog?var weight = person?.dog.weight // Int? var price = person?.car?.price // Int?class Person &#123; var name: String = &quot;&quot; var dog: Dog = Dog() var car: Car? = Car() func age() -&gt; Int &#123; 18 &#125; func eat() &#123; print(&quot;Person eat&quot;) &#125; subscript(index: Int) -&gt; Int &#123; index &#125;&#125;var person: Person? = Person()if let _ = person?.eat() &#123; // ()? print(&quot;eatè°ƒç”¨æˆåŠŸ&quot;)&#125; else &#123; print(&quot;eatè°ƒç”¨å¤±è´¥&quot;)&#125; person?.eat()é»˜è®¤æ²¡æœ‰è¿”å›å€¼ï¼Œä¹Ÿå¯ä»¥å†™æˆvar p = person?eat()çš„èµ‹å€¼å½¢å¼ã€‚å› ä¸ºåœ¨Swiftä¸­å‡½æ•°å…¶å®é»˜è®¤è¿”å›-&gt; Voidï¼Œ è€ŒVoid = ()ï¼Œä¹Ÿå°±æ˜¯ç©ºå…ƒç¥–ã€‚æ‰€ä»¥pä¹Ÿå°±æ˜¯()?ç±»å‹ #####26. åè®®(Protocol) åè®®ä¸­çš„å±æ€§ï¼š å¿…é¡»ç”¨varå®šä¹‰ å®ç°æ—¶æƒé™ä¸å¾—å°äºåè®®ä¸­å®šä¹‰çš„æƒé™ staticã€classï¼š ä¸ºäº†ä¿è¯é€šç”¨ï¼Œåè®®ä¸­å¿…é¡»ç”¨staticå®šä¹‰ç±»å‹æ–¹æ³•ã€ç±»å‹å±æ€§ã€ç±»å‹ä¸‹æ ‡ ç»™æšä¸¾ã€ç»“æ„ä½“ä½¿ç”¨æ—¶æ³¨æ„åŠ mutatingå…³é”®å­— init: 123456789101112131415161718192021222324// åè®®ä¸­è¿˜å¯ä»¥å®šä¹‰åˆå§‹åŒ–å™¨init // éfinalç±»å®ç°æ—¶å¿…é¡»åŠ ä¸Šrequiredprotocol Drawable &#123; init(x: Int, y: Int)&#125;class Point : Drawable &#123; required init(x: Int, y: Int) &#123;&#125;&#125;final class Size : Drawable &#123; init(x: Int, y: Int) &#123;&#125;&#125;// å¦‚æœä»åè®®å®ç°çš„åˆå§‹åŒ–å™¨ï¼Œåˆšå¥½æ˜¯é‡å†™äº†çˆ¶ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ // é‚£ä¹ˆè¿™ä¸ªåˆå§‹åŒ–å¿…é¡»åŒæ—¶åŠ requiredã€overrideprotocol Livable &#123; init(age: Int)&#125;class Person &#123; init(age: Int) &#123;&#125;&#125;class Student : Person, Livable &#123; required override init(age: Int) &#123; super.init(age: age) &#125;&#125; initã€init?ã€init!: åè®®ä¸­å®šä¹‰çš„init?ã€init!ï¼Œå¯ä»¥ç”¨initã€init?ã€init!å»å®ç° åè®®ä¸­å®šä¹‰çš„initï¼Œå¯ä»¥ç”¨initã€init!å»å®ç° #####27. CaseIterable åè®® 12345678// è®©æšä¸¾éµå®ˆCaseIterableåè®®ï¼Œå¯ä»¥å®ç°éå†æšä¸¾å€¼enum Season : CaseIterable &#123; case spring, summer, autumn, winter&#125;let seasons = Season.allCases print(seasons.count) // 4 for season in seasons &#123; print(season)&#125; // spring summer autumn winter #####28. CustomStringConvertible éµå®ˆCustomStringConvertibleã€ CustomDebugStringConvertibleåè®®ï¼Œéƒ½å¯ä»¥è‡ªå®šä¹‰å®ä¾‹çš„æ‰“å°å­—ç¬¦ä¸²12345678class Person : CustomStringConvertible, CustomDebugStringConvertible &#123; var age = 0 var description: String &#123; &quot;person_\\(age)&quot; &#125; var debugDescription: String &#123; &quot;debug_person_\\(age)&quot; &#125; &#125;var person = Person()print(person) // person_0 debugPrint(person) // debug_person_0 printè°ƒç”¨çš„æ˜¯CustomStringConvertibleåè®®çš„descriptiondebugPrintã€poè°ƒç”¨çš„æ˜¯CustomDebugStringConvertibleåè®®çš„debugDescription #####29. Anyã€AnyObject Any:å¯ä»¥ä»£è¡¨ä»»æ„ç±»å‹(æšä¸¾ã€ç»“æ„ä½“ã€ç±»ï¼Œä¹ŸåŒ…æ‹¬å‡½æ•°ç±»å‹) AnyObject:å¯ä»¥ä»£è¡¨ä»»æ„ç±»ç±»å‹(åœ¨åè®®åé¢å†™ä¸Š: AnyObjectä»£è¡¨åªæœ‰ç±»èƒ½éµå®ˆè¿™ä¸ªåè®®)åœ¨åè®®åé¢å†™ä¸Š: classä¹Ÿä»£è¡¨åªæœ‰ç±»èƒ½éµå®ˆè¿™ä¸ªåè®® 30. isã€as?ã€as!ã€as isç”¨æ¥åˆ¤æ–­æ˜¯å¦ä¸ºæŸç§ç±»å‹ï¼Œasç”¨æ¥åšå¼ºåˆ¶ç±»å‹è½¬æ¢ #####31. X.selfã€X.Typeã€AnyClass X.self(å¯¹åº”OCä¸­çš„ç±»å¯¹è±¡)æ˜¯ä¸€ä¸ªå…ƒç±»å‹(metadata)çš„æŒ‡é’ˆï¼Œmetadataå­˜æ”¾ç€ç±»å‹ç›¸å…³ä¿¡æ¯ X.selfå±äºX.Typeç±»å‹(å¯¹åº”OCä¸­çš„å…ƒç±»å¯¹è±¡) 12345678910111213141516171819202122232425262728293031class Person &#123;&#125;class Student : Person &#123;&#125;var perType: Person.Type = Person.self var stuType: Student.Type = Student.self perType = Student.selfvar anyType: AnyObject.Type = Person.self anyType = Student.selfpublic typealias AnyClass = AnyObject.Type var anyType2: AnyClass = Person.self anyType2 = Student.selfvar per = Person()var perType = type(of: per) // Person.self print(Person.self == type(of: per)) // true //å…ƒç±»å‹çš„åº”ç”¨class Animal &#123; required init() &#123;&#125; &#125; class Cat : Animal &#123;&#125;class Dog : Animal &#123;&#125;class Pig : Animal &#123;&#125;func create(_ clses: [Animal.Type]) -&gt; [Animal] &#123; var arr = [Animal]() for cls in clses &#123; arr.append(cls.init()) &#125; return arr &#125;print(create([Cat.self, Dog.self, Pig.self])) Swiftè¿˜æœ‰ä¸ªéšè—çš„åŸºç±»:Swift._SwiftObject æºç è¿æ¥ #####32.å¤§å†™Self1234567891011121314151617181920212223242526272829Self// Selfä»£è¡¨å½“å‰ç±»å‹class Person &#123; var age = 1 static var count = 2 func run() &#123; print(self.age) // 1 print(Self.count) // 2 ç­‰ä»·äºPerson.count &#125;&#125;// Selfä¸€èˆ¬ç”¨ä½œè¿”å›å€¼ç±»å‹ï¼Œé™å®šè¿”å›å€¼è·Ÿæ–¹æ³•è°ƒç”¨è€…å¿…é¡»æ˜¯åŒä¸€ç±»å‹(ä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ç±»å‹)protocol Runnable &#123; func test() -&gt; Self&#125;class Person : Runnable &#123; required init() &#123;&#125; func test() -&gt; Self &#123; type(of: self).init() &#125; &#125;class Student : Person &#123;&#125;var p = Person() // Person print(p.test())var stu = Student() // Student print(stu.test()) #####33.é”™è¯¯å¤„ç† è‡ªå®šä¹‰é”™è¯¯:123456789101112131415// Swiftä¸­å¯ä»¥é€šè¿‡Erroråè®®è‡ªå®šä¹‰è¿è¡Œæ—¶çš„é”™è¯¯ä¿¡æ¯enum SomeError : Error &#123; case illegalArg(String) case outOfBounds(Int, Int) case outOfMemory&#125;// å‡½æ•°å†…éƒ¨é€šè¿‡throwæŠ›å‡ºè‡ªå®šä¹‰Errorï¼Œå¯èƒ½ä¼šæŠ›å‡ºErrorçš„å‡½æ•°å¿…é¡»åŠ ä¸Šthrowså£°æ˜ func divide(_ num1: Int, _ num2: Int) throws -&gt; Int &#123; if num2 == 0 &#123; throw SomeError.illegalArg(&quot;0ä¸èƒ½ä½œä¸ºé™¤æ•°&quot;) &#125; return num1 / num2&#125;// éœ€è¦ä½¿ç”¨tryè°ƒç”¨å¯èƒ½ä¼šæŠ›å‡ºErrorçš„å‡½æ•°var result = try divide(20, 10) å¤„ç†Errorçš„3ç§æ–¹å¼ï¼š 1 é€šè¿‡do-catchæ•æ‰Error2 ä¸æ•æ‰Errorï¼Œåœ¨å½“å‰å‡½æ•°å¢åŠ throwså£°æ˜ï¼ŒErrorå°†è‡ªåŠ¨æŠ›ç»™ä¸Šå±‚å‡½æ•°ï¼Œ å¦‚æœæœ€é¡¶å±‚å‡½æ•°(mainå‡½æ•°)ä¾ç„¶æ²¡æœ‰æ•æ‰Errorï¼Œé‚£ä¹ˆç¨‹åºå°†ç»ˆæ­¢3 å¯ä»¥ä½¿ç”¨try?ã€try!è°ƒç”¨å¯èƒ½ä¼šæŠ›å‡ºErrorçš„å‡½æ•°ï¼Œè¿™æ ·å°±ä¸ç”¨å»å¤„ç†Error æŠ›å‡ºErroråï¼Œtryä¸‹ä¸€å¥ç›´åˆ°ä½œç”¨åŸŸç»“æŸçš„ä»£ç éƒ½å°†åœæ­¢è¿è¡Œ rethrowsrethrowsè¡¨æ˜:å‡½æ•°æœ¬èº«ä¸ä¼šæŠ›å‡ºé”™è¯¯ï¼Œä½†è°ƒç”¨é—­åŒ…å‚æ•°æŠ›å‡ºé”™è¯¯ï¼Œé‚£ä¹ˆå®ƒä¼šå°†é”™è¯¯å‘ä¸ŠæŠ› 12345func exec(_ fn: (Int, Int) throws -&gt; Int, _ num1: Int, _ num2: Int) rethrows &#123; print(try fn(num1, num2))&#125;// Fatal error: Error raised at top leveltry exec(divide, 20, 0) defer deferè¯­å¥:ç”¨æ¥å®šä¹‰ä»¥ä»»ä½•æ–¹å¼(æŠ›é”™è¯¯ã€returnç­‰)ç¦»å¼€ä»£ç å—å‰å¿…é¡»è¦æ‰§è¡Œçš„ä»£ç  deferè¯­å¥å°†å»¶è¿Ÿè‡³å½“å‰ä½œç”¨åŸŸç»“æŸä¹‹å‰æ‰§è¡Œ12345678// deferè¯­å¥çš„æ‰§è¡Œé¡ºåºä¸å®šä¹‰é¡ºåºç›¸åfunc test() &#123; defer &#123; fn1() &#125; defer &#123; fn2() &#125;&#125;test()// fn2// fn1 assert(æ–­è¨€) å¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½æœ‰æ–­è¨€æœºåˆ¶:ä¸ç¬¦åˆæŒ‡å®šæ¡ä»¶å°±æŠ›å‡ºè¿è¡Œæ—¶é”™è¯¯ï¼Œå¸¸ç”¨äºè°ƒè¯•(Debug)é˜¶æ®µçš„æ¡ä»¶åˆ¤æ–­ é»˜è®¤æƒ…å†µä¸‹ï¼ŒSwiftçš„æ–­è¨€åªä¼šåœ¨Debugæ¨¡å¼ä¸‹ç”Ÿæ•ˆï¼ŒReleaseæ¨¡å¼ä¸‹ä¼šå¿½ç•¥ å¢åŠ Swift Flagsä¿®æ”¹æ–­è¨€çš„é»˜è®¤è¡Œä¸ºp-assert-config Release:å¼ºåˆ¶å…³é—­æ–­è¨€p-assert-config Debug:å¼ºåˆ¶å¼€å¯æ–­è¨€ fatalError å¦‚æœé‡åˆ°ä¸¥é‡é—®é¢˜ï¼Œå¸Œæœ›ç»“æŸç¨‹åºè¿è¡Œæ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨fatalErrorå‡½æ•°æŠ›å‡ºé”™è¯¯(è¿™æ˜¯æ— æ³•é€šè¿‡do-catchæ•æ‰çš„é”™è¯¯) ä½¿ç”¨äº†fatalErrorå‡½æ•°ï¼Œå°±ä¸éœ€è¦å†å†™return åœ¨æŸäº›ä¸å¾—ä¸å®ç°ã€ä½†ä¸å¸Œæœ›åˆ«äººè°ƒç”¨çš„æ–¹æ³•ï¼Œå¯ä»¥è€ƒè™‘å†…éƒ¨ä½¿ç”¨fatalErrorå‡½æ•° #####34.æ³›å‹ æ³›å‹å¯ä»¥å°†ç±»å‹å‚æ•°åŒ–ï¼Œæé«˜ä»£ç å¤ç”¨ç‡ï¼Œå‡å°‘ä»£ç é‡ 12// æ³›å‹å‡½æ•°èµ‹å€¼ç»™å˜é‡func swapValues&lt;T&gt;(_ a: inout T, _ b: inout T) &#123; (a, b) = (b, a) &#125; å…³è”ç±»å‹(Associated Type)å…³è”ç±»å‹çš„ä½œç”¨:ç»™åè®®ä¸­ç”¨åˆ°çš„ç±»å‹å®šä¹‰ä¸€ä¸ªå ä½åç§°ã€‚å°±æ˜¯åè®®ä¸­æ³›å‹çš„å®ç°åè®®ä¸­å¯ä»¥æ‹¥æœ‰å¤šä¸ªå…³è”ç±»å‹ 12345678910111213141516171819 protocol Stackable &#123; associatedtype Element // å…³è”ç±»å‹ mutating func push(_ element: Element) mutating func pop() -&gt; Element func top() -&gt; Element func size() -&gt; Int&#125;class StringStack : Stackable &#123; // ç»™å…³è”ç±»å‹è®¾å®šçœŸå®ç±»å‹ // typealias Element = String var elements = [String]() func push(_ element: String) &#123; elements.append(element) &#125; func pop() -&gt; String &#123; elements.removeLast() &#125; func top() -&gt; String &#123; elements.last! &#125; func size() -&gt; Int &#123; elements.count &#125; &#125;var ss = StringStack() ss.push(&quot;Jack&quot;) ss.push(&quot;Rose&quot;) whereç±»å‹çº¦æŸ 123456789 protocol Stackable &#123;associatedtype Element: Equatable &#125; class Stack&lt;E : Equatable&gt; : Stackable &#123; typealias Element = E &#125; func equal&lt;S1: Stackable, S2: Stackable&gt;(_ s1: S1, _ s2: S2) -&gt; Bool where S1.Element == S2.Element, S1.Element : Hashable &#123;return false &#125; åè®®ç±»å‹çš„æ³¨æ„ç‚¹ some ä¸é€æ˜ç±»å‹åº”ç”¨ 1234567891011121314151617181920212223242526272829 æ³›å‹è§£å†³ // è§£å†³æ–¹æ¡ˆ1:ä½¿ç”¨æ³›å‹func get&lt;T : Runnable&gt;(_ type: Int) -&gt; T &#123; if type == 0 &#123; return Person() as! T &#125; return Car() as! T&#125;var r1: Person = get(0)var r2: Car = get(1)ä¸é€æ˜ç±»å‹(Opaque Type): å±è”½å†…éƒ¨å®ç°ç»†èŠ‚// è§£å†³æ–¹æ¡ˆ2:ä½¿ç”¨someå…³é”®å­—å£°æ˜ä¸€ä¸ªä¸é€æ˜ç±»å‹ // someé™åˆ¶åªèƒ½è¿”å›ä¸€ç§ç±»å‹ func get(_ type: Int) -&gt; some Runnable &#123; Car() &#125; var r1 = get(0)var r2 = get(1) // some// someé™¤äº†ç”¨åœ¨è¿”å›å€¼ç±»å‹ä¸Šï¼Œä¸€èˆ¬è¿˜å¯ä»¥ç”¨åœ¨å±æ€§ç±»å‹ä¸Šprotocol Runnable &#123; associatedtype Speed &#125;class Dog : Runnable &#123; typealias Speed = Double &#125;class Person &#123; var pet: some Runnable &#123; return Dog() &#125; &#125; å¯é€‰é¡¹çš„æœ¬è´¨æ˜¯enumç±»å‹ 12345678910111213141516171819202122232425262728293031323334353637public enum Optional&lt;Wrapped&gt; : ExpressibleByNilLiteral &#123; case none // nil case some(Wrapped) // å…³è”å€¼ public init(_ some: Wrapped) &#125;var age: Int? = .none age = 10age = .some(20)age = nilvar age: Int? = 10var age0: Optional&lt;Int&gt; = Optional&lt;Int&gt;.some(10)var age1: Optional = .some(10)var age2 = Optional.some(10)var age3 = Optional(10)age = nilage3 = .none// ä¸¤ç§åˆ¤æ–­nilçš„å†™æ³•switch age &#123; // é»˜è®¤ä¼šè§£åŒ… case let v?: print(&quot;some&quot;, v) case nil: print(&quot;none&quot;)&#125;switch age &#123; case let .some(v): print(&quot;some&quot;, v) case .none: print(&quot;none&quot;)&#125; #####35. å…³äºStringçš„æœ¬è´¨æ¢ç´¢ 1234567891011121314 // å­—ç¬¦ä¸²é•¿åº¦ &lt;= 0xF(15)ï¼Œå­—ç¬¦ä¸²å†…å®¹ç›´æ¥å­˜æ”¾åœ¨str1å˜é‡çš„å†…å­˜ä¸­ã€‚ï¼ˆç±»ä¼¼OCä¸­çš„tagger pointer æŠ€æœ¯ï¼‰var str1 = &quot;0123456789&quot;// å­—ç¬¦ä¸²é•¿åº¦ &gt; 0xFï¼Œå­—ç¬¦ä¸²å†…å®¹å­˜æ”¾åœ¨__TEXT.cstringä¸­ï¼ˆå¸¸é‡åŒºï¼‰// å­—ç¬¦ä¸²çš„åœ°å€å€¼ä¿¡æ¯å­˜æ”¾åœ¨str2å˜é‡çš„å8ä¸ªå­—èŠ‚ä¸­var str2 = &quot;0123456789ABCDEF&quot;// ç”±äºå­—ç¬¦ä¸²é•¿åº¦ &lt;= 0xFï¼Œæ‰€ä»¥å­—ç¬¦ä¸²å†…å®¹ä¾ç„¶å­˜æ”¾åœ¨str1å˜é‡çš„å†…å­˜ä¸­str1.append(&quot;ABCDE&quot;)// å¼€è¾Ÿå †ç©ºé—´str1.append(&quot;F&quot;)// å¼€è¾Ÿå †ç©ºé—´str2.append(&quot;G&quot;) #####36.callï¼ŒjmpæŒ‡ä»¤åŒºåˆ« callä¼šæŠŠä»–çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€å‹å…¥å †æ ˆï¼Œç„¶åè·³è½¬åˆ°ä»–è°ƒç”¨çš„å¼€å§‹å¤„ï¼ŒåŒæ—¶retä¼šè‡ªåŠ¨å¼¹å‡ºè¿”å›åœ°å€ã€‚ JMPåªæ˜¯ç®€å•çš„è·³è½¬callçš„æœ¬è´¨ç›¸å½“äºpush+jmp retçš„æœ¬è´¨ç›¸å½“äºpop+jmp #####37.é«˜çº§è¿ç®—ç¬¦ æº¢å‡ºè¿ç®—ç¬¦(Overflow Operator)ï¼š Swiftçš„ç®—æ•°è¿ç®—ç¬¦å‡ºç°æº¢å‡ºæ—¶ä¼šæŠ›å‡ºè¿è¡Œæ—¶é”™è¯¯ Swiftæœ‰æº¢å‡ºè¿ç®—ç¬¦(&amp;+ã€&amp;-ã€&amp;*)ï¼Œç”¨æ¥æ”¯æŒæº¢å‡ºè¿ç®— 12345678var min = UInt8.minprint(min &amp;- 1) // 255, Int8.maxvar max = UInt8.maxprint(max &amp;+ 1) // 0, Int8.min print(max &amp;* 2) // 254, ç­‰ä»·äº max &amp;+ max// é€æ¸é€’å¢UInt8.min 0UInt8.max 255 è¿ç®—ç¬¦é‡è½½(Operator Overload): ç±»ã€ç»“æ„ä½“ã€æšä¸¾å¯ä»¥ä¸ºç°æœ‰çš„è¿ç®—ç¬¦æä¾›è‡ªå®šä¹‰çš„å®ç°ï¼Œè¿™ä¸ªæ“ä½œå«åš:è¿ç®—ç¬¦é‡è½½123456789101112131415161718192021222324 struct Point : Equatable &#123; var x = 0, y = 0 static func + (p1: Point, p2: Point) -&gt; Point &#123; Point(x: p1.x + p2.x, y: p1.y + p2.y) &#125; static func - (p1: Point, p2: Point) -&gt; Point &#123; Point(x: p1.x - p2.x, y: p1.y - p2.y) &#125; static prefix func - (p: Point) -&gt; Point &#123; Point(x: -p.x, y: -p.y) &#125; static func += (p1: inout Point, p2: Point) &#123; p1 = p1 + p2 &#125; static prefix func ++ (p: inout Point) -&gt; Point &#123; p += Point(x: 1, y: 1) return p &#125; static postfix func ++ (p: inout Point) -&gt; Point &#123; let tmp = p p += Point(x: 1, y: 1) return tmp &#125;&#125; Equatable: è¦æƒ³å¾—çŸ¥2ä¸ªå®ä¾‹æ˜¯å¦ç­‰ä»·ï¼Œä¸€èˆ¬åšæ³•æ˜¯éµå®ˆEquatable åè®®ï¼Œé‡è½½== è¿ç®—ç¬¦ ä¸æ­¤åŒæ—¶ï¼Œç­‰ä»·äºé‡è½½äº† != è¿ç®—ç¬¦ Swiftä¸ºä»¥ä¸‹ç±»å‹æä¾›é»˜è®¤çš„Equatable å®ç° æ²¡æœ‰å…³è”ç±»å‹çš„æšä¸¾ åªæ‹¥æœ‰éµå®ˆ Equatable åè®®å…³è”ç±»å‹çš„æšä¸¾ åªæ‹¥æœ‰éµå®ˆ Equatable åè®®å­˜å‚¨å±æ€§çš„ç»“æ„ä½“ å¼•ç”¨ç±»å‹æ¯”è¾ƒå­˜å‚¨çš„åœ°å€å€¼æ˜¯å¦ç›¸ç­‰(æ˜¯å¦å¼•ç”¨ç€åŒä¸€ä¸ªå¯¹è±¡)ï¼Œä½¿ç”¨æ’ç­‰è¿ç®—ç¬¦=== ã€!== Comparable è¦æƒ³æ¯”è¾ƒ2ä¸ªå®ä¾‹çš„å¤§å°ï¼Œä¸€èˆ¬åšæ³•æ˜¯: 1.éµå®ˆ Comparable åè®® 2.é‡è½½ç›¸åº”çš„è¿ç®—ç¬¦123456789101112131415161718192021222324252627282930313233 // scoreå¤§çš„æ¯”è¾ƒå¤§ï¼Œè‹¥scoreç›¸ç­‰ï¼Œageå°çš„æ¯”è¾ƒå¤§ struct Student : Comparable &#123; var age: Int var score: Int init(score: Int, age: Int) &#123; self.score = score self.age = age &#125; static func &lt; (lhs: Student, rhs: Student) -&gt; Bool &#123; (lhs.score &lt; rhs.score) || (lhs.score == rhs.score &amp;&amp; lhs.age &gt; rhs.age) &#125; static func &gt; (lhs: Student, rhs: Student) -&gt; Bool &#123; (lhs.score &gt; rhs.score) || (lhs.score == rhs.score &amp;&amp; lhs.age &lt; rhs.age) &#125; static func &lt;= (lhs: Student, rhs: Student) -&gt; Bool &#123; !(lhs &gt; rhs) &#125; static func &gt;= (lhs: Student, rhs: Student) -&gt; Bool &#123; !(lhs &lt; rhs) &#125; &#125;var stu1 = Student(score: 100, age: 20) var stu2 = Student(score: 98, age: 18) var stu3 = Student(score: 100, age: 20) print(stu1 &gt; stu2) // trueprint(stu1 &gt;= stu2) // trueprint(stu1 &gt;= stu3) // trueprint(stu1 &lt;= stu3) // trueprint(stu2 &lt; stu1) // trueprint(stu2 &lt;= stu1) // true è‡ªå®šä¹‰è¿ç®—ç¬¦(Custom Operator) å¯ä»¥è‡ªå®šä¹‰æ–°çš„è¿ç®—ç¬¦:åœ¨å…¨å±€ä½œç”¨åŸŸä½¿ç”¨operatorè¿›è¡Œå£°æ˜123456789101112131415161718 prefix operator å‰ç¼€è¿ç®—ç¬¦postfix operator åç¼€è¿ç®—ç¬¦infix operator ä¸­ç¼€è¿ç®—ç¬¦ : ä¼˜å…ˆçº§ç»„precedencegroup ä¼˜å…ˆçº§ç»„ &#123; associativity: ç»“åˆæ€§(left\\right\\none) higherThan: æ¯”è°çš„ä¼˜å…ˆçº§é«˜ lowerThan: æ¯”è°çš„ä¼˜å…ˆçº§ä½ assignment: trueä»£è¡¨åœ¨å¯é€‰é“¾æ“ä½œä¸­æ‹¥æœ‰è·Ÿèµ‹å€¼è¿ç®—ç¬¦ä¸€æ ·çš„ä¼˜å…ˆçº§&#125;prefix operator +++infix operator +- : PlusMinusPrecedence precedencegroup PlusMinusPrecedence &#123; associativity: none higherThan: AdditionPrecedence lowerThan: MultiplicationPrecedence assignment: true&#125; Appleæ–‡æ¡£å‚è€ƒ1Appleæ–‡æ¡£å‚è€ƒ2 ç¤ºä¾‹ï¼š12345678910111213141516171819 struct Point &#123; var x: Int, y: Int static prefix func +++ (point: inout Point) -&gt; Point &#123; point = Point(x: point.x + point.x, y: point.y + point.y) return point &#125; static func +- (left: Point, right: Point) -&gt; Point &#123; return Point(x: left.x + right.x, y: left.y - right.y) &#125; static func +- (left: Point?, right: Point) -&gt; Point &#123; print(&quot;+-&quot;) return Point(x: left?.x ?? 0 + right.x, y: left?.y ?? 0 - right.y) &#125;&#125;struct Person &#123; var point: Point&#125;var person: Person? = nil person?.point +- Point(x: 10, y: 20) #####38. æ‰©å±•(Extension) Swiftä¸­çš„æ‰©å±•ï¼Œæœ‰ç‚¹ç±»ä¼¼äºOCä¸­çš„åˆ†ç±»(Category) æ‰©å±•å¯ä»¥ä¸ºæšä¸¾ã€ç»“æ„ä½“ã€ç±»ã€åè®®æ·»åŠ æ–°åŠŸèƒ½ å¯ä»¥æ·»åŠ æ–¹æ³•ã€è®¡ç®—å±æ€§ã€ä¸‹æ ‡ã€(ä¾¿æ·)åˆå§‹åŒ–å™¨ã€åµŒå¥—ç±»å‹ã€åè®®ç­‰ç­‰ æ‰©å±•ä¸èƒ½åŠåˆ°çš„äº‹æƒ…: ä¸èƒ½è¦†ç›–åŸæœ‰çš„åŠŸèƒ½ä¸èƒ½æ·»åŠ å­˜å‚¨å±æ€§ï¼Œä¸èƒ½å‘å·²æœ‰çš„å±æ€§æ·»åŠ å±æ€§è§‚å¯Ÿå™¨ä¸èƒ½æ·»åŠ çˆ¶ç±»ä¸èƒ½æ·»åŠ æŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œä¸èƒ½æ·»åŠ ååˆå§‹åŒ–å™¨â€¦ åè®®æ‹“å±•æ‰©å±•å¯ä»¥ç»™åè®®æä¾›é»˜è®¤å®ç°ï¼Œä¹Ÿé—´æ¥å®ç°ã€å¯é€‰åè®®ã€çš„æ•ˆæœæ‰©å±•å¯ä»¥ç»™åè®®æ‰©å……ã€åè®®ä¸­ä»æœªå£°æ˜è¿‡çš„æ–¹æ³•ã€ æ³¨æ„ä¸‹é¢ä»£ç çš„æ‰“å°ä¿¡æ¯ï¼š 12345678910111213141516171819202122232425262728 protocol TestProtocol &#123; func test1() &#125; extension TestProtocol &#123; func test1() &#123; print(&quot;TestProtocol test1&quot;) &#125; func test2() &#123; print(&quot;TestProtocol test2&quot;) &#125; &#125;class TestClass : TestProtocol &#123; func test1() &#123; print(&quot;TestClass test1&quot;) &#125; func test2() &#123; print(&quot;TestClass test2&quot;) &#125;&#125;var cls = TestClass()cls.test1() // TestClass test1 cls.test2() // TestClass test2var cls2: TestProtocol = TestClass() cls2.test1() // TestClass test1 cls2.test2() // TestProtocol test2 ``` - æ³›å‹æ‹“å±•ï¼š // ç¬¦åˆæ¡ä»¶æ‰æ‰©å±•(åªæœ‰Stackä¸­çš„å…ƒç´ éµå®ˆEquatableåè®®ï¼Œæ‹“å±•æ‰æœ‰æ•ˆ)extension Stack : Equatable where E : Equatable { static func == (left: Stack, right: Stack) -&gt; Bool { left.elements == right.elements }} 12345678910111213141516171819202122232425262728293031323334- #####39.è®¿é—®æ§åˆ¶(Access Control) - åœ¨è®¿é—®æƒé™æ§åˆ¶è¿™å—ï¼ŒSwiftæä¾›äº†5ä¸ªä¸åŒçš„è®¿é—®çº§åˆ«(ä»¥ä¸‹æ˜¯ä»é«˜åˆ°ä½æ’åˆ—ï¼Œ å®ä½“æŒ‡***è¢«è®¿é—®çº§åˆ«ä¿®é¥°çš„å†…å®¹***) &gt; open:å…è®¸åœ¨å®šä¹‰å®ä½“çš„æ¨¡å—ã€å…¶ä»–æ¨¡å—ä¸­è®¿é—®ï¼Œå…è®¸å…¶ä»–æ¨¡å—è¿›è¡Œç»§æ‰¿ã€é‡å†™(openåªèƒ½ç”¨åœ¨ç±»ã€ç±»æˆå‘˜ä¸Š) &gt; public:å…è®¸åœ¨å®šä¹‰å®ä½“çš„æ¨¡å—ã€å…¶ä»–æ¨¡å—ä¸­è®¿é—®ï¼Œä¸å…è®¸å…¶ä»–æ¨¡å—è¿›è¡Œç»§æ‰¿ã€é‡å†™ &gt; internal:åªå…è®¸åœ¨å®šä¹‰å®ä½“çš„æ¨¡å—ä¸­è®¿é—®ï¼Œä¸å…è®¸åœ¨å…¶ä»–æ¨¡å—ä¸­è®¿é—® &gt; fileprivate:åªå…è®¸åœ¨å®šä¹‰å®ä½“çš„æºæ–‡ä»¶ä¸­è®¿é—®&gt; private:åªå…è®¸åœ¨å®šä¹‰å®ä½“çš„å°é—­å£°æ˜ä¸­è®¿é—® `ç»å¤§éƒ¨åˆ†å®ä½“é»˜è®¤éƒ½æ˜¯internal çº§åˆ«` - è®¿é—®çº§åˆ«çš„ä½¿ç”¨å‡†åˆ™:`ä¸€ä¸ªå®ä½“ä¸å¯ä»¥è¢«æ›´ä½è®¿é—®çº§åˆ«çš„å®ä½“å®šä¹‰`&gt;1.å…ƒç¥–ï¼Œæ³›å‹éƒ½ä»¥æœ€ä½é‚£ä¸ªä¸ºå‡†&gt;2.åè®®å®ç°ä¸å¾—å°äºåè®®å’Œç±»ä¸­çš„è¾ƒå°çš„é‚£ä¸ª&gt;3.æšä¸¾ä¸èƒ½æ¯é¡¹å•ç‹¬å®šä¹‰&gt;4.public é™å®šä½œç”¨åŸŸå†…éƒ¨é»˜è®¤æ˜¯internal&gt;5.requiredåˆå§‹åŒ–å™¨ â‰¥ å®ƒçš„é»˜è®¤è®¿é—®çº§åˆ«- `ç›´æ¥åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹å®šä¹‰çš„privateç­‰ä»·äºfileprivate`- #####40.å†…å­˜ç®¡ç†- è·ŸOCä¸€æ ·ï¼ŒSwiftä¹Ÿæ˜¯é‡‡å–åŸºäºå¼•ç”¨è®¡æ•°çš„ARCå†…å­˜ç®¡ç†æ–¹æ¡ˆ(é’ˆå¯¹å †ç©ºé—´) - Swiftçš„ARCä¸­æœ‰3ç§å¼•ç”¨: - 1.å¼ºå¼•ç”¨(`strong reference`):é»˜è®¤æƒ…å†µä¸‹ï¼Œå¼•ç”¨éƒ½æ˜¯å¼ºå¼•ç”¨ - 2.å¼±å¼•ç”¨(`weak reference`):é€šè¿‡weakå®šä¹‰å¼±å¼•ç”¨ - å¿…é¡»æ˜¯å¯é€‰ç±»å‹çš„varï¼Œå› ä¸ºå®ä¾‹é”€æ¯åï¼Œ***ARCä¼šè‡ªåŠ¨å°†å¼±å¼•ç”¨è®¾ç½®ä¸ºnil*** - ARCè‡ªåŠ¨ç»™å¼±å¼•ç”¨è®¾ç½®nilæ—¶ï¼Œä¸ä¼šè§¦å‘å±æ€§è§‚å¯Ÿå™¨ - 3.æ— ä¸»å¼•ç”¨(`unowned reference`):é€šè¿‡unownedå®šä¹‰æ— ä¸»å¼•ç”¨ - ***ä¸ä¼šäº§ç”Ÿå¼ºå¼•ç”¨ï¼Œå®ä¾‹é”€æ¯åä»ç„¶å­˜å‚¨ç€å®ä¾‹çš„å†…å­˜åœ°å€***(ç±»ä¼¼äºOCä¸­çš„unsafe_unretained) - è¯•å›¾åœ¨å®ä¾‹é”€æ¯åè®¿é—®æ— ä¸»å¼•ç”¨ï¼Œä¼šäº§ç”Ÿè¿è¡Œæ—¶é”™è¯¯(é‡æŒ‡é’ˆ)â€¢ Fatal error: Attempted to read an unowned reference but object 0x0 was already deallocated - ç”¨`inout`è¾“å…¥è¾“å‡ºå‚æ•°æ—¶ï¼Œæ³¨æ„å†…å­˜è®¿é—®å†²çªé—®é¢˜ - å†…å­˜è®¿é—®å†²çª(Conflicting Access to Memory) &gt;å†…å­˜è®¿é—®å†²çªä¼šåœ¨ä¸¤ä¸ªè®¿é—®æ»¡è¶³ä¸‹åˆ—æ¡ä»¶æ—¶å‘ç”Ÿ: è‡³å°‘ä¸€ä¸ªæ˜¯å†™å…¥æ“ä½œ å®ƒä»¬è®¿é—®çš„æ˜¯åŒä¸€å—å†…å­˜ å®ƒä»¬çš„è®¿é—®æ—¶é—´é‡å (æ¯”å¦‚åœ¨åŒä¸€ä¸ªå‡½æ•°å†…) // ä¸å­˜åœ¨å†…å­˜è®¿é—®å†²çªfunc plus(_ num: inout Int) -&gt; Int { num + 1 } var number = 1number = plus(&amp;number) // å­˜åœ¨å†…å­˜è®¿é—®å†²çª// Simultaneous accesses to 0x0, but modification requires exclusive access var step = 1func increment(_ num: inout Int) { num += step }increment(&amp;step) // è§£å†³å†…å­˜è®¿é—®å†²çªvar copyOfStep = stepincrement(&amp;copyOfStep)step = copyOfStep` ä»¥ä¸Šå‡æ ¹æ®CoderMJLeeè€å¸ˆçš„è§†é¢‘åŠèµ„æ–™æ•´ç†ï¼Œç¥å°ç å“¥æ•™è‚²è¶Šæ¥è¶Šå¥½ï¼Œç‰¹æ­¤æ„Ÿè°¢ï¼ï¼ï¼ å¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ï¼šfm939071955@163.com","categories":[{"name":"iOSå¼€å‘","slug":"iOSå¼€å‘","permalink":"http://blogzhou.top/categories/iOSå¼€å‘/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"http://blogzhou.top/tags/Swift/"}]},{"title":"OC/Swiftæ··ç¼–çš„ä¸€äº›å°çŸ¥è¯†","slug":"s10-OC-Swiftæ··ç¼–çš„ä¸€äº›å°çŸ¥è¯†","date":"2019-04-15T12:31:57.000Z","updated":"2020-12-16T06:20:33.058Z","comments":true,"path":"2019/04/15/s10-OC-Swiftæ··ç¼–çš„ä¸€äº›å°çŸ¥è¯†/","link":"","permalink":"http://blogzhou.top/2019/04/15/s10-OC-Swiftæ··ç¼–çš„ä¸€äº›å°çŸ¥è¯†/","excerpt":"Swiftè°ƒç”¨OCæ¡¥æ¥å¤´æ–‡ä»¶: 1.æ–°å»º1ä¸ªæ¡¥æ¥å¤´æ–‡ä»¶ï¼Œæ–‡ä»¶åæ ¼å¼é»˜è®¤ä¸º:{targetName}-Bridging-Header.h2.åœ¨{targetName}-Bridging-Header.h æ–‡ä»¶ä¸­#import OCéœ€è¦æš´éœ²ç»™Swiftçš„å†…å®¹(å¯é€šè¿‡ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆ) @_silgen_nameå…³é”®å­—ï¼š 1.å¦‚æœCè¯­è¨€æš´éœ²ç»™Swiftçš„å‡½æ•°åè·ŸSwiftä¸­çš„å…¶ä»–å‡½æ•°åå†²çªäº†2.å¯ä»¥åœ¨Swiftä¸­ä½¿ç”¨ @_silgen_name ä¿®æ”¹Cå‡½æ•°åï¼ˆå¯ä»¥ç”¨æ­¤æ–¹æ³•è°ƒç”¨ç³»ç»Ÿåº•å±‚å‡½æ•°ï¼‰12345678910// Cè¯­è¨€int sum(int a, int b) &#123;return a + b; &#125;// Swift@_silgen_name(&quot;sum&quot;) func swift_sum(_ v1: Int32, _ v2: Int32) -&gt; Int32print(swift_sum(10, 20)) // 30print(sum(10, 20)) // 30","text":"Swiftè°ƒç”¨OCæ¡¥æ¥å¤´æ–‡ä»¶: 1.æ–°å»º1ä¸ªæ¡¥æ¥å¤´æ–‡ä»¶ï¼Œæ–‡ä»¶åæ ¼å¼é»˜è®¤ä¸º:{targetName}-Bridging-Header.h2.åœ¨{targetName}-Bridging-Header.h æ–‡ä»¶ä¸­#import OCéœ€è¦æš´éœ²ç»™Swiftçš„å†…å®¹(å¯é€šè¿‡ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆ) @_silgen_nameå…³é”®å­—ï¼š 1.å¦‚æœCè¯­è¨€æš´éœ²ç»™Swiftçš„å‡½æ•°åè·ŸSwiftä¸­çš„å…¶ä»–å‡½æ•°åå†²çªäº†2.å¯ä»¥åœ¨Swiftä¸­ä½¿ç”¨ @_silgen_name ä¿®æ”¹Cå‡½æ•°åï¼ˆå¯ä»¥ç”¨æ­¤æ–¹æ³•è°ƒç”¨ç³»ç»Ÿåº•å±‚å‡½æ•°ï¼‰12345678910// Cè¯­è¨€int sum(int a, int b) &#123;return a + b; &#125;// Swift@_silgen_name(&quot;sum&quot;) func swift_sum(_ v1: Int32, _ v2: Int32) -&gt; Int32print(swift_sum(10, 20)) // 30print(sum(10, 20)) // 30 OCè°ƒç”¨Swift Xcodeå·²ç»é»˜è®¤ç”Ÿæˆä¸€ä¸ªç”¨äºOCè°ƒç”¨Swiftçš„å¤´æ–‡ä»¶ï¼Œæ–‡ä»¶åæ ¼å¼æ˜¯: {targetName}-Swift.h Swiftæš´éœ²ç»™OCçš„ç±»æœ€ç»ˆç»§æ‰¿è‡ªNSObject ä½¿ç”¨@objcä¿®é¥°éœ€è¦æš´éœ²ç»™OCçš„æˆå‘˜ ä½¿ç”¨@objcMembersä¿®é¥°ç±» ä»£è¡¨é»˜è®¤æ‰€æœ‰æˆå‘˜éƒ½ä¼šæš´éœ²ç»™OC(åŒ…æ‹¬æ‰©å±•ä¸­å®šä¹‰çš„æˆå‘˜) æœ€ç»ˆæ˜¯å¦æˆåŠŸæš´éœ²ï¼Œè¿˜éœ€è¦è€ƒè™‘æˆå‘˜è‡ªèº«çš„è®¿é—®çº§åˆ« @objc:123456789101112131415161718// å¯ä»¥é€šè¿‡@objc é‡å‘½åSwiftæš´éœ²ç»™OCçš„ç¬¦å·å(ç±»åã€å±æ€§åã€å‡½æ•°åç­‰)@objc(MJCar)@objcMembers class Car: NSObject &#123; var price: Double @objc(name) var band: String init(price: Double, band: String) &#123; self.price = price self.band = band &#125; @objc(drive) func run() &#123; print(price, band, &quot;run&quot;) &#125; static func run() &#123; print(&quot;Car run&quot;) &#125;&#125;extension Car &#123; @objc(exec:v2:) func test() &#123; print(price, band, &quot;test&quot;) &#125; &#125; é€‰æ‹©å™¨(Selector):1234567891011121314// Swiftä¸­ä¾ç„¶å¯ä»¥ä½¿ç”¨é€‰æ‹©å™¨ï¼Œä½¿ç”¨#selector(name)å®šä¹‰ä¸€ä¸ªé€‰æ‹©å™¨ // å¿…é¡»æ˜¯è¢«@objcMembersæˆ–@objcä¿®é¥°çš„æ–¹æ³•æ‰å¯ä»¥å®šä¹‰é€‰æ‹©å™¨@objcMembers class Person: NSObject &#123; func test1(v1: Int) &#123; print(&quot;test1&quot;) &#125; func test2(v1: Int, v2: Int) &#123; print(&quot;test2(v1:v2:)&quot;) &#125; func test2(_ v1: Double, _ v2: Double) &#123; print(&quot;test2(_:_:)&quot;) &#125; func run() &#123; perform(#selector(test1)) perform(#selector(test1(v1:))) perform(#selector(test2(v1:v2:))) perform(#selector(test2(_:_:))) perform(#selector(test2 as (Double, Double) -&gt; Void)) &#125; &#125; dynamic è¢« @objc dynamic ä¿®é¥°çš„å†…å®¹ä¼šå…·æœ‰åŠ¨æ€æ€§ï¼Œæ¯”å¦‚è°ƒç”¨æ–¹æ³•ä¼šèµ°runtimeé‚£ä¸€å¥—æµç¨‹1234567class Dog: NSObject &#123; @objc dynamic func test1() &#123;&#125; func test2() &#123;&#125;&#125;var d = Dog() d.test1()d.test2() Swiftè¯­è¨€ä¸­çš„ä¸€äº›ç¼–è¯‘å™¨ç‰¹æ€§ï¼šä»£ç æ³¨é‡Šç›¸å…³ï¼š // MARK: ç±»ä¼¼äºOCä¸­çš„ #pragma mark// MARK: - ç±»ä¼¼äºOCä¸­çš„ #pragma mark -// TODO: ç”¨äºæ ‡è®°æœªå®Œæˆçš„ä»»åŠ¡// FIXME: ç”¨äºæ ‡è®°å¾…ä¿®å¤çš„é—®é¢˜#warning(&quot;undo&quot;) æ¡ä»¶ç¼–è¯‘ï¼š1234567891011// æ“ä½œç³»ç»Ÿ:macOS\\iOS\\tvOS\\watchOS\\Linux\\Android\\Windows\\FreeBSD #if os(macOS) || os(iOS)// CPUæ¶æ„:i386\\x86_64\\arm\\arm64#elseif arch(x86_64) || arch(arm64)// swiftç‰ˆæœ¬#elseif swift(&lt;5) &amp;&amp; swift(&gt;=3)// æ¨¡æ‹Ÿå™¨#elseif targetEnvironment(simulator) // å¯ä»¥å¯¼å…¥æŸæ¨¡å—#elseif canImport(Foundation)#else#endif ç³»ç»Ÿç‰ˆæœ¬æ£€æµ‹:1234if #available(iOS 10, macOS 10.12, *) &#123; // å¯¹äºiOSå¹³å°ï¼Œåªåœ¨iOS10åŠä»¥ä¸Šç‰ˆæœ¬æ‰§è¡Œ // å¯¹äºmacOSå¹³å°ï¼Œåªåœ¨macOS 10.12åŠä»¥ä¸Šç‰ˆæœ¬æ‰§è¡Œ // æœ€åçš„*è¡¨ç¤ºåœ¨å…¶ä»–æ‰€æœ‰å¹³å°éƒ½æ‰§è¡Œ&#125; APIå¯ç”¨æ€§è¯´æ˜:12345678910@available(iOS 10, macOS 10.15, *) class Person &#123;&#125;struct Student &#123; @available(*, unavailable, renamed: &quot;study&quot;) func study_() &#123;&#125; func study() &#123;&#125; @available(iOS, deprecated: 11) @available(macOS, deprecated: 10.12) func run() &#123;&#125;&#125; æ›´å¤šç”¨æ³•å‚è€ƒè‡ªå®šä¹‰æ‰“å°:123456789func logger&lt;T&gt;(_ msg: T, file: NSString = #file, line: Int = #line, fn: String = #function) &#123; #if DEBUG let prefix = &quot;\\(file.lastPathComponent)_\\(line)_\\(fn):&quot; print(prefix, msg) #endif&#125;","categories":[{"name":"iOSå¼€å‘","slug":"iOSå¼€å‘","permalink":"http://blogzhou.top/categories/iOSå¼€å‘/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"http://blogzhou.top/tags/Swift/"}]},{"title":"å‡ ç§å¸¸è§çš„æ’åº","slug":"t08.å‡ ç§å¸¸è§çš„æ’åº","date":"2018-05-03T06:42:15.000Z","updated":"2020-12-15T04:48:38.581Z","comments":true,"path":"2018/05/03/t08.å‡ ç§å¸¸è§çš„æ’åº/","link":"","permalink":"http://blogzhou.top/2018/05/03/t08.å‡ ç§å¸¸è§çš„æ’åº/","excerpt":"1.å†’æ³¡æ’åº1234567891011121314/* å†’æ³¡æ’åº */ for (int end = cnt - 1; end &gt; 0 ; end --) &#123; for (int begin = 1; begin &lt;= end; begin ++) &#123; // ä¼˜åŒ–-å‡å°‘å·²æ’åºéƒ¨åˆ†çš„æ¯”è¾ƒ int startIndex = 1; if (array[begin - 1] &lt; array[begin]) &#123; int tmp = array[begin - 1]; array[begin - 1] = array[begin]; array[begin] = tmp; startIndex = begin; &#125; end = startIndex; &#125; &#125;","text":"1.å†’æ³¡æ’åº1234567891011121314/* å†’æ³¡æ’åº */ for (int end = cnt - 1; end &gt; 0 ; end --) &#123; for (int begin = 1; begin &lt;= end; begin ++) &#123; // ä¼˜åŒ–-å‡å°‘å·²æ’åºéƒ¨åˆ†çš„æ¯”è¾ƒ int startIndex = 1; if (array[begin - 1] &lt; array[begin]) &#123; int tmp = array[begin - 1]; array[begin - 1] = array[begin]; array[begin] = tmp; startIndex = begin; &#125; end = startIndex; &#125; &#125; 2.é€‰æ‹©æ’åº123456789101112// - æ¯”è¾ƒåï¼Œè®°å½•æœ€å¤§ç´¢å¼•ï¼Œæœ€åè¿›è¡Œäº¤æ¢ã€‚for (int end= cnt - 1; end &gt; 0; end--) &#123; int maxIndex = 0; for (int begin = 1; begin &lt;= end; begin++) &#123; if(array[maxIndex] &lt;= array[begin]) &#123; maxIndex = begin; &#125; &#125; int tmp = array[end]; array[end] = array[maxIndex]; array[maxIndex] = tmp; &#125; 3.å †æ’åº12345678910111213141516171819202122232425262728293031323334353637int array[] = &#123;9, 5, 2, 7&#125;;int heapSize = array.length;void sort() &#123; heapify(); while (heapSize &gt; 1) &#123; int tmp = array[heapSize - 1]; array[heapSize - 1] = array[0]; array[0] = temp; heapSize--; siftDown(0); &#125;&#125;// å»ºå †void heapify() &#123; for (int i = (heapSize &gt;&gt; 1) - 1; i &gt;= 0; i --) &#123; siftDown(i); &#125;&#125;// è‡ªä¸‹è€Œä¸Šçš„ä¸‹æ»¤void siftDown(int index) &#123; int current = array[index]; int half = heapSize &gt;&gt; 1; while (index &lt; half) &#123; int childIndex = (index &lt;&lt; 1) + 1; int child = array[childIndex]; int rightIndex = childIndex + 1; if (rightIndex &lt; heapSize &amp;&amp; array[rightIndex] &gt; child) &#123; child = array[childeIndex = rightIndex]; &#125; if (current &gt;= child) break; array[index] = child; index = childIndex; &#125; array[index] = current;&#125; 4.æ’ç©ºæ’åº ä»£ç è§£æè§æ³¨é‡Šã€‚ 1234567891011121314151617181920212223242526272829int a[5]=&#123;9, 8, 10, 2, 20&#125;;// keyä¸ºæ¯æ¬¡è¢«æ‹¿å‡ºçš„å€¼ï¼ˆä¹Ÿå°±æ˜¯åˆå§‹æä¾›â€œç©ºâ€çš„å€¼ï¼‰ï¼Œjä¸ºè¦æ¯”è¾ƒåˆ°çš„æœ€å¤§ç´¢å¼•int key,j;// ç›´æ¥æ’å…¥æ’åºfor (int i=1; i&lt;5; i++) &#123; // å–å‡ºå½“å‰è¦æ¯”è¾ƒé¡¹ key=a[i]; // å’Œç›´åˆ°ç´¢å¼•jä½ç½®çš„å…ƒç´ é€ä¸€æ¯”è¾ƒ for (j=i-1; j&gt;=0&amp;&amp;a[j]&gt;key; j--) &#123; // jä¸ºæ›´æ–°å‡ºæ¥çš„æ–°ç©º a[j+1]=a[j]; &#125; // å› ä¸ºå¾ªç¯ç»“æŸæ—¶è¿›è¡Œä¸€æ¬¡j--æ“ä½œï¼Œæ‰€ä»¥ä¸‹é¢è¦+1 // j+1ä¸ºæœ€åç•™ç»™keyçš„ç©º a[j+1]=key;&#125;// å¦ä¸€ç§å†™æ³•for (int begin=1; begin &lt; 5; begin++) &#123; // è®°å½•å½“å‰ç´¢å¼•ï¼ˆå½“å‰ç©ºä½ï¼‰ int cur = begin; int val = a[cur]; // å’Œç›´åˆ°ç´¢å¼•jä½ç½®çš„å…ƒç´ é€ä¸€æ¯”è¾ƒ while (cur &gt; 0 &amp;&amp; val &gt; a[cur - 1]) &#123; // jä¸ºæ›´æ–°å‡ºæ¥çš„æ–°ç©º a[cur] = a[cur - 1]; cur --; &#125; a[cur] = val;&#125; äºŒåˆ†æŸ¥æ‰¾ 12345678910111213141516171819// è¿”å›æ‰¾åˆ°çš„å…ƒç´ å¯¹åº”çš„ç´¢å¼•ï¼Œæ²¡æ‰¾åˆ°è¿”å›-1int binarySearch(int array[], int v) &#123; if (array == null || array.length == 0) &#123; retrun -1; &#125; int begin = 0; int end = array.length; while (begin &lt; end) &#123; int mid = (begin + end) &gt;&gt; 1; if (v &gt; array[mid]) &#123; begin = mid + 1; &#125; else if (v &lt; array[mid]) &#123; end = mid; &#125; else &#123; return mid; &#125; &#125; return -1;&#125; ç»“åˆäºŒåˆ†æŸ¥æ‰¾ä¼˜åŒ–æ’ç©ºæ’åº 12345678910111213141516171819202122232425262728void insertSort(int [] array) &#123; for (int begin = 1; begin &lt; array.length; begin++) &#123; insert(begin, search(begin)); &#125;&#125;// æ‰§è¡Œæ’å…¥çš„å…ƒç´ ä½ç§»æ“ä½œvoid insert(int source, int target) &#123; int v = array[source]; for (int i = source; i &gt; target; i --) &#123; array[source] = array[source - 1]; &#125; array[target] = v;&#125;// ç”¨äºŒåˆ†æ³•æŸ¥æ‰¾å½“å‰å–å‡ºçš„å…ƒç´ åœ¨å·²æ’å¥½åºéƒ¨åˆ†å¯¹åº”çš„æ’å…¥ä½ç½®int search(int index) &#123; int v = array[index]; int begin = 0; int end = index; while (begin &lt; end) &#123; int mid = (begin + end) &gt;&gt; 1; if (v &gt;= array[mid]) &#123; begin = mid + 1; &#125; else &#123; end = mid; &#125; &#125; return begin;&#125; 5.å½’å¹¶æ’åº123456789101112131415161718192021222324252627282930313233int[] array = &#123;9, 5, 2, 7&#125;;void mergeSort() &#123; sortRecursive(0, array.length);&#125;void sortRecursive(int begin, int end) &#123; // æ•°ç»„åªå‰©ä¸€ä¸ªå…ƒç´ ï¼Œä¸èƒ½å†åˆ†äº† if (end - begin &lt; 2) return; int mid = (begin + end) &gt;&gt; 1; sortRecursive(begin, mid); sortRecursive(mid, end); merge(begin, mid, end);&#125;// ç”¨æ¥å­˜æ”¾å·¦è¾¹æ’å¥½åºéƒ¨åˆ†çš„å¤‡ç”¨æ•°ç»„int leftArray[] = new int[array.length &gt;&gt; 1];void merge(int begin, int mid, int end) &#123; int lp = 0, le = mid - begin; int rp = mid, re = end; int ap = begin; for (int i = 0; i &lt; le; i ++) &#123; leftArray[i] = array[begin + i]; &#125; // åªè¦å·¦è¾¹ç»“æŸäº†ï¼Œæ•´ä¸ªæ’åºå°±ç»“æŸäº† while (lp &lt; le) &#123; if (rp &lt; re &amp;&amp; array[rp] &lt; leftArray[lp]) &#123; array[ap++] = array[rp++]; &#125; else &#123; array[ap] = leftArray[lp]; ap ++; lp ++; &#125; &#125;&#125; 6.å¿«é€Ÿæ’åº1234567891011121314151617181920212223242526272829303132333435363738394041424344454647int[] array = &#123;9, 5, 2, 7&#125;;void pivotSort() &#123; pivotRecursive(0, array.length);&#125;void pivotRecursive(int begin, int end) &#123; if (end - begin &lt; 2) return; // æ‰¾åˆ°è½´ç‚¹çš„ä½ç½® int pivot = pivotIndex(begin, end); // é€’å½’è½´ç‚¹å·¦ pivotRecursive(begin, pivot); // é€’å½’è½´ç‚¹å³ pivotRecursive(pivot + 1, end);&#125;int pivotIndex(int begin, int end) &#123; // ä¼˜åŒ–ï¼šä¸ºäº†è½´ç‚¹å·¦å³æ•°æ®æ›´åŠ å‡è¡¡ï¼Œéšæœºé€‰æ‹©è½´ç‚¹ int random = random(end - begin); int tmp = array[begin]; array[begin] = array[random]; array[random] = tmp; int v = array[begin]; // å› ä¸ºendæ˜¯ä»array.lengthå¼€å§‹çš„ï¼Œæ‰€ä»¥è¦-- end--; // åµŒå¥—whileå¾ªç¯å®ç°å·¦å³äº¤æ›¿æ‰§è¡Œ while (begin &lt; end) &#123; while (begin &lt; end) &#123; if (array[end] &gt; v) &#123; end--; &#125; else &#123; array[begin++] = array[end]; break; &#125; &#125; while (begin &lt; end) &#123; if (array[begin] &lt; v) &#123; begin++; &#125; else &#123; array[end--] = array[begin]; break; &#125; &#125; &#125; array[begin] = v; return begin&#125; 7.å¸Œå°”æ’åº å¯çœ‹ä½œæ˜¯å¯¹æ’ç©ºæ’åºçš„ä¼˜åŒ–1234567891011121314151617181920212223242526int[] array = &#123;9, 5, 2, 7&#125;;void shellSort() &#123; int[] steps = step(array.length); for (int i = 0; i &lt; steps.length; i ++) &#123; int step = steps[i]; for (int col = 0; col &lt; step; col ++) &#123; for (int begin = col + step; begin &lt; array.length; begin += step) &#123; int cur = begin; int v = array[cur]; while (cur &gt; col &amp;&amp; v &gt; array[cur - step]) &#123; array[cur] = array[cur - step]; cur -=step; &#125; arrau[cur] = v; &#125; &#125; &#125;&#125;// åˆ›å»ºæ­¥é•¿æ•°ç»„int[] step(int step) &#123; int[] steps = new int[]; while ((step &gt;&gt;= 1) &gt; 0) &#123; steps.add(step) &#125; return step;&#125; 8.è®¡æ•°æ’åº ä¸­å¿ƒæ€æƒ³ï¼šç”¨ç©ºé—´æ¢æ—¶é—´ åªé€‚ç”¨äºä¸€å®šèŒƒå›´å†…çš„æ•´æ•°æ’åº12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152int[] array = &#123;9, 5, 2, 7&#125;;// ä»…æ”¯æŒæ­£æ•´æ•°ç‰ˆæœ¬// æ‰¾å‡ºæœ€å¤§å€¼int max = array[0];for (int i = 1; i &lt; array.length; i ++) &#123; if (array[i] &gt; max) &#123; max = array[i]; &#125;&#125;// åˆ›å»ºè®¡æ•°æ•°ç»„int[] counts = new int[max + 1];for (int i = 0; i &lt; array.length; i ++) &#123; conuts[array[i]] += 1;&#125;// è¾“å‡ºæ’å¥½åºçš„æ•°ç»„int index = 0;for (int i = 0; i &lt; counts.length; i ++) &#123; while ((counts[i]--) &gt; 0) &#123; array[index++] = i; &#125;&#125;// ä¼˜åŒ–ç‰ˆæœ¬ï¼Œæ”¯æŒè´Ÿæ•´æ•°(åŒ…å«æ•´æ•°å±æ€§æ’åºçš„è‡ªå®šä¹‰å¯¹è±¡ä¹Ÿå¯ä»¥)// æ‰¾å‡ºæœ€å¤§å€¼ï¼Œæœ€å°å€¼int max = array[0];int min = array[0];for (int i = 1; i &lt; array.length; i ++) &#123; if (array[i] &gt; max) &#123; max = array[i]; &#125; if (array[i] &lt; min) &#123; min = array[i]; &#125;&#125;// è®¡æ•°æ•°ç»„int[] counts = new int[max - min + 1];for (int i = 0; i &lt; array.length; i ++) &#123; conuts[array[i] - min] += 1;&#125;// ç´¯åŠ æ¬¡æ•°for ï¼ˆint i = 1; i &lt; counts.length; i++) &#123; counts[i] += counts[i - 1];&#125;// ä»åå¾€å‰éå†å…ƒç´ ï¼Œå°†å®ƒæ”¾åˆ°æœ‰åºæ•°ç»„ä¸­çš„åˆé€‚ä½ç½®int newArray = new int[array.length];for (int i = array.length - 1; i &gt;=0; i --) &#123; newArray[--counts[array[i] - min]] = array[i];&#125;// å°†æœ‰åºæ•°ç»„èµ‹å€¼åˆ°arrayfor (int i = 0; i &lt; array.length; i ++) &#123; array[i] = newArray[i];&#125; 9.åŸºæ•°æ’åº æ•°æ®ä»ä½ä½åˆ°é«˜ä½æŒ‰ä½æ’åº æ’åºç”¨è®¡æ•°æ’åº1234567891011121314151617181920212223242526272829303132333435int[] array = &#123;9, 5, 2, 7&#125;;// ä»…æ”¯æŒæ­£æ•´æ•°ç‰ˆæœ¬// æ‰¾å‡ºæœ€å¤§å€¼int max = array[0];for (int i = 1; i &lt; array.length; i ++) &#123; if (array[i] &gt; max) &#123; max = array[i]; &#125;&#125;// åˆ›å»ºè®¡æ•°æ•°ç»„int[] counts = new int[max + 1];for (int devider = 1; devider &lt; max; devider * 10) &#123; countingSort(devider);&#125;void countingSort(int devide) &#123; // è®¡æ•°æ•°ç»„ int[] counts = new int[10]; for (int i = 0; i &lt; array.length; i ++) &#123; conuts[array[i] / devide % 10] += 1; &#125; // ç´¯åŠ æ¬¡æ•° for ï¼ˆint i = 1; i &lt; counts.length; i++) &#123; counts[i] += counts[i - 1]; &#125; // ä»åå¾€å‰éå†å…ƒç´ ï¼Œå°†å®ƒæ”¾åˆ°æœ‰åºæ•°ç»„ä¸­çš„åˆé€‚ä½ç½® int newArray = new int[array.length]; for (int i = array.length - 1; i &gt;=0; i --) &#123; newArray[--counts[array[i] / devide % 10]] = array[i]; &#125; // å°†æœ‰åºæ•°ç»„èµ‹å€¼åˆ°array for (int i = 0; i &lt; array.length; i ++) &#123; array[i] = newArray[i]; &#125;&#125; 10.æ¡¶æ’åº è‡ªå®šä¹‰è§„åˆ™ æŒ‰è§„åˆ™å°½é‡å‡åŒ€åˆ†å¸ƒæ•°æ®åˆ°æ¯ä¸ªæ¡¶ å¯¹æ¡¶å†…æ•°æ®æ’åº å°†æ¡¶å†…æ•°æ®ä¸²èµ·æ¥ ä»¥ä¸Šå‡ä¸ºä¼ªä»£ç ï¼Œä»…æä¾›æ€è·¯ æ•´ä½“æµ‹è¯•ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109#import &lt;Foundation/Foundation.h&gt;void initArray(int array[],int cnt);void selectSortForArray(int array[],int cnt);void showArray(int array[],int cnt);void initArray(int array[],int cnt)&#123; for(int i= 0;i&lt;cnt;i++) array[i] = arc4random() % 100;&#125;void selectSortForArray(int array[],int cnt)&#123; /*for (int i = 0; i&lt;cnt-1; i++)&#123; for (int j = i+1; j&lt;cnt; j++) &#123;if (array[i] &lt; array[j]) &#123; int tmp = array[i]; array[i] = array[j]; array[j] = tmp; &#125;&#125;&#125;*/ //****************è¿™æ ·æ¯æ¬¡æ¯”è¾ƒåéƒ½äº¤æ¢å…ƒç´ ä½ç½®********** for (int i= 0;i&lt;cnt-1;i++)&#123; for (int j=i + 1;j&lt;cnt;j++)&#123; if(array[i]&lt;array[j])&#123; int tmp=array[i]; array[i]=array[j]; array[j]=tmp; &#125; &#125;// &#125;//*****************è¿™æ ·æ¯æ¬¡æ¯”è¾ƒåªè®°ä½ç´¢å¼•ï¼Œå†…å¾ªç¯éå†ä¸€æ¬¡å®Œæˆåå†äº¤æ¢ï¼ˆå‡å°‘äº¤æ¢æ¬¡æ•°ï¼‰ï¼Œ********* for (int i = 0; i &lt; cnt - 1; i++) &#123; int tmp = 0; for (int j = i + 1; j &lt; cnt; j++) &#123; if (array[i] &lt; array[j]) &#123; tmp = j; &#125; int c = array[i]; array[i] = array[tmp]; array[tmp] = c; &#125; &#125; /* å†’æ³¡æ’åº */ for (int i = 0; i &lt; cnt - 1; i ++) &#123; for (int j = 0; j &lt; cnt - i - 1; j ++) &#123; if (array[j] &lt; array[j + 1]) &#123; int tmp = array[j]; array[j] = array[j + 1]; array[j + 1] = tmp; &#125; &#125; &#125;&#125;void showArray(int array[],int cnt)&#123; for (int i = 0; i&lt;cnt; i++) &#123; printf(&quot;%d &quot;,array[i]); &#125; printf(&quot;\\n&quot;);&#125;int main(int argc, const char * argv[])&#123; @autoreleasepool &#123; // insert code here...// NSLog(@&quot;Hello, World!&quot;);// int array[10] = &#123;0&#125;; initArray(array, 10); showArray(array,10); selectSortForArray(array, 10); showArray(array,10); // C-å®ç° æ’ç©ºæ’åº int a[5]=&#123;9,8,10,2,20&#125;; int key,j;// keyä¸ºæ¯æ¬¡è¢«æ‹¿å‡ºçš„å€¼ï¼ˆä¹Ÿå°±æ˜¯åˆå§‹æä¾›â€œç©ºâ€çš„å€¼ï¼‰ï¼Œjä¸ºè¦æ¯”è¾ƒåˆ°çš„æœ€å¤§ç´¢å¼• for (int i=1; i&lt;5; i++) &#123;// ç›´æ¥æ’å…¥æ’åº key=a[i];// å–å‡ºå½“å‰è¦æ¯”è¾ƒé¡¹ for (j=i-1; j&gt;=0&amp;&amp;a[j]&gt;key; j--) &#123;// å’Œç›´åˆ°ç´¢å¼•jä½ç½®çš„å…ƒç´ é€ä¸€æ¯”è¾ƒ a[j+1]=a[j];// jä¸ºæ›´æ–°å‡ºæ¥çš„æ–°ç©ºï¼ˆä½†æ˜¯åªè¦è¿›äº†å¾ªç¯ï¼Œæ­¤æ¬¡å¾ªç¯ç»“æŸå°±ä¼šè¿›è¡Œä¸€æ¬¡j--æ“ä½œï¼Œæ‰€ä»¥ä¸‹é¢è¦+1ï¼‰ &#125; a[j+1]=key;// j+1ä¸ºæœ€åç•™ç»™keyçš„ç©º &#125; for (int i=0; i&lt;5; i++) &#123;// NSLog(@&quot;%i&quot;,a[i]); &#125; // OCå®ç°// NSMutableArray *array=[NSMutableArray arrayWithObjects:@9,@8,@10,@2,@20, nil];// id key;// NSInteger j;// for (NSInteger i=1; i&lt;array.count; i++) &#123;// key=[array objectAtIndex:i];//å–åˆ°æ¯ä¸€ä¸ªå¾…æ’å…¥çš„æ•°æ®,ä»a[1]å¼€å§‹æŸ¥æ‰¾// for (j=i-1; j&gt;=0&amp;&amp;array[j]&gt;key; j--) &#123;// // å¦‚æœä¹‹å‰çš„æ•°æ¯”keyå¤§,å°±å°†è¿™ä¸ªæ•°å‘åç§»åŠ¨ä¸€ä¸ªä½ç½®,ç•™å‡ºç©ºæ¥è®©keyæ’å…¥å°±åƒæ•´ç‰Œä¸€æ ·//// [array exchangeObjectAtIndex:j+1 withObjectAtIndex:j];//äº¤æ¢// &#125;// [array replaceObjectAtIndex:j+1 withObject:key];// &#125;// for (key in array) &#123;// NSLog(@&quot;%@&quot;,key);// &#125; printf(&quot;\\n&quot;); &#125; return 0;&#125;","categories":[{"name":"iOSå¼€å‘","slug":"iOSå¼€å‘","permalink":"http://blogzhou.top/categories/iOSå¼€å‘/"}],"tags":[{"name":"code","slug":"code","permalink":"http://blogzhou.top/tags/code/"}]},{"title":"Nodeç¯å¢ƒé…ç½®","slug":"t05.Nodeç¯å¢ƒé…ç½®","date":"2018-03-12T01:43:45.000Z","updated":"2020-07-18T03:20:22.694Z","comments":true,"path":"2018/03/12/t05.Nodeç¯å¢ƒé…ç½®/","link":"","permalink":"http://blogzhou.top/2018/03/12/t05.Nodeç¯å¢ƒé…ç½®/","excerpt":"æ–¹å¼ä¸€ï¼šå®‰è£…åŒ…çš„æ–¹å¼å®‰è£… å®‰è£…åŒ…ä¸‹è½½é“¾æ¥ï¼š Mac OSXï¼š darwin Windowsï¼š x64 x86 å®‰è£…æ“ä½œï¼š ä¸€è·¯Next æ›´æ–°ç‰ˆæœ¬ æ“ä½œæ–¹å¼ï¼š é‡æ–°ä¸‹è½½æœ€æ–°çš„å®‰è£…åŒ…ï¼› è¦†ç›–å®‰è£…å³å¯ï¼› é—®é¢˜ï¼š ä»¥å‰ç‰ˆæœ¬å®‰è£…çš„å¾ˆå¤šå…¨å±€çš„å·¥å…·åŒ…éœ€è¦é‡æ–°å®‰è£… æ— æ³•å›æ»šåˆ°ä¹‹å‰çš„ç‰ˆæœ¬ æ— æ³•åœ¨å¤šä¸ªç‰ˆæœ¬ä¹‹é—´åˆ‡æ¢ï¼ˆå¾ˆå¤šæ—¶å€™æˆ‘ä»¬è¦ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬ï¼‰","text":"æ–¹å¼ä¸€ï¼šå®‰è£…åŒ…çš„æ–¹å¼å®‰è£… å®‰è£…åŒ…ä¸‹è½½é“¾æ¥ï¼š Mac OSXï¼š darwin Windowsï¼š x64 x86 å®‰è£…æ“ä½œï¼š ä¸€è·¯Next æ›´æ–°ç‰ˆæœ¬ æ“ä½œæ–¹å¼ï¼š é‡æ–°ä¸‹è½½æœ€æ–°çš„å®‰è£…åŒ…ï¼› è¦†ç›–å®‰è£…å³å¯ï¼› é—®é¢˜ï¼š ä»¥å‰ç‰ˆæœ¬å®‰è£…çš„å¾ˆå¤šå…¨å±€çš„å·¥å…·åŒ…éœ€è¦é‡æ–°å®‰è£… æ— æ³•å›æ»šåˆ°ä¹‹å‰çš„ç‰ˆæœ¬ æ— æ³•åœ¨å¤šä¸ªç‰ˆæœ¬ä¹‹é—´åˆ‡æ¢ï¼ˆå¾ˆå¤šæ—¶å€™æˆ‘ä»¬è¦ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬ï¼‰ æ–¹å¼äºŒï¼šNVMå·¥å…·çš„ä½¿ç”¨ Node Version Managerï¼ˆNodeç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼‰ ç”±äºä»¥åçš„å¼€å‘å·¥ä½œå¯èƒ½ä¼šåœ¨å¤šä¸ªNodeç‰ˆæœ¬ä¸­æµ‹è¯•ï¼Œè€Œä¸”Nodeçš„ç‰ˆæœ¬ä¹Ÿæ¯”è¾ƒå¤šï¼Œæ‰€ä»¥éœ€è¦è¿™ä¹ˆæ¬¾å·¥å…·æ¥ç®¡ç† å®‰è£…æ“ä½œæ­¥éª¤ä¸€ ã€Mac OSï¼š æ¯”è¾ƒç®€å•ï¼Œè‡ªè¡Œå‚è€ƒè¿™ä¸ªé“¾æ¥åœ°å€ https://github.com/creationix/nvmäºŒã€Windowsï¼š ä¸‹è½½ï¼šnvm-windows è§£å‹åˆ°ä¸€ä¸ªå…¨è‹±æ–‡è·¯å¾„ ç¼–è¾‘è§£å‹ç›®å½•ä¸‹çš„settings.txtæ–‡ä»¶ï¼ˆä¸å­˜åœ¨åˆ™æ–°å»ºï¼‰æ–‡ä»¶å†…å®¹å¦‚å›¾ï¼š root é…ç½®ä¸ºå½“å‰ nvm.exe æ‰€åœ¨ç›®å½• path é…ç½®ä¸º node å¿«æ·æ–¹å¼æ‰€åœ¨çš„ç›®å½• arch é…ç½®ä¸ºå½“å‰æ“ä½œç³»ç»Ÿçš„ä½æ•°ï¼ˆ32/64ï¼‰ proxy ä¸ç”¨é…ç½® é…ç½®ç¯å¢ƒå˜é‡ å¯ä»¥é€šè¿‡ window+r : sysdm.cpl TMPä¸‹æ–°å»º NVM_HOME = å½“å‰ nvm.exe æ‰€åœ¨ç›®å½• NVM_SYMLINK = node å¿«æ·æ–¹å¼æ‰€åœ¨çš„ç›®å½• PATH += %NVM_HOME%;%NVM_SYMLINK%; æ‰“å¼€CMDé€šè¿‡set [name]å‘½ä»¤æŸ¥çœ‹ç¯å¢ƒå˜é‡æ˜¯å¦é…ç½®æˆåŠŸ PowerShellä¸­æ˜¯é€šè¿‡dir env:[name]å‘½ä»¤ NVMä½¿ç”¨è¯´æ˜ï¼š https://github.com/coreybutler/nvm-windows/","categories":[{"name":"javascript","slug":"javascript","permalink":"http://blogzhou.top/categories/javascript/"}],"tags":[{"name":"tool","slug":"tool","permalink":"http://blogzhou.top/tags/tool/"}]},{"title":"Favorite Words","slug":"p04.Favorite Words","date":"2018-03-08T03:25:54.000Z","updated":"2020-07-18T03:20:22.696Z","comments":true,"path":"2018/03/08/p04.Favorite Words/","link":"","permalink":"http://blogzhou.top/2018/03/08/p04.Favorite Words/","excerpt":"é‚£äº›åŠ¨å¬çš„æƒ³æ³•å¦‚æœä¸èƒ½è¶å¹´è½»æ˜“æ„Ÿçš„æ—¶å€™å»å®ç°ï¼Œæ¶ˆé€çš„é€Ÿåº¦æ¯”äº‘è¿˜å¿«ã€‚ å³ä½¿æœ‰äººå‘Šè¯‰æˆ‘ï¼Œå±±çš„é‚£è¾¹è¿˜æ˜¯å±±ï¼Œæˆ‘ä¾ç„¶æƒ³ä¸€è·¯å°è·‘ç¿»å±±è¶Šå²­ï¼Œäº²è‡ªæ„Ÿæ…¨ï¼šâ€œæˆ‘é ï¼ä»–è¯´çš„æ˜¯çœŸçš„è¯¶ï¼â€ ä¸å¤©åœ°ç­‰é‡é½è§‚çš„çœ¼ç•Œ æ°¸è¿œä¸è¦æŒ‡æœ›æœ‰äººä¼šæ˜ç™½ä½ åœ¨è¯´ä»€ä¹ˆï¼Œåˆ«ç›¸ä¿¡ä»€ä¹ˆåˆ‡è‚¤ä¹‹ç—›ï¼Œåˆ«ç›¸ä¿¡ä»€ä¹ˆæ„ŸåŒèº«å—ï¼Œä½ å°±æ˜¯ä½ ï¼Œç‹¬ä¸€æ— äºŒçš„ä½ ï¼Œä½ çš„é‚£äº›æƒ…ç»ªã€æƒ³æ³•ã€å¿µå¤´ï¼Œåˆ«äººæ— æ³•æ„ŸçŸ¥ï¼Œäº¦æ— æ³•ç†è§£ã€‚ â€”â€” ç‹¬æœ¨èˆŸ","text":"é‚£äº›åŠ¨å¬çš„æƒ³æ³•å¦‚æœä¸èƒ½è¶å¹´è½»æ˜“æ„Ÿçš„æ—¶å€™å»å®ç°ï¼Œæ¶ˆé€çš„é€Ÿåº¦æ¯”äº‘è¿˜å¿«ã€‚ å³ä½¿æœ‰äººå‘Šè¯‰æˆ‘ï¼Œå±±çš„é‚£è¾¹è¿˜æ˜¯å±±ï¼Œæˆ‘ä¾ç„¶æƒ³ä¸€è·¯å°è·‘ç¿»å±±è¶Šå²­ï¼Œäº²è‡ªæ„Ÿæ…¨ï¼šâ€œæˆ‘é ï¼ä»–è¯´çš„æ˜¯çœŸçš„è¯¶ï¼â€ ä¸å¤©åœ°ç­‰é‡é½è§‚çš„çœ¼ç•Œ æ°¸è¿œä¸è¦æŒ‡æœ›æœ‰äººä¼šæ˜ç™½ä½ åœ¨è¯´ä»€ä¹ˆï¼Œåˆ«ç›¸ä¿¡ä»€ä¹ˆåˆ‡è‚¤ä¹‹ç—›ï¼Œåˆ«ç›¸ä¿¡ä»€ä¹ˆæ„ŸåŒèº«å—ï¼Œä½ å°±æ˜¯ä½ ï¼Œç‹¬ä¸€æ— äºŒçš„ä½ ï¼Œä½ çš„é‚£äº›æƒ…ç»ªã€æƒ³æ³•ã€å¿µå¤´ï¼Œåˆ«äººæ— æ³•æ„ŸçŸ¥ï¼Œäº¦æ— æ³•ç†è§£ã€‚ â€”â€” ç‹¬æœ¨èˆŸ ä½›æ›°ï¼Œäººç”Ÿæœ‰å…«è‹¦ï¼šç”Ÿï¼Œè€ï¼Œç—…ï¼Œæ­»ï¼Œçˆ±åˆ«ç¦»ï¼Œæ€¨é•¿ä¹…ï¼Œæ±‚ä¸å¾—ï¼Œæ”¾ä¸ä¸‹ã€‚ ä½›æ›°ï¼šå‘½ç”±å·±é€ ï¼Œç›¸ç”±å¿ƒç”Ÿï¼Œä¸–é—´ä¸‡ç‰©çš†æ˜¯åŒ–ç›¸ï¼Œå¿ƒä¸åŠ¨ï¼Œä¸‡ç‰©çš†ä¸åŠ¨ï¼Œå¿ƒä¸å˜ï¼Œä¸‡ç‰©çš†ä¸å˜ã€‚ ä½›æ›°ï¼šåäº¦ç¦…ï¼Œè¡Œäº¦ç¦…ï¼Œä¸€èŠ±ä¸€ä¸–ç•Œï¼Œä¸€å¶ä¸€å¦‚æ¥ï¼Œæ˜¥æ¥èŠ±è‡ªé’ï¼Œç§‹è‡³å¶é£˜é›¶ï¼Œæ— ç©·èˆ¬è‹¥å¿ƒè‡ªåœ¨ï¼Œè¯­é»˜åŠ¨é™ä½“è‡ªç„¶ã€‚ ä½›è¯´ï¼šä¸‡æ³•çš†ç”Ÿï¼Œçš†ç³»ç¼˜ä»½ï¼Œå¶ç„¶çš„ç›¸é‡ï¼Œæš®ç„¶çš„å›é¦–ï¼Œæ³¨å®šå½¼æ­¤çš„ä¸€ç”Ÿï¼Œåªä¸ºçœ¼å…‰äº¤æ±‡çš„åˆ¹é‚£ã€‚ ç¼˜èµ·å³ç­ï¼Œç¼˜ç”Ÿå·²ç©ºã€‚ è¿™ä¸æ˜¯ä½ æ¢¦å¯ä»¥æ±‚çš„é•¿å¤§å—ï¼Œä½ æ€ä¹ˆæ„çœ‰ä¸å±•ï¼Ÿâ€“ åˆ«è¾œè´Ÿ ä½ æ‹çˆ±äº†ï¼Œåªæ˜¯ä½ çˆ±çš„äººï¼Œæœ‰æ—¶å¹¶ä¸çœŸçš„å­˜åœ¨ã€‚ä»–å¯èƒ½åªæ˜¯ä¸€å µæ— è¾œçš„ç™½å¢™ï¼Œè¢«ä½ ç‹‚çƒ­çš„ï¼ŒæŠŠä½ å¿ƒé‡Œæœ€å‘å¾€çš„çˆ±æƒ…ç”µå½±ï¼Œå…¨éƒ¨åœ¨ä»–èº«ä¸ŠæŠ•å½±ä¸€éã€‚ å› ä¸ºæˆ‘åˆšæ‰çœ‹åˆ°ä½ ï¼Œè§‰å¾—ä½ æŒºå¯çˆ±çš„ï¼Œä½†æˆ‘ä¸çŸ¥é“è¯¥ä¸è¯¥è·Ÿä½ æ­è®ªï¼Œæ‰€ä»¥æˆ‘é—®è‡ªå·±ï¼Œæˆ‘è¯¥ä¸è¯¥è®¤è¯†å¥¹å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼Œæˆ‘æ²¡æœ‰ç†ç”±ä¸å»è®¤è¯†å¥¹ã€‚ æœ‹å‹ï¼Œè®°ä½ä¸€æ¡ç®€å•çš„æƒ¯æ€§å®šå¾‹:é™æ­¢çš„å€¾å‘äºé™æ­¢ï¼Œè¿åŠ¨çš„å€¾å‘äºè¿åŠ¨ã€‚ä¸çŸ¥é“ä¸€ä»¶äº‹æƒ…æ€ä¹ˆå¼€å§‹æ‰åˆé€‚ï¼Ÿå…ˆå»åš10åˆ†é’Ÿã€‚ä¸çŸ¥é“æ€ä¹ˆå’Œå¥³å­©æ­è®ªï¼Ÿç«‹é©¬è¿‡å»è¯´ä¸€å£°:â€œä½ å¥½ï¼â€¦â€¦â€åé¢çš„ä½ è‡ªç„¶ä¼šæ¥ç€è¯´ã€‚åŠ¨èµ·æ¥ï¼Œè¿åŠ¨çš„å€¾å‘äºè¿åŠ¨ã€‚ çˆ¶æ¯æ‰€æƒ³æ°¸è¿œæ˜¯é¿å…å­å¥³å—åˆ°ä¼¤å®³ï¼Œè€Œå­å¥³æ‰€æƒ³æ°¸è¿œæ˜¯å¦‚ä½•æ‰èƒ½ä¸æ‰æ­¤ç”Ÿã€‚è¿™åœºåšå¼ˆæ³¨å®šæœ‰ä¸€æ–¹è®©æ­¥ï¼Œä¸€æ–¹å–œç¬‘é¢œå¼€ã€‚ æœªæ¥ä¸€ç™¾å¹´ä¹ƒè‡³ä¸€åƒå¹´ä¸€ä¸‡å¹´ï¼Œå¾ˆéš¾çœ‹åˆ°å¼ºäººå·¥æ™ºèƒ½çš„å‡ºç°ã€‚å› ä¸ºäººç±»å¯¹æ™ºèƒ½æœ¬è´¨çš„äº†è§£å…¶å®å¤ªå°‘äº†ã€‚æ— çŸ¥è€…æ— ç•ï¼Œæ­£å› ä¸ºæˆ‘ä»¬çš„è‚¤æµ…ï¼Œæ‰€ä»¥æ‰ç›²ç›®çš„ä¹è§‚ï¼Œâ€œäººå·¥æ™ºèƒ½çš„å¥‡ç‚¹â€å‡ºç°åœ¨2050å¹´æ ¹æœ¬å°±æ˜¯æ— ç¨½ä¹‹è°ˆã€‚äººç±»ç›®å‰é æœ‰é™çš„ä¸€ç‚¹æ•°å­¦ç®—æ³•å¯¹æ™ºèƒ½æ­»æ¿çš„æ¨¡æ‹Ÿï¼Œæ¯”å¤§è‡ªç„¶çš„ç²¾å·§çš„è¿›åŒ–åˆ›é€ ï¼Œç®€ç›´æ˜¯å¤©å£¤ä¹‹åˆ«ã€‚å¥—ç”¨åˆ«äººå¯¹â€œæ·±åº¦å­¦ä¹ â€ç®—æ³•çš„è¯„ä»·ï¼šâ€œæ¢¯å­å¾ˆé•¿ï¼Œä½†è¿˜è¿œè¿œå¤Ÿä¸åˆ°æœˆäº®â€ã€‚â€” Daniel å¿«ä¹åˆ†äº«é”™äº†äººï¼Œæˆä¸ºäº†ç‚«è€€ï¼Œéš¾è¿‡åˆ†äº«é”™äº†äººï¼Œæˆäº†çŸ«æƒ…ã€‚ ä»¥å‰è§‰å¾—ï¼Œå¹´å°‘æ—¶çš„å–œæ¬¢ä¸ç®—ä»€ä¹ˆï¼Œé•¿å¤§ä»¥åï¼Œè¿˜æœ‰è®¸å¤šå£®é˜”çš„æ¸©æŸ”åœ¨å‰æ–¹ã€‚ä½†å…¶å®å¹¶ä¸æ˜¯è¿™æ ·ï¼Œå¹´å°‘æ—¶çš„å–œæ¬¢å…¶å®æµ“åº¦æœ€é«˜ï¼Œé«˜åˆ°ä½ ä»¥ä¸ºä½ ä¸åœ¨ä¹ä¸å–œæ¬¢äº†ï¼Œå…¶å®å…³äºå–œæ¬¢çš„ç»†ææœ«èŠ‚éƒ½æ·±æ·±åœ°æ‰æ ¹åœ¨å¿ƒé‡Œï¼Œä»¥è‡³äºä»¥åé‡åˆ°çš„æ‰€æœ‰äººï¼Œéƒ½æ¯”ä¸ä¸Šå½“åˆçš„é‚£ä¸ªç”·å­©æˆ–å¥³å­©æ‰€å¸¦æ¥çš„å¿ƒåŠ¨ã€‚ æ‰€ä»¥å•Šï¼Œå¦‚æœå†é‡è§ä½ ï¼Œæˆ‘ä¸æƒ³ç»™è‡ªå·±ç•™ä¸‹é—æ†¾ã€‚ äººä»¬æ€»æ˜¯å¯¹å–œæ¬¢çš„äººä¸è¯´æˆ‘å–œæ¬¢ä½  å´è¯´æˆ‘æƒ³ä½ å¯¹æƒ³è§çš„äººä¸è¯´æˆ‘æƒ³ä½  å´è¯´è¦ä¸è¦ä¸€èµ·åƒä¸ªé¥­ æˆ‘æ˜¯ä¸ªä¿—æ°”è‡³é¡¶çš„äººï¼Œè§å±±æ˜¯å±±ï¼Œè§æµ·æ˜¯æµ·ï¼Œè§èŠ±ä¾¿æ˜¯èŠ±ã€‚å”¯ç‹¬è§äº†ä½ ï¼Œäº‘æµ·å¼€å§‹ç¿»æ¶Œï¼Œæ±Ÿæ½®å¼€å§‹æ¾æ¹ƒï¼Œæ˜†è™«çš„å°è§¦é¡»æŒ ç€å…¨ä¸–ç•Œçš„ç—’ã€‚ä½ æ— éœ€å¼€å£ï¼Œæˆ‘å’Œå¤©åœ°ä¸‡ç‰©ä¾¿é€šé€šå¥”å‘ä½ ã€‚ æ›¾ç»æˆ‘è‡ªè¯©åŠä¸ªè¯—äººï¼Œè§å±±æ˜¯æ·±æƒ…ä¼Ÿå²¸ï¼Œè§æµ·æ˜¯çƒ­æƒ…æ¾æ¹ƒï¼Œè§èŠ±è§è‰ä¿¡ä»–ä»¬çš†æœ‰æ•…äº‹ï¼Œäº‘æµ·æ±Ÿæ½®ï¼Œè™«é¸£é¸Ÿå•¼éƒ½æš—è—æƒ…æ„«ã€‚å”¯ç‹¬è§äº†ä½ ï¼Œå±±å·æ²‰é»˜ï¼Œæµ·é¢é™è°§ï¼Œäº‘æµ·ä¸å†ç¿»æ¶Œï¼Œæ±Ÿæ½®ä¸å†æ¾æ¹ƒï¼ŒèŠ±é¸Ÿé±¼è™«è¢«å…‰ä¸å°˜å‡å›ºï¼Œä¸–ç•Œä¸‡ç±ä¿±å¯‚ï¼Œåªå‰©ä¸‹ä½ ã€‚â€” ç½‘æ˜“äº‘éŸ³ä¹ã€Šèµ·é£äº†ã€‹çƒ­è¯„ æµ®èæ¼‚æ³Šæœ¬æ— æ ¹ å¤©æ¶¯æ¸¸å­å›è«é—® å¦™é¾„èªä¿Šé£æµå­ å ªé…è¥¿å‡‰çªˆçª•å¨˜","categories":[{"name":"favwords","slug":"favwords","permalink":"http://blogzhou.top/categories/favwords/"}],"tags":[{"name":"Words","slug":"Words","permalink":"http://blogzhou.top/tags/Words/"}]},{"title":"My Words","slug":"p05.MyWords","date":"2018-03-07T10:32:41.000Z","updated":"2020-07-18T03:20:22.674Z","comments":true,"path":"2018/03/07/p05.MyWords/","link":"","permalink":"http://blogzhou.top/2018/03/07/p05.MyWords/","excerpt":"","text":"ä¸ºäº†é”¦ç»£å‰ç¨‹ä¹Ÿå¥½ï¼ŒèŠ±æ ·äººç”Ÿä¹Ÿç½¢ï¼Œç„¶è€Œï¼Œè¿˜æ˜¯æ¨é€äº† åˆ«ç¦»ã€‚ é•¿å¤§ï¼Œæ·¡ç„¶äº†è®¸å¤šäº‹ï¼Œå”¯åˆ«ç¦»æ„ˆå‘çš„éš¾ä»¥é‡Šæ€€ã€‚","categories":[{"name":"favwords","slug":"favwords","permalink":"http://blogzhou.top/categories/favwords/"}],"tags":[{"name":"Words","slug":"Words","permalink":"http://blogzhou.top/tags/Words/"}]},{"title":"èƒ¡ä¹±å†™å†™(My poetry)","slug":"p03.My-poetryï¼ˆèƒ¡ä¹±å†™å†™ï¼‰","date":"2017-10-25T03:28:21.000Z","updated":"2020-07-18T03:20:22.697Z","comments":true,"path":"2017/10/25/p03.My-poetryï¼ˆèƒ¡ä¹±å†™å†™ï¼‰/","link":"","permalink":"http://blogzhou.top/2017/10/25/p03.My-poetryï¼ˆèƒ¡ä¹±å†™å†™ï¼‰/","excerpt":"è¿œæ–¹ æˆ‘æ¥è‡ªå“ªé‡Œåˆå°†å»å‘ä½•æ–¹ æ»¡åœ°çš„æ²¹èœèŠ±ä¸€æœ›æ— é™…èŠ±æµ·å’Œå¤©ç›¸æ¥çš„åœ°æ–¹æ˜¯æ€æ ·ä¸€å‰¯æ™¯è±¡ å¾®é£è½»æŠšèŠ±å„¿è½»æ‘‡ å¬æœ‰ä¸ªå£°éŸ³åœ¨è½»å”¤è¿œæ–¹è¿œæ–¹","text":"è¿œæ–¹ æˆ‘æ¥è‡ªå“ªé‡Œåˆå°†å»å‘ä½•æ–¹ æ»¡åœ°çš„æ²¹èœèŠ±ä¸€æœ›æ— é™…èŠ±æµ·å’Œå¤©ç›¸æ¥çš„åœ°æ–¹æ˜¯æ€æ ·ä¸€å‰¯æ™¯è±¡ å¾®é£è½»æŠšèŠ±å„¿è½»æ‘‡ å¬æœ‰ä¸ªå£°éŸ³åœ¨è½»å”¤è¿œæ–¹è¿œæ–¹ ç§‹æ—¥åˆé†’ æ¸…æ™¨ã€åˆé†’ã€å¾®å‡‰è¿·èŒ«ã€è¿·èŒ«ã€è¿·èŒ«æ€»æ˜¯æ†§æ†¬è¯—ä¸è¿œæ–¹ä½†å´ä¸çŸ¥å¦‚ä½•å‰å¾€å…¥ä¸–ä¸‰å¹´æœ‰ä½™ä¸çŸ¥å‰è·¯ä½•æ–¹æ—¶èŒå®éå¾å¿—è¿½æ¢¦åˆæå¯’éœœå¥ˆä½•æ ¼å±€æ‰€é™åªèƒ½å›°äºè¿™æ–¹å°†è¿‘è€Œç«‹ä¹‹å¹´èº«å®¶ä¸‰ä¸‰ä¸¤ä¸¤çˆ¶æ¯æ„ä¸å¯è¾œè‡ªèº«å¿—ä¸å¯è´Ÿä¸–é—´å®‰æœ‰å…¨æ³•å«æˆ‘è°éƒ½ä¸è´Ÿæ€§æœ¬ç§‹ç”°å—å±±å´å¤„åœ¨è¿™çº¢å°˜ä¿—ä¸–é—´æ—¶ä¸‹ä¸”é¡¾çœ¼å‰ä½†æ„¿ä¸è´Ÿæ˜å¤© æ™šéœè¿å¤œå¹•ï¼Œæ‰‹æ¡ç›¸æ€åœŸã€‚å¾€äº‹ä¸€å¹•å¹•ï¼Œè€Œä»Šä½ ä½•å¤„ã€‚ é‚£å¹´çš„åˆé‡ åœ¨é‚£è½å¶çº·é£çš„å­£èŠ‚åœ¨é‚£åˆæ¥ä¹åˆ°çš„æ ¡è§’åœ¨é‚£å†·å†·æ¸…æ¸…çš„çƒåœºè¾¹åœ¨é‚£å†ç»æ²§æ¡‘çš„æ …æ æ— ä½ æ— æ„çš„å›é¦–æ˜ å…¥çœ¼å¸˜çš„æ˜¯é‚£ç»ç¾çš„å®¹é¢œ é‚£åŒä¼šç¬‘çš„çœ¼ç›èåŒ–äº†ç§‹æ—¥çš„å¯’éœœæ˜¥é£æ‹‚é¢ å¦‚é£é™µæ¸¡å£çš„åˆé‡ä¼¼å¾—è§é¢å…·ä¸‹ä¿Šä¿è„¸åºçš„éƒ­è¥„ä½ å”¤é†’äº†æˆ‘æ²‰ç¡å·²ä¹…çš„æ‚¸åŠ¨ ä»æ­¤æ ¡å›­é‡Œå¤šäº†ä¸€åŒå¯»è§…çš„çœ¼ç›ä¸–é—´å¤šäº†ä¸€ä¸ªç›¸æ€çš„å°‘å¹´ ä½ è£…ç‚¹äº†æˆ‘å¦‚æ¢¦çš„æ€å¿µé™ªä¼´äº†æˆ‘åŒ†åŒ†çš„é‚£å¹´ ä½ ç»™äº†æˆ‘ä¸€åœºå®Œç¾çš„é‚‚é€…è®©æˆ‘æ˜ç™½ä»€ä¹ˆæ˜¯æ­¢äºå”‡é½¿çš„çˆ±æ‹ é£é€çš„å››å¹´å®šæ ¼çš„ç”»é¢ å®ƒæ‰ç¢åœ¨è®°å¿†çš„é•¿æ²³é‡Œæ»‹æ¶¦ç€æµå¹´ ç‰æ¥ ç‰æ¥¼çª—æ—æ¡ƒèŠ±é¢ï¼Œæ¥å»ååæ¨æŸ³å§¿ã€‚æ˜¯éå¯¹é”™çº¢å°˜æ€¨ï¼Œå¥³å„¿å¿ƒæ€å‡ äººè¯†ã€‚å¦†ç½¢é•œä¸­å¦©åªšå¨˜ï¼Œå¤§å¯å€¾å°½åŒ—å›½éƒã€‚è€å¹¼å¾—è§çš†å€¾å¿ƒï¼Œé˜¿é£åˆè¯†çŠ¹çŒ–ç‹‚ï¼ å•¦å•¦å•¦ æƒ…è¨€å¤šçŸ«æ‰åšä½œäººæƒ…æ·±è¿·å¤±è‡ªæˆ‘èŠ‚åº¦å¤±ç—´ç”·æ€¨å¥³å¿«æ„‰å¯„éœå‹äº‘æœ‹ä¹æƒ…æ‰˜åŒ—çª—ä¹‹å‹ éšç¬”ï¼ˆ1ï¼‰ åˆå¤œæ¢¦å›æœ‰ä½ æœ‰æˆ‘æ¸…æ™¨åˆé†’ç‹¬æœ›å¯’çª— éšç¬”ï¼ˆ2ï¼‰ çª—å¤–çš„é›¨æ·…æ·…æ²¥æ²¥æ•²æ‰“ç€ç»ç’ƒæå¦‚æ˜¨æ—¥çœŸçš„å¥½åƒå¥½åƒåªæ˜¯å°‘äº†å¬é›¨çš„ä½  ä¸è§ äººç”Ÿå› ç¼ºæ†¾è€Œå®Œç¾ä¸è§ä¹Ÿå¥½è‡³å°‘åœ¨è‡ªæˆ‘æ„å»ºçš„ç‹å›½ä¸­ä½ æ°¸ä¸ä¼šè¤ªè‰² ã€Šå‚»å‚»çš„æˆ‘ã€‹ æˆ‘ä»¥ä¸ºçœŸçš„æ˜¯å› ä¸ºæ€•ç”ŸçœŸçš„æ˜¯éœ€è¦æ…é‡å¯ä½ ä¿¡ä¸€è§é’Ÿæƒ… æˆ‘ä»¥ä¸ºçœŸçš„æ˜¯å› ä¸ºå­£èŠ‚çœŸçš„æ˜¯ç•æƒ§åŒ—é£å¯æˆ‘äºä½ å°±æ˜¯åŒ—é£ä½ ç­‰çš„ä¸æ˜¯å¹å—é£çš„å­£èŠ‚ä½ ç­‰çš„æ˜¯èƒ½è®©ä½ æ²æµ´å—é£çš„äºº æˆ‘ä»¥ä¸ºçœŸçš„èƒ½è¹­ä¸€é¡¿é¥­çœŸçš„æ˜¯æƒ³æƒ³å°±æ¿€åŠ¨å¯å¥³äººéƒ½æ˜¯éª—å­æˆ‘èƒ½å’‹æ•´ã€‚ã€‚ã€‚ çœ‹è¿™å‚»å‚»çš„æˆ‘ å› æœ å‰ä¸–çš„å› ä»Šç”Ÿçš„æœä¸€å®šæ˜¯æˆ‘å‰ä¸–ä¸ä½ çš„å›çœ¸ä¸å¤Ÿä»Šç”Ÿæ‰åªèƒ½ä¸ä½ ç›¸å¿˜äºæ±Ÿæ¹– If I like you,I will take a few steps to your direction forwardly and a few more,if you see me coming and respond by nothing,I will stop.There are so many things in the world that we can get by fighting hard,but only for love,I donâ€™t wanna try so hard.Two well-matched persons,fair and equal love and being loved.Live in such a rat-race kind of world,I wish I can get one love without trying too damn hard. æµå¹´ æ€»ä»¥ä¸ºè¿™ä¸€ç§’å’Œä¸Šä¸€ç§’æ²¡ä»€ä¹ˆä¸åŒï¼›æ€»ä»¥ä¸ºå²æœˆä¸ä¼šå¦‚æ­¤åŒ†åŒ†ï¼›æ€»ä»¥ä¸ºè‡ªå·±still a little boyï¼›â€¦â€¦å¯è¿™è“¦ç„¶çš„å›é¦–ï¼Œæ—¶é—´ç£¨å¹³äº†æ£±è§’ï¼Œå²æœˆæ¶ˆé€äº†æœ±é¢œã€‚ â€”&gt;18.3.7 ä¸‰å°ºå¾®å‘½ä¸€ä»‹å¸ƒè¡£å¯„èº«äºè¿™å¤©åœ°é—´å°šä¸èƒ½é¡¾å…¨è‡ªèº«å†·æš–å‡­ä½•ç«‹å®¤æˆå®¶ å…¶å®äººç”Ÿä¸€ä¸–è‰æœ¨ä¸€ç§‹æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢æ¨ªç«–éƒ½æ˜¯ä¸€ä¸€ç”Ÿä¸€æ­»ä¸€åœºç©ºå¯åˆç¡®ä¹æœ‰åŒºåˆ«è‰æœ¨è¾ƒäººæ´»çš„è®¤çœŸçš„å¤šè‰æœ¨è™½ä¸€ç§‹å¥¹è®°ä½äº†å—é£åˆæš–å¥¹è®°ä½äº†éª„é˜³ä¼¼ç«å¥¹è®°ä½äº†éœ²è¹æå¤´å¥¹è®°ä½äº†å‡›å‡›åŒ—é£ã€‚ã€‚ã€‚å¥¹ä¸å»è¯æ˜ä»€ä¹ˆä¹Ÿä¸å¿…è¯æ˜ä»€ä¹ˆå¥¹æ¥è¿‡ç”¨å¿ƒçš„æ„Ÿå—è¿™ä¸–ç•Œå¥¹èµ°äº†å¸¦ç€æ»¡è¶³å¯äººå‘¢å®ƒä¸€ç›´åœ¨èµ¶è·¯ä¸€ç›´åœ¨è¿½å¯»ä¸€ç›´ç›¯ç€é¥ä¸å¯åŠçš„ä¸€ç›´æ‰§ç€äºå¾—ä¸åˆ°çš„å®ƒæ‹¼å‘½åœ¨è¯æ˜ä»€ä¹ˆå¯çœŸæ­£åœ¨è¿½å¯»ä»€ä¹ˆæƒ³è¯æ˜ä»€ä¹ˆå‡ äººèƒ½è¯´çš„æ¸…æ¥šåˆ°å¤´æ¥ç«™åœ¨ç”Ÿå‘½çš„å°½å¤´ä»€ä¹ˆéƒ½æ²¡å‰©ä¸‹åªæœ‰ä¸€èº«ç–²æƒ«å°±è¿™ä¹ˆæµ‘æµ‘å™©å™©çš„å»äº† å¥½ä¸å®¹æ˜“æ¥è¿™ä¸–ä¸Šèµ°ä¸€é­ç»ˆå½’æ˜¯å¯æƒœäº†äº› ç­‰ä½  æˆ‘è¿™ä¸ªäººå•Šè¿™äºŒåå‡ å¹´ä¸ç¼ºæ˜¥æ—¥çš„èºæ­Œç‡•èˆï¼Œè™«é¸£é¸Ÿå•¼ä¸ç¼ºå¤æ—¥çš„éª„é˜³ä¼¼ç«ï¼ŒèšŠå®è‰æ‰°ä¸ç¼ºç§‹æ—¥çš„ç¨»é»„ç™¾é‡Œï¼Œé»è°·é£˜é¦™ä¸ç¼ºå†¬æ—¥çš„é“¶è£…ç´ è£¹ï¼Œé›¾å‡‡æ²†ç €å”¯ç‹¬ç¼ºä¸ªä½  é™ªæˆ‘è§è¯è¿™ä¸€åˆ‡å•Š","categories":[{"name":"My poetry","slug":"My-poetry","permalink":"http://blogzhou.top/categories/My-poetry/"}],"tags":[{"name":"poetry","slug":"poetry","permalink":"http://blogzhou.top/tags/poetry/"}]},{"title":"å¦‚ä½•æ¸…ç†XCodeç¼“å­˜","slug":"t09.å¦‚ä½•æ¸…ç†XCodeç¼“å­˜","date":"2017-10-23T06:12:44.000Z","updated":"2020-07-18T03:20:22.690Z","comments":true,"path":"2017/10/23/t09.å¦‚ä½•æ¸…ç†XCodeç¼“å­˜/","link":"","permalink":"http://blogzhou.top/2017/10/23/t09.å¦‚ä½•æ¸…ç†XCodeç¼“å­˜/","excerpt":"åŸæ–‡é“¾æ¥ ä¸€ï¼šç§»é™¤ Xcode è¿è¡Œå®‰è£… APP äº§ç”Ÿçš„ç¼“å­˜æ–‡ä»¶(DerivedData) åªè¦é‡æ–°è¿è¡ŒXcodeå°±ä¸€å®šä¼šé‡æ–°ç”Ÿæˆï¼Œè€Œä¸”ä¼šéšç€è¿è¡Œç¨‹åºçš„å¢å¤šï¼Œå ç”¨ç©ºé—´ä¼šè¶Šæ¥è¶Šå¤§ã€‚åˆ é™¤ååœ¨é‡æ–°è¿è¡Œç¨‹åºå¯èƒ½ä¼šç¨å¾®æ…¢ä¸€ç‚¹ï¼Œå»ºè®®å®šæœŸæ¸…ç†ã€‚ è·¯å¾„ï¼š 1~/Library/Developer/Xcode/DerivedData","text":"åŸæ–‡é“¾æ¥ ä¸€ï¼šç§»é™¤ Xcode è¿è¡Œå®‰è£… APP äº§ç”Ÿçš„ç¼“å­˜æ–‡ä»¶(DerivedData) åªè¦é‡æ–°è¿è¡ŒXcodeå°±ä¸€å®šä¼šé‡æ–°ç”Ÿæˆï¼Œè€Œä¸”ä¼šéšç€è¿è¡Œç¨‹åºçš„å¢å¤šï¼Œå ç”¨ç©ºé—´ä¼šè¶Šæ¥è¶Šå¤§ã€‚åˆ é™¤ååœ¨é‡æ–°è¿è¡Œç¨‹åºå¯èƒ½ä¼šç¨å¾®æ…¢ä¸€ç‚¹ï¼Œå»ºè®®å®šæœŸæ¸…ç†ã€‚ è·¯å¾„ï¼š 1~/Library/Developer/Xcode/DerivedData äºŒï¼šç§»é™¤ APP æ‰“åŒ…çš„ipaå†å²ç‰ˆæœ¬(Archives) åˆ é™¤åä¸å¯æ¢å¤ï¼Œæ–‡ä»¶å¤¹æ˜¯æŒ‰ç…§æ—¥æœŸæ’åˆ—çš„ï¼Œæ‰€ä»¥å¦‚æœä½ ä¸æƒ³å…¨éƒ¨åˆ é™¤ï¼Œå°±åªä¿ç•™æœ€æ–°çš„å‡ ä¸ªç‰ˆæœ¬å°±å¥½äº†ï¼Œä¸ªäººå»ºè®®å…¨éƒ¨åˆ é™¤ã€‚ è·¯å¾„ï¼š 1~/Library/Developer/Xcode/Archives ä¸‰ï¼šç§»é™¤ APP æ‰“åŒ…çš„app iconå†å²ç‰ˆæœ¬(Archives) åˆ é™¤åä¸å¯æ¢å¤ï¼Œæ–‡ä»¶å¤¹æ˜¯Bundle Idenifieræ’åˆ—çš„ï¼Œç„¶åå†æŒ‰ç…§archiveçš„ç‰ˆæœ¬å·æ’åˆ—çš„ï¼Œå¦‚æœä½ çœ‹æ¯ä¸ªç‰ˆæœ¬å†…çš„å†…å®¹ï¼Œå…¶å®å°±æ˜¯ä½ çš„app iconï¼Œä¸ªäººå»ºè®®å…¨éƒ¨åˆ é™¤ã€‚ è·¯å¾„ï¼š 1~/Library/Developer/Xcode/Products/ å››ï¼šç§»é™¤æ¨¡æ‹Ÿå™¨çš„ç¼“å­˜æ•°æ®(Devices) æ¨¡æ‹Ÿå™¨çš„ç›¸å…³æ•°æ®ã€‚æ¯ä¸ªç‰ˆæœ¬çš„æ¨¡æ‹Ÿå™¨å ç”¨çš„å†…å­˜ç©ºé—´å¤§çº¦ä¸º10Må·¦å³ã€‚æ¯ä¸ªæ–‡ä»¶å¤¹é‡ŒåŒ…å«çš„å°±æ˜¯ä¸€ä¸ªç‰¹å®šç³»ç»Ÿç‰ˆæœ¬çš„è®¾å¤‡çš„æ•°æ®ã€‚æ¯ä¸ªæ–‡ä»¶å¤¹å¯¹åº”å“ªä¸ªè®¾å¤‡å¯ä»¥åœ¨å…¶ä¸‹device.plistä¸­æŸ¥çœ‹ã€‚åˆ é™¤ä¹‹åï¼Œå¦‚æœç«‹å³è¿è¡Œç¨‹åºä¼šæŠ¥é”™ï¼Œå…ˆå…³é—­Xcodeï¼Œå†é‡æ–°æ‰“å¼€ç¨‹åºï¼Œè¿è¡Œå³å¯ã€‚è¿è¡Œè¯¥è·¯å¾„ä¸‹ä¼šç«‹é©¬ç”Ÿæˆæ¨¡æ‹Ÿå™¨å¯¹åº”ç‰ˆæœ¬çš„æ–‡ä»¶ã€‚ è·¯å¾„ï¼š 1~/Library/Developer/CoreSimulator/Devices/ äº”ï¼šç§»é™¤å¯¹æ—§è®¾å¤‡çš„æ”¯æŒ(iOS DeviceSupport) ä¸€èˆ¬æ˜¯å ç”¨å†…å­˜ç©ºé—´æœ€å¤§çš„æ–‡ä»¶å¤¹ï¼Œå³ä½¿å…¨éƒ¨åˆ ï¼Œå†è¿æ¥è®¾å¤‡è°ƒè¯•æ—¶ï¼Œä¼šé‡æ–°è‡ªåŠ¨ç”Ÿæˆã€‚ä¸€èˆ¬iOSåªå‘ä¸‹å…¼å®¹ä¸¤ä¸ªç‰ˆæœ¬å°±å¯ä»¥äº†ï¼Œæ‰€ä»¥æˆ‘ç§»é™¤äº†9.0ä»¥ä¸‹çš„æ‰€æœ‰ç‰ˆæœ¬ã€‚ è·¯å¾„ï¼š 1~/Library/Developer/Xcode/iOS DeviceSupport å…­ï¼šç§»é™¤ Xcode ä¸­çš„æ— æ•ˆçš„æ’ä»¶(Plug-ins) å› ä¸ºä¹‹å‰ä½ å¯èƒ½å®‰è£…äº†ä¸€äº› Xcode çš„æ’ä»¶ï¼Œæ¯”å¦‚HighlightSelectedStringã€VVDocumenter-Xcodeç­‰éå¸¸æ–¹ä¾¿å¥½ç”¨çš„ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œåœ¨Xcodeå‡çº§åˆ°version 8.0ä»¥åï¼Œå°±å¤±æ•ˆäº†ï¼ŒXcodeåœ¨å†…éƒ¨å·²ç»é›†æˆäº†ç±»ä¼¼çš„æ–¹æ³•ï¼Œæ‰€ä»¥ä¹‹å‰å®‰è£…çš„ä¹Ÿéƒ½æ²¡æœ‰ç”¨äº†ï¼Œä½†æ˜¯è¿˜åœ¨åŸæ¥çš„ä½ç½®å ç”¨ç€å†…å­˜ç©ºé—´ï¼Œå»ºè®®åˆ é™¤ã€‚ è·¯å¾„ï¼š 12//å¦‚æœä½ æ›¾ç»æ²¡æœ‰å®‰è£…è¿‡æ’ä»¶ï¼Œé‚£ä¹ˆå¯èƒ½ä¸å­˜åœ¨æ­¤è·¯å¾„ã€‚~/Library/Application Support/Developer/Shared/Xcode/Plug-ins ä¸ƒï¼šç§»é™¤æ—§ç‰ˆæœ¬çš„æ¨¡æ‹Ÿå™¨æ”¯æŒ å¦‚æœä½ ä¸å°å¿ƒå®‰è£…äº†å¾ˆå¤šä¸ªç‰ˆæœ¬çš„æ¨¡æ‹Ÿå™¨ï¼Œé‚£ä¹ˆä½ å¯ä»¥åˆ é™¤ä¸€äº›æ—§ç‰ˆæœ¬çš„ã€‚ä½†æ˜¯å½“ä½ éœ€è¦æ—§ç‰ˆæœ¬çš„æ¨¡æ‹Ÿå™¨æ—¶ï¼Œå°±éœ€è¦é‡æ–°ä¸‹è½½äº†ã€‚å»ºè®®ç•™ä¸‹1~2ä¸ªç‰ˆæœ¬å°±å¥½äº†ï¼Œå…¶ä½™çš„éƒ½åˆ äº†å§ã€‚ è·¯å¾„ï¼š 1~/Library/Developer/CoreSimulator/Profiles/Runtimes/ å…«ï¼šç§»é™¤ playground çš„é¡¹ç›®ç¼“å­˜(XCPGDevices) åˆ é™¤åå¯é‡æ–°ç”Ÿæˆï¼Œå¯ä»¥å…¨éƒ¨åˆ é™¤ã€‚å†æ¬¡è¿è¡Œç¨‹åºä¼šç¼“å­˜ã€‚ è·¯å¾„ï¼š 1~/Library/Developer/XCPGDevices/ ä¹ï¼šç§»é™¤æ—§çš„æ–‡æ¡£(Docsets) åˆ é™¤åä¸å¯æ¢å¤ï¼Œè¯¥ç›®å½•ä¸‹å­˜å‚¨çš„ä¸ºå¼€å‘æ–‡æ¡£ï¼Œä¸€èˆ¬æœ‰ä¸‰ä¸ªæ–‡ä»¶com.apple.adc.documentation.iOS.docset(1.68GB)ã€com.apple.adc.documentation.OSX.docset(2.62GB)å’Œcom.apple.adc.documentation.Xcode.docset(256.4M)ï¼Œå¦‚æœä½ åªåšiOSå¼€å‘ï¼Œå…¶å®ä½ å¯ä»¥æŠŠOSX.docsetåˆ é™¤æ‰çš„ï¼Œå› ä¸ºå®ƒå ç”¨äº†2.62GBçš„å†…å­˜ã€‚ è·¯å¾„ï¼š 1~/Library/Developer/Shared/Documentation/DocSets åï¼šç§»é™¤æ¨¡æ‹Ÿå™¨ä¸­çš„SDKç‰ˆæœ¬(iPhoneSimulator.sdk) ä¸å¯æ¢å¤ï¼Œæ“ä½œè¯·æ…é‡ã€‚æˆ‘ä¸ªäººçš„æ­¤è·¯å¾„ä¸‹çš„åªæœ‰æœ€æ–°ç‰ˆæœ¬çš„sdkï¼Œé™¤éå½“ä½ æœ‰å¤šä¸ªç‰ˆæœ¬çš„sdkå†é…Œæƒ…åˆ é™¤ã€‚ è·¯å¾„ï¼š 12//æ³¨æ„ï¼šå ç”¨ç©ºé—´çº¦4GBï¼Œåˆ é™¤æ—¶è¯·æ…é‡~/application/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/ By the way: å‰å¾€æ–‡ä»¶å¤¹å¿«æ·é”®ï¼šCommand + shift + G Xcodeæ¸…é™¤æœ€è¿‘æ‰“å¼€çš„æ–‡ä»¶åˆ—è¡¨ï¼šFile -&gt; Open Recent -&gt; Clear Menu","categories":[{"name":"iOSå¼€å‘","slug":"iOSå¼€å‘","permalink":"http://blogzhou.top/categories/iOSå¼€å‘/"}],"tags":[{"name":"XCode","slug":"XCode","permalink":"http://blogzhou.top/tags/XCode/"}]},{"title":"è¯—æ­Œï¼ˆinlandï¼‰","slug":"p01.è¯—æ­Œï¼ˆinlandï¼‰","date":"2017-10-17T02:01:48.000Z","updated":"2020-07-18T03:20:22.698Z","comments":true,"path":"2017/10/17/p01.è¯—æ­Œï¼ˆinlandï¼‰/","link":"","permalink":"http://blogzhou.top/2017/10/17/p01.è¯—æ­Œï¼ˆinlandï¼‰/","excerpt":"ã€Šå¯é‡ä¸å¯æ±‚çš„äº‹ã€‹â€” å†¯å”åæµ·æœ‰æ ‘çš„é™¢å­å¤ä»£æœ‰å·¥çš„ç‰æ­¤æ—¶æ­¤åˆ»çš„äº‘äºŒåæ¥å²çš„ä½  æ•…ä¹¡çš„äº‘ï¼Œä¸Šå¤çš„ç‰ï¼Œéšæ‰‹çš„è¯—ï¼Œæ­¤åˆ»çš„ä½ ã€‚","text":"ã€Šå¯é‡ä¸å¯æ±‚çš„äº‹ã€‹â€” å†¯å”åæµ·æœ‰æ ‘çš„é™¢å­å¤ä»£æœ‰å·¥çš„ç‰æ­¤æ—¶æ­¤åˆ»çš„äº‘äºŒåæ¥å²çš„ä½  æ•…ä¹¡çš„äº‘ï¼Œä¸Šå¤çš„ç‰ï¼Œéšæ‰‹çš„è¯—ï¼Œæ­¤åˆ»çš„ä½ ã€‚ ã€Šè‡´æ©¡æ ‘ã€‹â€” èˆ’å©·æˆ‘å¦‚æœçˆ±ä½ â€”â€”ç»ä¸åƒæ”€æ´çš„å‡Œéœ„èŠ±ï¼Œå€Ÿä½ çš„é«˜æç‚«è€€è‡ªå·±ï¼›æˆ‘å¦‚æœçˆ±ä½ â€”â€”ç»ä¸å­¦ç—´æƒ…çš„é¸Ÿå„¿ï¼Œä¸ºç»¿è«é‡å¤å•è°ƒçš„æ­Œæ›²ï¼›ä¹Ÿä¸æ­¢åƒæ³‰æºï¼Œå¸¸å¹´é€æ¥æ¸…å‡‰çš„æ…°è—‰ï¼›ä¹Ÿä¸æ­¢åƒé™©å³°ï¼Œå¢åŠ ä½ çš„é«˜åº¦ï¼Œè¡¬æ‰˜ä½ çš„å¨ä»ªã€‚ç”šè‡³æ—¥å…‰ï¼Œç”šè‡³æ˜¥é›¨ã€‚ä¸ï¼Œè¿™äº›éƒ½è¿˜ä¸å¤Ÿï¼æˆ‘å¿…é¡»æ˜¯ä½ è¿‘æ—çš„ä¸€æ ªæœ¨æ£‰ï¼Œä½œä¸ºæ ‘çš„å½¢è±¡å’Œä½ ç«™åœ¨ä¸€èµ·ã€‚æ ¹ï¼Œç´§æ¡åœ¨åœ°ä¸‹ï¼›å¶ï¼Œç›¸è§¦åœ¨äº‘é‡Œã€‚æ¯ä¸€é˜µé£è¿‡ï¼Œæˆ‘ä»¬éƒ½äº’ç›¸è‡´æ„ï¼Œä½†æ²¡æœ‰äººï¼Œå¬æ‡‚æˆ‘ä»¬çš„è¨€è¯­ã€‚ä½ æœ‰ä½ çš„é“œæé“å¹²ï¼Œåƒåˆ€ï¼Œåƒå‰‘ï¼Œä¹ŸåƒæˆŸï¼›æˆ‘æœ‰æˆ‘çº¢ç¡•çš„èŠ±æœµï¼Œåƒæ²‰é‡çš„å¹æ¯ï¼Œåˆåƒè‹±å‹‡çš„ç«ç‚¬ã€‚æˆ‘ä»¬åˆ†æ‹…å¯’æ½®ã€é£é›·ã€éœ¹é›³ï¼›æˆ‘ä»¬å…±äº«é›¾éœ­ã€æµå²šã€è™¹éœ“ã€‚ä»¿ä½›æ°¸è¿œåˆ†ç¦»ï¼Œå´åˆç»ˆèº«ç›¸ä¾ã€‚è¿™æ‰æ˜¯ä¼Ÿå¤§çš„çˆ±æƒ…ï¼Œåšè´å°±åœ¨è¿™é‡Œï¼šçˆ±â€”â€”ä¸ä»…çˆ±ä½ ä¼Ÿå²¸çš„èº«èº¯ï¼Œä¹Ÿçˆ±ä½ åšæŒçš„ä½ç½®ï¼Œè¶³ä¸‹çš„åœŸåœ°ã€‚ ã€Šé›¨å··ã€‹â€”æˆ´æœ›èˆ’æ’‘ç€æ²¹çº¸ä¼ï¼Œç‹¬è‡ªå½·å¾¨åœ¨æ‚ é•¿ï¼Œæ‚ é•¿åˆå¯‚å¯¥çš„é›¨å··ï¼Œæˆ‘å¸Œæœ›é€¢ç€ä¸€ä¸ªä¸é¦™ä¸€æ ·çš„ç»“ç€æ„æ€¨çš„å§‘å¨˜ã€‚å¥¹æ˜¯æœ‰ä¸é¦™ä¸€æ ·çš„é¢œè‰²ï¼Œä¸é¦™ä¸€æ ·çš„èŠ¬èŠ³ï¼Œä¸é¦™ä¸€æ ·çš„å¿§æ„ï¼Œåœ¨é›¨ä¸­å“€æ€¨ï¼Œå“€æ€¨åˆå½·å¾¨ï¼›å¥¹å½·å¾¨åœ¨è¿™å¯‚å¯¥çš„é›¨å··ï¼Œæ’‘ç€æ²¹çº¸ä¼åƒæˆ‘ä¸€æ ·ï¼Œåƒæˆ‘ä¸€æ ·åœ°é»˜é»˜å½³äºç€ï¼Œå†·æ¼ ï¼Œå‡„æ¸…ï¼Œåˆæƒ†æ€…,å¥¹é™é»˜åœ°èµ°è¿‘èµ°è¿‘ï¼ŒåˆæŠ•å‡ºå¤ªæ¯ä¸€èˆ¬çš„çœ¼å…‰ï¼Œå¥¹é£˜è¿‡åƒæ¢¦ä¸€èˆ¬çš„ï¼Œåƒæ¢¦ä¸€èˆ¬çš„å‡„å©‰è¿·èŒ«ã€‚åƒæ¢¦ä¸­é£˜è¿‡ä¸€æä¸é¦™çš„ï¼Œæˆ‘èº«æ—é£˜è¿‡è¿™å¥³éƒï¼›å¥¹é™é»˜åœ°è¿œäº†ï¼Œè¿œäº†ï¼Œåˆ°äº†é¢“åœ®çš„ç¯±å¢™ï¼Œèµ°å°½è¿™é›¨å··ã€‚åœ¨é›¨çš„å“€æ›²é‡Œï¼Œæ¶ˆäº†å¥¹çš„é¢œè‰²ï¼Œæ•£äº†å¥¹çš„èŠ¬èŠ³æ¶ˆæ•£äº†ï¼Œç”šè‡³å¥¹çš„å¤ªæ¯èˆ¬çš„çœ¼å…‰ï¼Œä¸é¦™èˆ¬çš„æƒ†æ€…,æ’‘ç€æ²¹çº¸ä¼ï¼Œç‹¬è‡ªå½·å¾¨åœ¨æ‚ é•¿ï¼Œæ‚ é•¿åˆå¯‚å¯¥çš„é›¨å··ï¼Œæˆ‘å¸Œæœ›é£˜è¿‡ä¸€ä¸ªä¸é¦™ä¸€æ ·çš„ç»“ç€æ„æ€¨çš„å§‘å¨˜ã€‚ ã€Šå†åˆ«åº·æ¡¥ã€‹â€”å¾å¿—æ‘©è½»è½»çš„æˆ‘èµ°äº†ï¼Œæ­£å¦‚æˆ‘è½»è½»çš„æ¥ï¼›æˆ‘è½»è½»çš„æ‹›æ‰‹ï¼Œä½œåˆ«è¥¿å¤©çš„äº‘å½©ã€‚ é‚£æ²³ç•”çš„é‡‘æŸ³ï¼Œæ˜¯å¤•é˜³ä¸­çš„æ–°å¨˜ï¼›æ³¢å…‰é‡Œçš„è‰³å½±ï¼Œåœ¨æˆ‘çš„å¿ƒå¤´è¡æ¼¾ã€‚ è½¯æ³¥ä¸Šçš„é’è‡,æ²¹æ²¹çš„åœ¨æ°´åº•æ‹›æ‘‡,åœ¨åº·æ²³çš„æŸ”æ³¢é‡Œï¼Œæˆ‘ç”˜å¿ƒåšä¸€æ¡æ°´è‰ï¼ é‚£æ¦†è«ä¸‹çš„ä¸€æ½­ï¼Œä¸æ˜¯æ¸…æ³‰ï¼Œæ˜¯å¤©ä¸Šè™¹ï¼›æ‰ç¢åœ¨æµ®è—»é—´ï¼Œæ²‰æ·€ç€å½©è™¹ä¼¼çš„æ¢¦ã€‚ å¯»æ¢¦ï¼Ÿæ’‘ä¸€æ”¯é•¿ç¯™,å‘é’è‰æ›´é’å¤„æ¼«æº¯,æ»¡è½½ä¸€èˆ¹æ˜Ÿè¾‰ï¼Œåœ¨æ˜Ÿè¾‰æ–‘æ–“é‡Œæ”¾æ­Œã€‚ ä½†æˆ‘ä¸èƒ½æ”¾æ­Œï¼Œæ‚„æ‚„æ˜¯åˆ«ç¦»çš„ç¬™ç®«ï¼›å¤è™«ä¹Ÿä¸ºæˆ‘æ²‰é»˜ï¼Œæ²‰é»˜æ˜¯ä»Šæ™šçš„åº·æ¡¥ï¼ æ‚„æ‚„çš„æˆ‘èµ°äº†ï¼Œæ­£å¦‚æˆ‘æ‚„æ‚„çš„æ¥ï¼›æˆ‘æŒ¥ä¸€æŒ¥è¡£è¢–ï¼Œä¸å¸¦èµ°ä¸€ç‰‡äº‘å½©ã€‚ ä¸€ä¸ªäººéœ€è¦éšè—å¤šå°‘ç§˜å¯†æ‰èƒ½å·§å¦™åœ°åº¦è¿‡ä¸€ç”Ÿè¿™ä½›å…‰ç‚¹ç‚¹çš„é«˜åŸä¸‰æ­¥ä¸¤æ­¥ä¾¿æ˜¯å¤©å ‚å´ä»æœ‰é‚£ä¹ˆå¤šäººå› å¿ƒäº‹è¿‡é‡è€Œèµ°ä¸åŠ¨â€”ä»“å¤®å˜‰æª","categories":[{"name":"favpoetry","slug":"favpoetry","permalink":"http://blogzhou.top/categories/favpoetry/"}],"tags":[{"name":"poetry","slug":"poetry","permalink":"http://blogzhou.top/tags/poetry/"}]},{"title":"è¯—æ­Œï¼ˆforeignï¼‰","slug":"p02.è¯—æ­Œï¼ˆforeignï¼‰","date":"2017-10-16T02:40:45.000Z","updated":"2020-07-18T03:20:22.697Z","comments":true,"path":"2017/10/16/p02.è¯—æ­Œï¼ˆforeignï¼‰/","link":"","permalink":"http://blogzhou.top/2017/10/16/p02.è¯—æ­Œï¼ˆforeignï¼‰/","excerpt":"ã€ŠI Strove with Noneã€‹â€” Walter Savage Landor I strove with none,for none was worth my strife;Nature I lovâ€™d, ï¼Œand next to Nature, Art;I warmâ€™d both hands before the fire of life;It sinks,and I am ready to depart. æˆ‘å’Œè°éƒ½ä¸äº‰ï¼Œå’Œè°äº‰æˆ‘éƒ½ä¸å±‘ï¼›æˆ‘çˆ±å¤§è‡ªç„¶ï¼Œå…¶æ¬¡å°±æ˜¯è‰ºæœ¯ï¼›æˆ‘åŒæ‰‹çƒ¤ç€ï¼Œç”Ÿå‘½ä¹‹ç«å–æš–ï¼›ç«èäº†ï¼Œæˆ‘ä¹Ÿå‡†å¤‡èµ°äº†ã€‚â€”â€”[è‹±]å…°å¾·ï¼ˆæ¨ç»› è¯‘ï¼‰","text":"ã€ŠI Strove with Noneã€‹â€” Walter Savage Landor I strove with none,for none was worth my strife;Nature I lovâ€™d, ï¼Œand next to Nature, Art;I warmâ€™d both hands before the fire of life;It sinks,and I am ready to depart. æˆ‘å’Œè°éƒ½ä¸äº‰ï¼Œå’Œè°äº‰æˆ‘éƒ½ä¸å±‘ï¼›æˆ‘çˆ±å¤§è‡ªç„¶ï¼Œå…¶æ¬¡å°±æ˜¯è‰ºæœ¯ï¼›æˆ‘åŒæ‰‹çƒ¤ç€ï¼Œç”Ÿå‘½ä¹‹ç«å–æš–ï¼›ç«èäº†ï¼Œæˆ‘ä¹Ÿå‡†å¤‡èµ°äº†ã€‚â€”â€”[è‹±]å…°å¾·ï¼ˆæ¨ç»› è¯‘ï¼‰ ã€ŠWhen You Are Oldã€‹â€” William Butler YeatsWhen you are old and grey and full of sleep,And nodding by the fire, take down this book,And slowly read, and dream of the soft lookYour eyes had once, and of their shadows deep;How many loved your moments of glad grace,And loved your beauty with love false or true,But one man loved the pilgrim soul in you,And loved the sorrows of your changing face;And bending down beside the glowing bars,Murmur, a little sadly, how love fledAnd paced upon the mountains overheadAnd hid his face amid a crowd of stars. ã€Šå½“ä½ è€äº†ã€‹è¢å¯å˜‰è¯‘å½“ä½ è€äº†ï¼Œå¤´ç™½äº†ï¼Œç¡æ€æ˜æ²‰åœ¨ç‚‰ç«æ—æ‰“ç›¹ï¼Œè¯·å–ä¸‹è¿™éƒ¨è¯—æ­Œæ…¢æ…¢è¯»ï¼Œå›æƒ³ä½ è¿‡å»çœ¼ç¥çš„æŸ”å’Œå›æƒ³å®ƒä»¬æ˜”æ—¥æµ“é‡çš„é˜´å½±å¤šå°‘äººçˆ±ä½ é’æ˜¥æ¬¢ç•…çš„æ—¶è¾°çˆ±æ…•ä½ çš„ç¾ä¸½ï¼Œå‡æ„æˆ–çœŸå¿ƒåªæœ‰ä¸€ä¸ªäººçˆ±ä½ æœåœ£è€…çš„çµé­‚çˆ±ä½ è¡°è€äº†çš„è„¸ä¸Šç—›è‹¦çš„çš±çº¹å‚ä¸‹å¤´æ¥ï¼Œåœ¨çº¢ç«é—ªè€€çš„ç‚‰å­æ—å‡„ç„¶åœ°è½»è½»è¯‰ è¯´é‚£çˆ±æƒ…çš„æ¶ˆé€åœ¨å¤´é¡¶ä¸Šçš„å±±ä¸Šå®ƒç¼“ç¼“åœ°è¸±ç€æ­¥å­åœ¨ä¸€ç¾¤æ˜Ÿæ˜Ÿä¸­é—´éšè—ç€è„¸åº","categories":[{"name":"favpoetry","slug":"favpoetry","permalink":"http://blogzhou.top/categories/favpoetry/"}],"tags":[{"name":"poetry","slug":"poetry","permalink":"http://blogzhou.top/tags/poetry/"}]},{"title":"iOSç³»ç»ŸéŸ³é‡&å±å¹•äº®åº¦è°ƒèŠ‚","slug":"t06.iOSç³»ç»ŸéŸ³é‡-å±å¹•äº®åº¦è°ƒèŠ‚","date":"2017-10-12T07:35:14.000Z","updated":"2020-07-18T03:20:22.693Z","comments":true,"path":"2017/10/12/t06.iOSç³»ç»ŸéŸ³é‡-å±å¹•äº®åº¦è°ƒèŠ‚/","link":"","permalink":"http://blogzhou.top/2017/10/12/t06.iOSç³»ç»ŸéŸ³é‡-å±å¹•äº®åº¦è°ƒèŠ‚/","excerpt":"ä¸€ï¼Œç³»ç»ŸéŸ³é‡è·å–ç³»ç»Ÿæ¡†æ¶123#import &lt;AVFoundation/AVFoundation.h&gt;#import &lt;MediaPlayer/MediaPlayer.h&gt;#import &lt;AVKit/AVKit.h&gt; è·å–ç³»ç»ŸéŸ³é‡slider1234567891011121314- (MPVolumeView *)volumeView &#123; if (_volumeView == nil) &#123; _volumeView = [[MPVolumeView alloc] init]; [_volumeView sizeToFit];#warning è·å–ç³»ç»Ÿçš„éŸ³é‡çš„UISlider for (UIView *view in [_volumeView subviews])&#123; if ([view.class.description isEqualToString:@&quot;MPVolumeSlider&quot;])&#123; self.volumeViewSlider = (UISlider*)view; break; &#125; &#125; &#125; return _volumeView;&#125;","text":"ä¸€ï¼Œç³»ç»ŸéŸ³é‡è·å–ç³»ç»Ÿæ¡†æ¶123#import &lt;AVFoundation/AVFoundation.h&gt;#import &lt;MediaPlayer/MediaPlayer.h&gt;#import &lt;AVKit/AVKit.h&gt; è·å–ç³»ç»ŸéŸ³é‡slider1234567891011121314- (MPVolumeView *)volumeView &#123; if (_volumeView == nil) &#123; _volumeView = [[MPVolumeView alloc] init]; [_volumeView sizeToFit];#warning è·å–ç³»ç»Ÿçš„éŸ³é‡çš„UISlider for (UIView *view in [_volumeView subviews])&#123; if ([view.class.description isEqualToString:@&quot;MPVolumeSlider&quot;])&#123; self.volumeViewSlider = (UISlider*)view; break; &#125; &#125; &#125; return _volumeView;&#125; ç›‘å¬ç³»ç»Ÿç‰©ç†æŒ‰é”®è°ƒèŠ‚éŸ³é‡12345678910/** ç›‘å¬ */- (void)registerVolumeChangeEvent &#123;// NSError *error;// [[AVAudioSession sharedInstance] setActive:YES error:&amp;error]; [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(changeVolumeValueFunc) name:@&quot;AVSystemController_SystemVolumeDidChangeNotification&quot; object:nil];&#125;/** ç§»é™¤ */- (void)unregisterVolumeChangeEvent &#123; [[NSNotificationCenter defaultCenter] removeObserver:self name:@&quot;AVSystemController_SystemVolumeDidChangeNotification&quot; object:nil];&#125; è·å–ç³»ç»Ÿå½“å‰éŸ³é‡1[[AVAudioSession sharedInstance] outputVolume]; äºŒï¼Œå±å¹•äº®åº¦å¾ˆç®€å•å°±ä¸€å¥ 123456789[[UIScreen mainScreen] setBrightness:å€¼ï¼ˆ0 ~ 1ï¼‰]//ç¤ºä¾‹ if (panPoint.y &lt; 0) &#123; //å¢åŠ äº®åº¦ [[UIScreen mainScreen] setBrightness:self.startVB + (-panPoint.y / 30.0 / 10)]; &#125; else &#123; //å‡å°‘äº®åº¦ [[UIScreen mainScreen] setBrightness:self.startVB - (panPoint.y / 30.0 / 10)]; &#125;","categories":[{"name":"iOSå¼€å‘","slug":"iOSå¼€å‘","permalink":"http://blogzhou.top/categories/iOSå¼€å‘/"}],"tags":[{"name":"UI","slug":"UI","permalink":"http://blogzhou.top/tags/UI/"}]},{"title":"UIButtoné‡å¤ç‚¹å‡»è§£å†³æ–¹æ¡ˆ","slug":"t04.UIButtoné‡å¤ç‚¹å‡»è§£å†³æ–¹æ¡ˆ","date":"2017-10-12T07:33:26.000Z","updated":"2020-07-18T03:20:22.694Z","comments":true,"path":"2017/10/12/t04.UIButtoné‡å¤ç‚¹å‡»è§£å†³æ–¹æ¡ˆ/","link":"","permalink":"http://blogzhou.top/2017/10/12/t04.UIButtoné‡å¤ç‚¹å‡»è§£å†³æ–¹æ¡ˆ/","excerpt":"é¡¹ç›®éœ€æ±‚ï¼Œä¸ºäº†é˜²æ­¢ç”¨æˆ·è¿ç»­ç‚¹å‡»ï¼Œé€ æˆé‡å¤è¯·æ±‚ï¼Œéœ€è¦è®¾ç½®UIButtonç‚¹å‡»åï¼Œä¸€æ®µæ—¶é—´é—´éš”å†…ä¸èƒ½ç‚¹å‡»ã€‚è¿™ä¸ªåšå¼€å‘ç»å¸¸ç”¨åˆ°ï¼Œåœ¨è¿™å°å°æ€»ç»“ä¸‹ï¼š æ–¹å¼ä¸€ï¼ˆéä¸»æµï¼‰ï¼šç»§æ‰¿äºNSObjectå†™ä¸ªå·¥å…·ç±»1.å£°æ˜ä¸€ä¸ªé™æ€å˜é‡è®°å½•ä¸Šæ¬¡çš„ç‚¹å‡»æ—¶é—´1static long LAST_CLICK_TIME1 = 0;","text":"é¡¹ç›®éœ€æ±‚ï¼Œä¸ºäº†é˜²æ­¢ç”¨æˆ·è¿ç»­ç‚¹å‡»ï¼Œé€ æˆé‡å¤è¯·æ±‚ï¼Œéœ€è¦è®¾ç½®UIButtonç‚¹å‡»åï¼Œä¸€æ®µæ—¶é—´é—´éš”å†…ä¸èƒ½ç‚¹å‡»ã€‚è¿™ä¸ªåšå¼€å‘ç»å¸¸ç”¨åˆ°ï¼Œåœ¨è¿™å°å°æ€»ç»“ä¸‹ï¼š æ–¹å¼ä¸€ï¼ˆéä¸»æµï¼‰ï¼šç»§æ‰¿äºNSObjectå†™ä¸ªå·¥å…·ç±»1.å£°æ˜ä¸€ä¸ªé™æ€å˜é‡è®°å½•ä¸Šæ¬¡çš„ç‚¹å‡»æ—¶é—´1static long LAST_CLICK_TIME1 = 0; 2.å£°æ˜ä¸€ä¸ªæ–¹æ³•åŠå®ç°å¦‚ä¸‹ï¼ˆæ€è·¯å¾ˆç®€å•å°±ç›´æ¥ä¸Šä»£ç äº†ï¼‰1234567891011121314/** * æ ¹æ®ä¼ è¿‡æ¥çš„æ—¶é—´é—´éš”è¿›è¡Œæ˜¯å¦å¿«é€Ÿç‚¹å‡»åˆ¤æ–­ï¼› * opIntervalTime ï¼š æ—¶é—´é—´éš”ï¼Œå•ä½æ¯«ç§’ï¼› **/+(bool)isFastDoubleClick1:(long)opIntervalTime&#123; NSDate* date = [NSDate dateWithTimeIntervalSinceNow:0]; long time = [date timeIntervalSince1970] * 1000; long intervalTime = time - LAST_CLICK_TIME1; if(0 &lt; intervalTime &amp;&amp; intervalTime &lt; opIntervalTime)&#123; return true; &#125; LAST_CLICK_TIME1 = time; return false;&#125; å‚æ•°è¯´æ˜æ³¨é‡Šå†™å¾—å¾ˆæ¸…æ¥šï¼Œç”¨æ³•ä¹Ÿå¾ˆç®€å•ï¼Œå°±ä¸å¤šè¯´äº†ã€‚ æ–¹å¼äºŒï¼ˆè¾ƒä¸»æµï¼‰ç»™UIButtonå†™ä¸ªåˆ†ç±»ï¼ˆcategoryï¼‰1.åˆ†ç±».hæ–‡ä»¶ 12345#import &lt;UIKit/UIKit.h&gt;@interface UIButton (FMExtension)/** ä¸¤æ¬¡ç‚¹å‡»æœ€å¤§æ—¶é—´é—´éš”ï¼Œåœ¨æ­¤æ—¶é—´å†…ï¼Œæ‰€æœ‰ç‚¹å‡»äº‹ä»¶ä¸ä¸æ‰§è¡Œ */@property (nonatomic, assign) NSTimeInterval fm_multipleClickInterval;@end ç”±äºcategory ä¸­å£°æ˜çš„propertyï¼Œåªä¼šç”Ÿæˆå±æ€§çš„æ–¹æ³•è€Œä¸ä¼šç”Ÿæˆæ–¹æ³•çš„å®ç°åŠâ€œ_â€å˜é‡ï¼Œæ‰€ä»¥.mä¸­è¦ç”¨runtimeè¿›è¡Œå±æ€§çš„åŠ¨æ€ç»‘å®šã€‚2.åˆ†ç±».m æ–‡ä»¶å…·ä½“å®ç°æ­¥éª¤2.1å¼•å…¥runtimeå¤´æ–‡ä»¶ 12345678910#import &quot;UIButton+FMExtension.h&quot;#import &lt;objc/runtime.h&gt;@interface UIButton ()/** è®°å½•ä¸Šä¸€æ¬¡æ¥æ”¶ç‚¹å‡»äº‹ä»¶çš„æ—¶é—´ */@property(nonatomic, assign) NSTimeInterval fm_acceptEventTime;@end/** å…³è”å…³é”®å­— */static const char *UIControl_multipleClickInterval = &quot;fm_multipleClickInterval&quot;;static const char *UIControl_acceptEventTime = &quot;fm_acceptEventTime&quot;;@implementation UIButton (FMExtension) 2.2åŠ¨æ€å…³è”å¯¹è±¡1234567891011121314/** åŠ¨æ€å…³è”å¯¹è±¡ */- (void)setFm_multipleClickInterval:(NSTimeInterval)fm_multipleClickInterval &#123; //å››ä¸ªå‚æ•°ï¼šæºå¯¹è±¡ï¼Œå…³é”®å­—ï¼Œå…³è”çš„å¯¹è±¡å’Œä¸€ä¸ªå…³è”ç­–ç•¥ objc_setAssociatedObject(self, UIControl_multipleClickInterval, @(fm_multipleClickInterval), OBJC_ASSOCIATION_RETAIN_NONATOMIC);&#125;- (NSTimeInterval)fm_multipleClickInterval &#123; return [objc_getAssociatedObject(self, UIControl_multipleClickInterval) doubleValue];&#125;- (void)setFm_acceptEventTime:(NSTimeInterval)fm_acceptEventTime &#123; objc_setAssociatedObject(self, UIControl_acceptEventTime, @(fm_acceptEventTime), OBJC_ASSOCIATION_RETAIN_NONATOMIC);&#125;- (NSTimeInterval)fm_acceptEventTime &#123; return [objc_getAssociatedObject(self, UIControl_acceptEventTime) doubleValue];&#125; 2.3äº¤æ¢æ–¹æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445//äº¤æ¢æ–¹æ³•//ä»¥ä¸Šä¸»è¦æ˜¯å®ç°ä¸¤ä¸ªæ–¹æ³•çš„äº’æ¢,loadæ˜¯gcdçš„åªshareinstanceï¼Œæœæ–­ä¿è¯æ‰§è¡Œä¸€æ¬¡+ (void)load &#123; //è·å–ç€ä¸¤ä¸ªæ–¹æ³• //ç³»ç»Ÿæ–¹æ³• Method sysMethod = class_getInstanceMethod(self, @selector(sendAction:to:forEvent:)); SEL sysM = @selector(sendAction:to:forEvent:); //è‡ªå®šä¹‰æ–¹æ³• Method myMethod = class_getInstanceMethod(self, @selector(fm_sendAction:to:forEvent:)); SEL myM = @selector(fm_sendAction:to:forEvent:); //æ·»åŠ æ–¹æ³•è¿›å»ï¼ˆç³»ç»Ÿæ–¹æ³•åæ‰§è¡Œè‡ªå·±çš„è‡ªå®šä¹‰å‡½æ•°ï¼Œç›¸å½“äºé‡å†™çˆ¶ç±»æ–¹æ³•ï¼‰ BOOL overrideSuccess = class_addMethod(self, sysM, method_getImplementation(myMethod), method_getTypeEncoding(myMethod)); //å¦‚æœæ·»åŠ æˆåŠŸ if (overrideSuccess) &#123; //è‡ªå®šä¹‰å‡½æ•°åæ‰§è¡Œç³»ç»Ÿå‡½æ•° class_replaceMethod(self, myM, method_getImplementation(sysMethod), method_getTypeEncoding(sysMethod)); &#125; else &#123; method_exchangeImplementations(sysMethod, myMethod); &#125; //è¿™æ ·ä¹Ÿå¯ä»¥äº¤æ¢æ–¹æ³•ï¼ˆä½†æ˜¯æ³¨æ„é¡ºåºï¼‰ /****** * *ä¸ªäººç†è§£ï¼š *ä¸ç®¡æ˜¯addè¿˜æ˜¯replaceå’Œç³»ç»Ÿé‡åçš„æ–¹æ³•ï¼Œéƒ½æ˜¯ç›¸å½“äºå¤åˆ¶äº†ä¸€ä¸ªå’Œç³»ç»Ÿé‡åçš„å‡½æ•°ï¼ˆä¹Ÿå°±æ˜¯ *ç›¸å½“äºç»§æ‰¿é‡å†™äº†çˆ¶ç±»æ–¹æ³• ps:åˆ†ç±»ä¸­ä¸æ”¯æŒç»§æ‰¿ï¼ç³»ç»Ÿå‘ç°æœ‰è¿™ä¸ªæ–¹æ³•ä¼šä¼˜å…ˆè°ƒç”¨ï¼‰ *ç³»ç»Ÿè‡ªåŠ¨å¤åˆ¶ä¸€ä¸ªä¸è‡ªå·±åŒåçš„æ–¹æ³•ç»™å¼€å‘äººå‘˜ç”¨ï¼Œä½†æ˜¯method_getImplementation(systemMethod) *è¿˜æ˜¯è·å–ç³»ç»Ÿè‡ªå¸¦æ–¹æ³•çš„å±æ€§ * ******/ /* class_replaceMethod(self, sysM, method_getImplementation(myMethod), method_getTypeEncoding(myMethod)); class_replaceMethod(self, myM, method_getImplementation(sysMethod), method_getTypeEncoding(sysMethod)); */&#125;- (void)fm_sendAction:(SEL)action to:(id)target forEvent:(UIEvent *)event &#123; if (NSDate.date.timeIntervalSince1970 - self.fm_acceptEventTime &lt; self.fm_multipleClickInterval) return; if (self.fm_multipleClickInterval &gt; 0) &#123; self.fm_acceptEventTime = NSDate.date.timeIntervalSince1970;//è®°å½•ä¸Šæ¬¡ç‚¹å‡»çš„æ—¶é—´ &#125; //è¿™é‡Œå¹¶ä¸æ˜¯å¾ªç¯è°ƒç”¨ï¼Œç”±äºäº¤æ¢äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œfm_sendAction:to:forEvent:ç°åœ¨å°±æ˜¯sendAction:to:forEvent: [self fm_sendAction:action to:target forEvent:event];&#125;@end ä»£ç æ³¨é‡Šå†™çš„æ¯”è¾ƒè¯¦ç»†äº†ï¼ˆè‡ªæˆ‘æ„Ÿè§‰è¿˜é˜”ä»¥å§ï¼‰ï¼Œå°±ä¸å†å¤šè¯´ä»€ä¹ˆã€‚PS: äº¤æ¢æ–¹æ³•é‚£ï¼Œæœ‰ä¸ªäººçš„ä¸€ç‚¹å°å°è§è§£ï¼Œä¸çŸ¥é“å¯¹ä¸å¯¹ï¼Œæ¬¢è¿å¤§ç‰›æ‰¹è¯„æŒ‡æ­£ï¼ï¼ï¼","categories":[{"name":"iOSå¼€å‘","slug":"iOSå¼€å‘","permalink":"http://blogzhou.top/categories/iOSå¼€å‘/"}],"tags":[{"name":"UI","slug":"UI","permalink":"http://blogzhou.top/tags/UI/"}]},{"title":"ç±»ä¼¼â€œä»Šæ—¥å¤´æ¡â€é¢‘é“ç¼–è¾‘åŠŸèƒ½UIå®ç°","slug":"t07.ç±»ä¼¼â€œä»Šæ—¥å¤´æ¡â€é¢‘é“ç¼–è¾‘åŠŸèƒ½UIå®ç°","date":"2017-10-12T07:32:08.000Z","updated":"2020-07-18T03:20:22.693Z","comments":true,"path":"2017/10/12/t07.ç±»ä¼¼â€œä»Šæ—¥å¤´æ¡â€é¢‘é“ç¼–è¾‘åŠŸèƒ½UIå®ç°/","link":"","permalink":"http://blogzhou.top/2017/10/12/t07.ç±»ä¼¼â€œä»Šæ—¥å¤´æ¡â€é¢‘é“ç¼–è¾‘åŠŸèƒ½UIå®ç°/","excerpt":"FMChannelEditè¿™æ˜¯ä¸€ä¸ªç±»ä¼¼â€œä»Šæ—¥å¤´æ¡â€é¢‘é“ç¼–è¾‘åŠŸèƒ½ å‰è¨€ ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šç¼–ç¨‹ï¼šè¿™ä¸ªé¡¹ç›®çš„channelç¼–è¾‘é¡µé¢æ˜¯åœ¨ä¸¤ä½å‰è¾ˆä»£ç çš„åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥çš„ä¿®æ”¹ï¼Œå°è£…ã€‚å‰è¾ˆä¸€ï¼šcodeWorm2015(GitHubID)æºç åœ°å€å‰è¾ˆäºŒï¼šHelloYeah(GitHubID)æºç åœ°å€ PSï¼šè¿™ä¸¤ä½å…·ä½“æ˜¯è°ï¼Œæˆ‘ä¹Ÿä¸è®¤è¯†ï¼Œæƒ³å’Œä»–ä»¬å…·ä½“äº¤æµçš„ï¼Œè¯·å»GitHubä¸Šç»™ä»–ä»¬ç•™è¨€ï¼Œæˆ‘è¿™èƒ½å¸®ä½ ä»¬åˆ°è¿™äº†ã€‚ è¿›å…¥æ­£é¢˜ ï¼ˆä»¥ä¸‹å‡ä¸ºä¸ªäººè§è§£ï¼Œç†è§£ä¸å¯¹è¿˜æœ›è§è°…ï¼‰","text":"FMChannelEditè¿™æ˜¯ä¸€ä¸ªç±»ä¼¼â€œä»Šæ—¥å¤´æ¡â€é¢‘é“ç¼–è¾‘åŠŸèƒ½ å‰è¨€ ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šç¼–ç¨‹ï¼šè¿™ä¸ªé¡¹ç›®çš„channelç¼–è¾‘é¡µé¢æ˜¯åœ¨ä¸¤ä½å‰è¾ˆä»£ç çš„åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥çš„ä¿®æ”¹ï¼Œå°è£…ã€‚å‰è¾ˆä¸€ï¼šcodeWorm2015(GitHubID)æºç åœ°å€å‰è¾ˆäºŒï¼šHelloYeah(GitHubID)æºç åœ°å€ PSï¼šè¿™ä¸¤ä½å…·ä½“æ˜¯è°ï¼Œæˆ‘ä¹Ÿä¸è®¤è¯†ï¼Œæƒ³å’Œä»–ä»¬å…·ä½“äº¤æµçš„ï¼Œè¯·å»GitHubä¸Šç»™ä»–ä»¬ç•™è¨€ï¼Œæˆ‘è¿™èƒ½å¸®ä½ ä»¬åˆ°è¿™äº†ã€‚ è¿›å…¥æ­£é¢˜ ï¼ˆä»¥ä¸‹å‡ä¸ºä¸ªäººè§è§£ï¼Œç†è§£ä¸å¯¹è¿˜æœ›è§è°…ï¼‰ ä¹‹æ‰€ä»¥ç”¨ç€ä¸¤ä½å‰è¾ˆçš„ä»£ç ï¼Œæ˜¯å› ä¸ºï¼Œè™½ç„¶å®ç°æ˜¯åŒä¸€UIæ•ˆæœï¼Œä½†æ˜¯æ€è·¯ä¸åŒï¼Œä¸‹é¢ä¸€ä¸€è®²è§£æ–¹å¼ä¸€ï¼š(å¯¹åº”å‰è¾ˆä¸€çš„å®ç°æ€è·¯) æ€è·¯ï¼šå®Œå…¨è‡ªå®šä¹‰ã€‚è‡ªå®šä¹‰channelViewï¼ˆé¡¹ç›®ä¸­åç§°ï¼šTouchViewï¼‰ç»§æ‰¿äºUIView,ç»‘å®šéœ€è¦çš„labelï¼ŒimageViewï¼Œpan,tap,longPressæ‰‹åŠ¿ï¼Œåœ¨å¯¹åº”çš„æ‰‹åŠ¿å®ç°ä¸­è®¡ç®—å‡ºæ¯ä¸ªchannelçš„indexï¼Œç„¶ååˆ·æ–°frameï¼ˆå…·ä½“å®ç°è¯·å‚è€ƒä»£ç ï¼‰ ä¼˜ç‚¹ï¼šè‡ªå®šä¹‰ç¨‹åº¦é«˜ï¼Œè‡ªå®šä¹‰åŠŸèƒ½çš„æ·»åŠ ä¿®æ”¹æ¯”è¾ƒæ–¹ä¾¿ï¼Œå°¤å…¶åŠ¨ç”»æ¯”è¾ƒæµç•…ï¼› ç¼ºç‚¹ï¼šè¦åŒæ—¶å¤„ç†å››ä¸ªæ•°ç»„çš„æ•°æ®ï¼ˆä¸¤ä¸ªæ•°æ®æºçš„ï¼Œä¸¤ä¸ªè§†å›¾çš„ï¼‰ï¼Œframeåˆ·æ–°é¢‘ç‡è¾ƒé«˜ï¼Œä¸”éƒ½æ˜¯è‡ªå·±å®ç°çš„frameåˆ·æ–°ï¼Œæ€§èƒ½å¯èƒ½ä¸å¦‚åŸç”Ÿçš„æ§ä»¶ï¼ˆåªæ˜¯å¯èƒ½ï¼‰ æˆ‘çš„å®Œå–„ï¼šåŸæ¡†æ¶åŠŸèƒ½å·²ç»æ¯”è¾ƒå®Œå–„ï¼Œåªæ˜¯ç¼ºå°‘ä¸ªä¸‹æ»‘ç§»é™¤åŠŸèƒ½ï¼ˆå·²æ·»åŠ ï¼‰ GIFæ•ˆæœå›¾ï¼š æ–¹å¼äºŒï¼š(å¯¹åº”å‰è¾ˆäºŒçš„å®ç°æ€è·¯) æ€è·¯ï¼šåœ¨UICollectionViewçš„åŸºç¡€ä¸Šè¿›ä¸€æ­¥çš„ä¿®æ”¹å°è£…ã€‚ï¼ˆå…·ä½“å®ç°è¯·å‚è€ƒä»£ç ï¼‰ ä¼˜ç‚¹ï¼šåªéœ€è¦å¤„ç†ä¸¤ä¸ªæ•°æ®æºå°±å¯ä»¥ï¼ˆä¸Šéƒ¨&amp;ä¸‹éƒ¨ï¼‰ï¼Œè§†å›¾ç”±UICollectionViewè‡ªå·±å¤„ç†ï¼ŒåŒ…æ‹¬åŠ¨ç”»æ•ˆæœä¹Ÿæ˜¯ç³»ç»Ÿè‡ªå·±å®Œæˆï¼› ç¼ºç‚¹ï¼šåŸºäºUICollectionViewï¼ŒåŠŸèƒ½çš„æ‹“å±•å—åˆ°ä¸€å®šçš„é™åˆ¶ï¼ŒåŠ¨ç”»ä¸å¦‚æ–¹å¼ä¸€çœ‹è¿™èˆ’æœã€‚ æˆ‘çš„å®Œå–„ï¼šåŸæ¡†æ¶åŠŸèƒ½è¾ƒå°‘ï¼ˆç›¸å¯¹äºä»Šæ—¥å¤´æ¡çš„channelç¼–è¾‘æ•ˆæœï¼‰ï¼Œåªæœ‰ä¸Šéƒ¨åˆ†çš„æ’åºå’Œåˆ é™¤ã€‚ï¼ˆä¸‹éƒ¨åŠå…¶ä»–åŠŸèƒ½å·²æ·»åŠ ï¼‰ GIFæ•ˆæœå›¾ï¼š å…¶ä»–åŠŸèƒ½ æ ‡é¢˜å†…å®¹å¯¹åº”æ»‘åŠ¨ï¼Œæ»‘åŠ¨åæ ‡é¢˜å±…ä¸­ æ ‡é¢˜éšæ»‘åŠ¨ï¼Œå­—ä½“å¤§å°å˜åŒ– å­è§†å›¾å†…ï¼Œæœ‰é¢œè‰²æ¸å˜å°Demo GIFæ•ˆæœå›¾ï¼š QQ Popoverå¼¹æ¡†æ•ˆæœGIFæ•ˆæœå›¾ï¼š Demoä¸‹è½½","categories":[{"name":"iOSå¼€å‘","slug":"iOSå¼€å‘","permalink":"http://blogzhou.top/categories/iOSå¼€å‘/"}],"tags":[{"name":"UI","slug":"UI","permalink":"http://blogzhou.top/tags/UI/"}]},{"title":"UICollectionViewä¸‹æ‹‰åˆ·æ–°é—ªä¸€ä¸‹é—®é¢˜è§£å†³","slug":"t03.UICollectionViewä¸‹æ‹‰åˆ·æ–°é—ªä¸€ä¸‹é—®é¢˜è§£å†³","date":"2017-10-12T07:31:08.000Z","updated":"2020-07-18T03:20:22.695Z","comments":true,"path":"2017/10/12/t03.UICollectionViewä¸‹æ‹‰åˆ·æ–°é—ªä¸€ä¸‹é—®é¢˜è§£å†³/","link":"","permalink":"http://blogzhou.top/2017/10/12/t03.UICollectionViewä¸‹æ‹‰åˆ·æ–°é—ªä¸€ä¸‹é—®é¢˜è§£å†³/","excerpt":"","text":"æœ€è¿‘å†™é¡¹ç›®é‡åˆ°UICollectionViewçš„ä¸‹æ‹‰åˆ·æ–°æ•°æ®å›æ¥æ—¶ï¼Œå±å¹•ä¼šé—ªä¸€ä¸‹ï¼Œåœ¨ç½‘ä¸Šæ‰¾äº†å‡ ä¸ªæ–¹æ³•ï¼Œäº²è‡ªè¯•äº†éƒ½ä¸å¥½ä½¿ï¼Œåæ¥è‡ªå·±è¯•äº†ä¸‹å›ä¸»çº¿ç¨‹åˆ·æ–°UIï¼Œå‘ç°å¯ä»¥ï¼Œä»£ç å¦‚ä¸‹:123dispatch_async(dispatch_get_main_queue(), ^&#123; [self.collectionView reloadData]; &#125;); å¤§å®¶éƒ½çŸ¥é“ï¼Œåœ¨å­çº¿ç¨‹åˆ·æ–°UIæ˜¯å¾ˆå±é™©çš„ï¼Œæœ‰æ—¶ä¼šå‡ºç°è«åçš„Bug, æœ‰äº›æƒ…å†µç”šè‡³ä¼šç›´æ¥å´©æºƒã€‚è€Œç½‘ç»œæ•°æ®çš„è¯·æ±‚ä¸€èˆ¬éƒ½æ˜¯åœ¨å­çº¿ç¨‹è¿›è¡Œçš„ï¼Œæ•°æ®å›æ¥æ—¶å»åˆ·æ–°UIï¼ˆUITableView å’Œ UIConllectionViewï¼‰ä½†æ˜¯UITableViewåœ¨å­çº¿ç¨‹åˆ·æ–°UIæ²¡æœ‰å‡ºç°è¿™ä¸ªBugï¼ˆä¼°è®¡è‹¹æœåšäº†ä¼˜åŒ–ï¼‰ã€‚","categories":[{"name":"iOSå¼€å‘","slug":"iOSå¼€å‘","permalink":"http://blogzhou.top/categories/iOSå¼€å‘/"}],"tags":[{"name":"UI","slug":"UI","permalink":"http://blogzhou.top/tags/UI/"}]},{"title":"WYYKTScrollæ§ä»¶æ‚¬åœ","slug":"t02.WYYKTScrollæ§ä»¶æ‚¬åœ","date":"2017-10-12T07:25:30.000Z","updated":"2020-07-18T03:20:22.695Z","comments":true,"path":"2017/10/12/t02.WYYKTScrollæ§ä»¶æ‚¬åœ/","link":"","permalink":"http://blogzhou.top/2017/10/12/t02.WYYKTScrollæ§ä»¶æ‚¬åœ/","excerpt":"æ•ˆæœç¤ºä¾‹ è¿™æ˜¯ä¸€ä¸ªæ§ä»¶æ‚¬åœçš„UIæ•ˆæœå®ç°ï¼Œç±»ä¼¼äºç½‘æ˜“äº‘è¯¾å ‚çš„è¯¦æƒ…é¡µUIæ•ˆæœ","text":"æ•ˆæœç¤ºä¾‹ è¿™æ˜¯ä¸€ä¸ªæ§ä»¶æ‚¬åœçš„UIæ•ˆæœå®ç°ï¼Œç±»ä¼¼äºç½‘æ˜“äº‘è¯¾å ‚çš„è¯¦æƒ…é¡µUIæ•ˆæœ 1.å·¥ç¨‹å¼•å…¥FMBaseViewController, å¹¶æ·»åŠ è¦è‡ªå®šä¹‰çš„controller æœ‰å…³å¤´éƒ¨imageåŠbuttonçš„ç›¸å…³è®¾ç½®é€šè¿‡ï¼ŒFMBaseViewControllerçš„å±æ€§è¿›è¡Œè®¾ç½®ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š123456789FMBaseViewController *bvc = [[FMBaseViewController alloc] init];bvc.btnBackColor = [UIColor cyanColor];bvc.btnTitleArr = @[@&quot;å¼ ä¸‰&quot;, @&quot;æå››&quot;, @&quot;ç‹äº”&quot;];bvc.indicatorColor = [UIColor yellowColor];bvc.isIndicatorHidden = YES;bvc.headImage_H = 100;bvc.button_H = 30;bvc.headImageName = @&quot;picture_3&quot;;bvc.isStretch = NO; 2.æ³¨æ„ï¼šè‡ªå®šä¹‰çš„controller å¿…é¡»ç»§æ‰¿äºFMParentViewController.h, å¹¶ä¸”å­æ§åˆ¶å™¨æš‚æ—¶åªæ”¯æŒUITableViewController å­æ§åˆ¶å™¨ç±»å‹1 ï¼šFMTableViewStylePlain åˆå§‹åŒ–ä»£ç å¦‚ä¸‹ï¼š 123FMT2ViewController *t2 = [[FMT2ViewController alloc] initWithTableViewStyle:FMTableViewStylePlain];æˆ–è€…ï¼ˆdefaultï¼‰FMT1ViewController *t1 = [[FMT1ViewController alloc] init]; å­æ§åˆ¶å™¨ç±»å‹2ï¼šFMTableViewStyleGroup åˆå§‹åŒ–ä»£ç å¦‚ä¸‹ï¼š 1234FMT2ViewController *t2 = [[FMT2ViewController alloc] initWithTableViewStyle:FMTableViewStyleGrouped];æˆ–è€…ï¼ˆç”¨å±æ€§ä¿®æ”¹ï¼‰FMT1ViewController *t2 = [[FMT1ViewController alloc] init];t2.tableViewStyle = FMTableViewStyleGrouped; 3.å¤´éƒ¨è§†å›¾æ˜¯å¦å¯ä»¥æ‹‰ä¼¸ï¼š 1isStretch å±æ€§ï¼ˆdefault is YESï¼‰ æµ‹è¯•æ•ˆæœæŸ¥çœ‹ï¼Œåœ¨AppDelegate.m çš„launchå‡½æ•°ä¸­æ·»åŠ ï¼ˆæˆ–æ›¿æ¢ï¼‰å¦‚ä¸‹ä»£ç ï¼š 123FMBaseViewController *bvc = [[FMBaseViewController alloc] init]; self.window.rootViewController = bvc; [self.window makeKeyAndVisible]; è‡ªå®šä¹‰å­controlleråˆå§‹åŒ–åä¼ å…¥è¯¥æ•°ç»„childVCArrï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345FMBaseViewController *bvc = [[FMBaseViewController alloc] init];FMT1ViewController *t1 = [[FMT1ViewController alloc] init];FMT2ViewController *t2 = [[FMT2ViewController alloc] initWithTableViewStyle:FMTableViewStyleGrouped];FMT3ViewController *t3= [[FMT3ViewController alloc] init];bvc.childVCArr = @[t1, t2, t3]; ####å­æ§åˆ¶å™¨æœ€å¥½ä¸è¦è¶…è¿‡5ä¸ªï¼Œ æš‚ä¸æ”¯æŒæ»‘åŠ¨ï¼ˆä»¥åå¯èƒ½æ·»åŠ ï¼Œæ•¬è¯·æœŸå¾…ï¼ï¼‰ headViewä¸Šçš„å†…å®¹å¯è‡ªå®šä¹‰æ·»åŠ ï¼Œé€šè¿‡ ftc.headViewå¯æ‹¿åˆ°headéƒ¨åˆ†çš„è§†å›¾æ·»åŠ è‡ªå·±çš„æ§ä»¶ã€‚ æ”¯æŒcocoaPods å®‰è£… 1234pod search WYTeståœ¨Podfileä¸­æ·»åŠ pod &quot;WYTest&quot;pod install || pod update ###2018.08.01æ›´æ–° ####å¢åŠ å¯¹UICollectionViewçš„æ”¯æŒï¼Œcontrollerå¿…é¡»ç»§æ‰¿è‡ªFMBaseCollectionViewController ç¤ºä¾‹ä»£ç  1234FMT1ViewController *t1 = [[FMT1ViewController alloc] init];t1.tableViewStyle = FMTableViewStyleGrouped;FMC1ViewController *c1 = [[FMC1ViewController alloc] init];FMT3ViewController *t3= [[FMT3ViewController alloc] init]; æ•ˆæœç¤ºä¾‹ - å…¨collectionView æ•ˆæœç¤ºä¾‹ - collectionView å’Œ tableViewæ··åˆ ##github Demoä¸‹è½½åœ°å€ç‚¹å‡»å»ä¸‹è½½","categories":[{"name":"iOSå¼€å‘","slug":"iOSå¼€å‘","permalink":"http://blogzhou.top/categories/iOSå¼€å‘/"}],"tags":[{"name":"UI","slug":"UI","permalink":"http://blogzhou.top/tags/UI/"}]},{"title":"å¦‚ä½•åˆ©ç”¨pod trunkå‘å¸ƒç¨‹åº","slug":"t01.å¦‚ä½•ä½¿é¡¹ç›®æ”¯æŒcocoaPods","date":"2017-10-11T06:16:01.000Z","updated":"2020-07-18T03:20:22.696Z","comments":true,"path":"2017/10/11/t01.å¦‚ä½•ä½¿é¡¹ç›®æ”¯æŒcocoaPods/","link":"","permalink":"http://blogzhou.top/2017/10/11/t01.å¦‚ä½•ä½¿é¡¹ç›®æ”¯æŒcocoaPods/","excerpt":"refer to CoderMJLeeæ³¨å†Œ pod trunk register é‚®ç®± &#39;ç”¨æˆ·å&#39; --description=&#39;ç”µè„‘æè¿°&#39; æŸ¥æ”¶é‚®ä»¶ å¦‚æœæ˜¯QQé‚®ç®±ï¼Œå¯èƒ½ä¼šè¢«æ”¾åˆ°â€œåƒåœ¾ç®±â€ä¸­ï¼Œå¹¶ä¸ä¸€å®šæ˜¯â€œæ”¶ä»¶ç®±â€ ç‚¹å‡»é‚®ä»¶ä¸­çš„é“¾æ¥ï¼šhttps://trunk.cocoapods.org/sessions/verify/xxxx æ¥ä¸‹æ¥æŸ¥çœ‹ä¸ªäººä¿¡æ¯","text":"refer to CoderMJLeeæ³¨å†Œ pod trunk register é‚®ç®± &#39;ç”¨æˆ·å&#39; --description=&#39;ç”µè„‘æè¿°&#39; æŸ¥æ”¶é‚®ä»¶ å¦‚æœæ˜¯QQé‚®ç®±ï¼Œå¯èƒ½ä¼šè¢«æ”¾åˆ°â€œåƒåœ¾ç®±â€ä¸­ï¼Œå¹¶ä¸ä¸€å®šæ˜¯â€œæ”¶ä»¶ç®±â€ ç‚¹å‡»é‚®ä»¶ä¸­çš„é“¾æ¥ï¼šhttps://trunk.cocoapods.org/sessions/verify/xxxx æ¥ä¸‹æ¥æŸ¥çœ‹ä¸ªäººä¿¡æ¯ pod trunk me 123456- Name: MJ Lee- Email: xxxxxx@qq.com- Since: January 28th, 03:53- Pods: None- Sessions: - January 28th, 04:28 - June 5th, 04:34. IP: xxx.xxx.xxx.xxx Description: Macbook Pro ä¸­é—´å¯èƒ½é‡åˆ°è¿™ç§é”™è¯¯ 1NoMethodError - undefined method &apos;last&apos; for #&lt;Netrc::Entry:0x007fc59c246378&gt; è¿™æ—¶å€™éœ€è¦å°è¯•æ›´æ–°gemæºæˆ–è€…pod sudo gem update --system sudo gem install cocoapods sudo gem install cocospods-trunk åˆ›å»ºpodspecæ–‡ä»¶ æ¥ä¸‹æ¥éœ€è¦åœ¨é¡¹ç›®æ ¹è·¯å¾„åˆ›å»ºä¸€ä¸ªpodspecæ–‡ä»¶æ¥æè¿°ä½ çš„é¡¹ç›®ä¿¡æ¯ pod spec create æ–‡ä»¶å æ¯”å¦‚pod spec cretae MJExtensionå°±ä¼šç”Ÿæˆä¸€ä¸ªMJExtension.podspec å¡«å†™podspecå†…å®¹1234567891011121314Pod::Spec.new do |s| s.name = &quot;MJExtension&quot; s.version = &quot;0.0.1&quot; s.summary = &quot;The fastest and most convenient conversion between JSON and model&quot; s.homepage = &quot;https://github.com/CoderMJLee/MJExtension&quot; s.license = &quot;MIT&quot; s.author = &#123; &quot;MJLee&quot; =&gt; &quot;xxxxx@qq.com&quot; &#125; s.social_media_url = &quot;http://weibo.com/exceptions&quot; s.source = &#123; :git =&gt; &quot;https://github.com/CoderMJLee/MJExtension.git&quot;, :tag =&gt; s.version &#125; s.frameworks = &quot;UIKit&quot;, &quot;Foundation&quot; s.platform = :ios, &quot;8.0&quot; s.source_files = &quot;MJExtensionExample/MJExtensionExample/MJExtension&quot; s.requires_arc = trueend å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç°åœ¨çš„podspecå¿…é¡»æœ‰tagï¼Œæ‰€ä»¥æœ€å¥½å…ˆæ‰“ä¸ªtagï¼Œä¼ åˆ°github git tag 0.0.1 git push --tags æ£€æµ‹podspecè¯­æ³• pod spec lint MJExtension.podspec å‘å¸ƒpodspec pod trunk push MJExtension.podspec å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡å‘å¸ƒpodï¼Œéœ€è¦å»https://trunk.cocoapods.org/claims/newè®¤é¢†pod æ£€æµ‹ pod setup : åˆå§‹åŒ– pod repo update : æ›´æ–°ä»“åº“ pod search MJExtension ä»“åº“æ›´æ–° å¦‚æœä»“åº“æ›´æ–°æ…¢ï¼Œå¯ä»¥è€ƒè™‘æ›´æ¢ä»“åº“é•œåƒ pod repo remove master pod repo add master http://git.oschina.net/akuandev/Specs.gitpodspec æ›´æ–°ç‰ˆæœ¬æ­¥éª¤ 1.ä»£ç ä¿®æ”¹ 2.ä¿®æ”¹podspecæ–‡ä»¶ä¸­çš„version ç‰ˆæœ¬å· 3.git tag (åè·Ÿç‰ˆæœ¬å·)&amp; git push â€”-tagsåŒæ­¥è¿œç¨‹ä»“åº“ç‰ˆæœ¬å· 4.å°†æœ¬åœ°çš„ä»£ç æäº¤è¿œç¨‹ä»“åº“ï¼ˆæ›´æ–°ç‰ˆæœ¬å·ï¼‰ 5.pod trunk push xxx.podspec æäº¤æœ€æ–°çš„podspecæ–‡ä»¶ æ³¨æ„ï¼šæäº¤çš„ä»£ç é‡Œæœ€å¥½ä¸è¦æœ‰è­¦å‘Š","categories":[{"name":"iOSå¼€å‘","slug":"iOSå¼€å‘","permalink":"http://blogzhou.top/categories/iOSå¼€å‘/"}],"tags":[{"name":"tool","slug":"tool","permalink":"http://blogzhou.top/tags/tool/"}]},{"title":"æ–‡ä»¶æµã€ç½‘ç»œæ“ä½œã€æœåŠ¡ç«¯Webå¼€å‘åŸºç¡€","slug":"old_10.æ–‡ä»¶æµã€ç½‘ç»œæ“ä½œã€æœåŠ¡ç«¯Webå¼€å‘åŸºç¡€","date":"2017-01-20T12:30:50.000Z","updated":"2020-12-16T08:04:20.789Z","comments":true,"path":"2017/01/20/old_10.æ–‡ä»¶æµã€ç½‘ç»œæ“ä½œã€æœåŠ¡ç«¯Webå¼€å‘åŸºç¡€/","link":"","permalink":"http://blogzhou.top/2017/01/20/old_10.æ–‡ä»¶æµã€ç½‘ç»œæ“ä½œã€æœåŠ¡ç«¯Webå¼€å‘åŸºç¡€/","excerpt":"","text":"æ–‡ä»¶æ“ä½œæ–‡ä»¶ç›‘è§†åˆ©ç”¨æ–‡ä»¶ç›‘è§†å®ç°è‡ªåŠ¨ markdown æ–‡ä»¶è½¬æ¢ ç›¸å…³é“¾æ¥ï¼š https://github.com/chjj/marked https://github.com/Browsersync/browser-sync å®ç°æ€è·¯ï¼š åˆ©ç”¨fsæ¨¡å—çš„æ–‡ä»¶ç›‘è§†åŠŸèƒ½ç›‘è§†æŒ‡å®šMDæ–‡ä»¶ å½“æ–‡ä»¶å‘ç”Ÿå˜åŒ–åï¼Œå€ŸåŠ©markedåŒ…æä¾›çš„markdown to htmlåŠŸèƒ½å°†æ”¹å˜åçš„MDæ–‡ä»¶è½¬æ¢ä¸ºHTML å†å°†å¾—åˆ°çš„HTMLæ›¿æ¢åˆ°æ¨¡ç‰ˆä¸­ æœ€ååˆ©ç”¨BrowserSyncæ¨¡å—å®ç°æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°browsersyncéœ€è¦ç”¨åˆ°Python 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950const fs = require('fs');const path = require('path');var marked = require('marked');var bs = require('browser-sync').create();var target = path.join(__dirname, process.argv[2] || './README.md');var filename = path.basename(target, path.extname(target)) + '.html';var targetHtml = path.join(path.dirname(target), filename);bs.init(&#123; server: path.dirname(target), index: filename, notify: false&#125;);bs.reload(filename);var template = `&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;&lt;/title&gt; &lt;style&gt;&#123;&#123;&#123;styles&#125;&#125;&#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;article class=\"markdown\"&gt; &#123;&#123;&#123;body&#125;&#125;&#125; &lt;/article&gt;&lt;/body&gt;&lt;/html&gt;`;fs.readFile(path.join(__dirname, './markdown.css'), 'utf8', (error, css) =&gt; &#123; if (error) throw error; template = template.replace('&#123;&#123;&#123;styles&#125;&#125;&#125;', css); var handler = (current, previous) =&gt; &#123; fs.readFile(target, 'utf8', (error, content) =&gt; &#123; var html = template.replace('&#123;&#123;&#123;body&#125;&#125;&#125;', marked(content)); fs.writeFile(targetHtml, html, (error) =&gt; &#123; if (!error) &#123; console.log(`updated@$&#123;new Date()&#125;`); bs.reload(filename); &#125; &#125;); &#125;); &#125;; handler(); fs.watchFile(target, &#123; interval: 100 &#125;, handler);&#125;); æ–‡ä»¶æµä»€ä¹ˆæ˜¯æµ ç°å®è¿‡ç¨‹çš„æµ æ°´æµï¼Œäººæµ åœ¨ç¨‹åºå¼€å‘çš„æ¦‚å¿µä¸­ æµæ˜¯ç¨‹åºè¾“å…¥æˆ–è¾“å‡ºçš„ä¸€ä¸ªè¿ç»­çš„å­—èŠ‚åºåˆ— æ–‡ä»¶æµã€ç½‘ç»œæµ è®¾å¤‡(ä¾‹å¦‚é¼ æ ‡ã€é”®ç›˜ã€ç£ç›˜ã€å±å¹•ã€è°ƒåˆ¶è§£è°ƒå™¨å’Œæ‰“å°æœº)çš„è¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯ç”¨æµæ¥å¤„ç†çš„ã€‚ Nodeä¸­çš„æµæ“ä½œ åœ¨ Node æ ¸å¿ƒæ¨¡å— fs ä¸­å®šä¹‰äº†ä¸€äº›ä¸æµç›¸å…³çš„ API fs.createReadStream() =&gt; å¾—åˆ°ä¸€ä¸ªReadableStream fs.createWriteStream() =&gt; å¾—åˆ°ä¸€ä¸ªWritableStream è¯»å–æµå¸¸ç”¨ APIEventï¼š data end error Methodï¼š read([size])ã€ pause()ã€ isPause()ã€ resume()ã€ setEncoding(encoding)ã€ pipe(destination[, options])ã€ unpipe([destination]) å†™å…¥æµå¸¸ç”¨ APIEvent: error pipe Methodï¼š write(chunk[, encoding][, callback]) end([chunk][, encoding][, callback]) setDefaultEncoding(encoding) ç½‘ç»œæ“ä½œå¦‚ä½•è®¡ç®—å¾ªç¯èŠ‚é•¿åº¦å‘¢ï¼Ÿ æƒ³æƒ³æˆ‘ä»¬æ‰‹ç®—ï¼Œå¦‚æœä½™æ•°æ¯”é™¤æ•°å°ï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢è¡¥0ç„¶åå†é™¤ã€‚ä¹Ÿå°±æ˜¯è¯´è¡¥é›¶ä¹‹åçš„æ•°æ˜¯ä¸‹ä¸€æ¬¡çš„è¢«é™¤æ•°ã€‚å¦‚æœè¢«é™¤æ•°é‡å¤å‡ºç°ï¼Œé™¤æ•°ç¡®å®šçš„ï¼Œé‚£ä¹ˆå•†å’Œä½™æ•°ä¹Ÿå°±æ˜¯ä¸€æ ·çš„ã€‚è¿™æ—¶ï¼Œå¾ªç¯èŠ‚å°±å‡ºç°äº†ã€‚ ä¸‹é¢çš„å‡½æ•°åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œ è¡¥é›¶æ“ä½œæŸ¥æ‰¾æœ‰æ²¡æœ‰åŒæ ·çš„è¢«é™¤æ•°å­˜åœ¨ï¼Œå¦‚æœæœ‰ï¼Œå°±æ‰¾åˆ°äº†å¾ªç¯èŠ‚ï¼Œè®¡ç®—å¾ªç¯èŠ‚é•¿åº¦å¹¶è¿”å›ã€‚åœ¨æ²¡æœ‰æ‰¾åˆ°çš„å‰æä¸‹ï¼ŒæŠŠå½“å‰è¢«é™¤æ•°è®°å½•ä¸‹æ¥ï¼Œå¹¶å¾—åˆ°ä½™æ•°ä½œä¸ºä¸‹ä¸€æ¬¡çš„è¢«é™¤æ•°ã€‚è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œå¦‚æœæŸä¸€æ¬¡å‡ºç°äº†é™¤å°½çš„æƒ…å†µï¼Œè¯´æ˜è¯¥åˆ†æ•°æ˜¯æœ‰é™å°æ•°ï¼Œå¾ªç¯èŠ‚é•¿åº¦æ˜¯0ã€‚JavaScript123456789101112131415161718192021222324252627282930console.log(foo(11, 3)); console.log(foo(1, 7));; console.log(foo(2, 10));; function foo(a, b) &#123; if (!(a % b)) &#123; return `$&#123;a&#125;Ã·$&#123;b&#125;:$&#123;a / b&#125;`; &#125; var all = (a / b).toString().split(&apos;.&apos;); var i = getCycleSection(a, b); if(i) return `$&#123;a&#125;Ã·$&#123;b&#125;: $&#123;all[0]&#125;.&#123;$&#123;all[1].substr(0, i) &#125;&#125;`; return `$&#123;a&#125;Ã·$&#123;b&#125;: $&#123;a / b&#125;`;&#125;function getCycleSection(n, m) &#123; var temp = []; while (true) &#123; while (n &lt; m) &#123; n *= 10; &#125; var index = temp.indexOf(n); if (index &gt;= 0) &#123; return temp.length - index; &#125; temp.push(n); n %= m; if (!n) return 0; &#125;&#125;","categories":[{"name":"javascript","slug":"javascript","permalink":"http://blogzhou.top/categories/javascript/"}],"tags":[{"name":"JS","slug":"JS","permalink":"http://blogzhou.top/tags/JS/"}]},{"title":"node-lesson6","slug":"old_09.node-lesson6","date":"2016-12-28T12:30:50.000Z","updated":"2020-12-16T07:54:46.324Z","comments":true,"path":"2016/12/28/old_09.node-lesson6/","link":"","permalink":"http://blogzhou.top/2016/12/28/old_09.node-lesson6/","excerpt":"node-lesson6å¤ä¹ 1.1å¤ä¹ ç½‘ç»œç¼–ç¨‹ ä»€ä¹ˆæ˜¯ç½‘ç»œç¼–ç¨‹ ä½¿ç”¨ node è¿›è¡Œç½‘ç»œç¼–ç¨‹éœ€è¦ä½¿ç”¨å…¶å®ƒwebæœåŠ¡å™¨ä½œä¸ºå®¹å™¨å— ä»€ä¹ˆæ˜¯åè®®ï¼Ÿä»€ä¹ˆæ˜¯httpåè®®ï¼Ÿ åœ¨ç½‘ç»œç¼–ç¨‹ä¸­ï¼Œä¸ºä»€ä¹ˆè¦æœ‰åè®®ï¼Ÿåˆ¶å®šåè®®æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ 1.2 httpåè®®","text":"node-lesson6å¤ä¹ 1.1å¤ä¹ ç½‘ç»œç¼–ç¨‹ ä»€ä¹ˆæ˜¯ç½‘ç»œç¼–ç¨‹ ä½¿ç”¨ node è¿›è¡Œç½‘ç»œç¼–ç¨‹éœ€è¦ä½¿ç”¨å…¶å®ƒwebæœåŠ¡å™¨ä½œä¸ºå®¹å™¨å— ä»€ä¹ˆæ˜¯åè®®ï¼Ÿä»€ä¹ˆæ˜¯httpåè®®ï¼Ÿ åœ¨ç½‘ç»œç¼–ç¨‹ä¸­ï¼Œä¸ºä»€ä¹ˆè¦æœ‰åè®®ï¼Ÿåˆ¶å®šåè®®æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ 1.2 httpåè®® 1.3session&amp;cookieç½‘ç«™çš„ä¼˜åŒ–â€”â€“&gt;æ€æƒ³12345671.èƒ½å‹ç¼©çš„å‹ç¼©èƒ½åˆå¹¶çš„åˆå¹¶å°‘ä¸€ä¸ªscriptä¹Ÿå¥½ï¼Œå°‘ä¸€æ¬¡è¯·æ±‚ 2.å°‘ç”¨jså»éå†å¯¹è±¡æˆ–è€…å†™forå¾ªç¯3.èƒ½æå‰è¿ç®—å¥½çš„æå‰è¿ç®—å¥½ï¼Œä½¿ç”¨æšä¸¾æ³• var a=1024*1024;4.cdn5.å“åº”å¼å›¾ç‰‡~~~~å›¾ç‰‡å‹ç¼© 1.4 å·¥å…·çš„ä½¿ç”¨é€šè¿‡ nodemon å®ç° ä¿å­˜æ–‡ä»¶å®æ—¶é‡å¯ å®‰è£…nodemon npm install -g nodemon åŸºæœ¬ä½¿ç”¨ nodemon server.js åªè¦æ‰§è¡Œäº†ä¸Šé¢çš„å‘½ä»¤ï¼Œé‚£ä¹ˆå½“ä½ ä¿®æ”¹äº† server.js é‚£ä¹ˆnodemonä¼šå¸®ä½ è‡ªåŠ¨é‡å¯ server ###2.1 ä½¿ç”¨npmå‘½ä»¤æ‰§è¡Œä»£ç 1.package.jsoné‡Œé¢é…ç½®scriptså±æ€§é‡Œé¢å†™npmçš„å‘½ä»¤2.npmçš„å‘½ä»¤åœ¨æ§åˆ¶å°ç›´æ¥npmæ‰“å°å‡ºæ¥å¯ä»¥æŸ¥çœ‹3.npmå‘½ä»¤åé¢æ¥çš„æ˜¯å…·ä½“çš„å‘½ä»¤ï¼Œæ‰“npmå‘½ä»¤è°ƒç”¨å…·ä½“çš„å‘½ä»¤ ###2.2ç¼–å†™nodeè„šæœ¬1.æŠŠjsä»£ç å˜æˆnodeè„šæœ¬åœ¨è¦æ‰§è¡Œçš„jsæ–‡ä»¶å½“ä¸­åŠ å…¥ä¸‹é¢è¿™å¥è¯ï¼Œæ˜¯å›ºå®šå†™æ³• #!/usr/bin/env node 2.package.jsoné‡Œé¢é…ç½®binå±æ€§é‡Œé¢å†™å‘½ä»¤,è¿™ä¸ªå‘½ä»¤çš„åç§°æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ 3.å¿…é¡»æ‰“npm linkè¿™ä¸ªå‘½ä»¤ï¼ŒæŠŠå½“å‰åŒ…å®‰è£…åˆ°å…¨å±€å» ###2.3é€šè¿‡å‘½ä»¤è°ƒç”¨è„šæœ¬ http æ¨¡å—ä½¿ç”¨ http æ¨¡å—è¿›è¡Œwebå¼€å‘localhost:3000 ä¸èµ°ç½‘å¡127.0.0.1:3000 èµ°ç½‘å¡192.168.141.XXX é€šè¿‡ç½‘å¡å‘è¯·æ±‚ç»™è·¯ç”±æˆ–äº¤æ¢æœºï¼Œåœ¨è¯·æ±‚å›æ¥ä½ çš„ç”µè„‘ åˆ›å»º HTTP æœåŠ¡å™¨ http.createServer([requestListener]) é€šè¿‡ç›‘å¬Event: â€˜requestâ€™æ¥è¿›è¡Œserver.on(â€˜requestâ€™,(request,response) =&gt; {}); requestã€responseå¯¹è±¡requestå¯¹è±¡ï¼Œç”¨äºæ¥æ”¶è¯·æ±‚æŠ¥æ–‡å†…çš„ä¿¡æ¯responseå¯¹è±¡ï¼Œç”¨äºè¿”å›å“åº”æŠ¥æ–‡å†…çš„ä¿¡æ¯ response.write()writeæ–¹æ³•ç”¨äºå‘å“åº”ä½“é‡Œå†™å†…å®¹ï¼Œç”¨äºå‘å®¢æˆ·ç«¯å‘é€ä¿¡æ¯ï¼Œå¯ä»¥è¢«å¤šæ¬¡ä½¿ç”¨ response.end()åœ¨ä¸€æ¬¡è¯·æ±‚å’Œå“åº”è¿‡ç¨‹å½“ä¸­ï¼Œåªè¦è°ƒç”¨äº† end å°±ä¸èƒ½å†ç»§ç»­ write äº†å°±è¯´æ˜ä½ æ˜¯åœ¨ä¸€æ¬¡è¯·æ±‚å’Œå“åº”å¤„ç†è¿‡ç¨‹ä¸­å·²ç»ç»“æŸäº†å“åº”ï¼Œä½†æ˜¯åˆå» å‘å®¢æˆ·ç«¯å‘é€æ•°æ®è¿™ä¸ªæ—¶å€™å°±ä¼šæŠ¥é”™ server.listen(port[, hostname][, backlog][, callback])ç›‘å¬ç«¯å£ï¼Œæ‰§è¡Œè¿™å¥ï¼ŒæœåŠ¡æ­£å¼è¢«å¯åŠ¨ä½¿ç”¨server.listen(3000,â€™127.0.0.1â€™,() =&gt; {console.log(â€˜server is listening at port 3000â€™);}); request request.headers è¯·æ±‚å¤´ request.method è¯·æ±‚æ–¹æ³• request.url è¯·æ±‚è·¯å¾„ request.httpVersion è¯·æ±‚HTTPåè®®ç‰ˆæœ¬ response res.writeHead(200,{â€˜Content-Typeâ€™: â€˜text/html; charset=utf-8â€™});è®¾ç½®å“åº”æŠ¥æ–‡å¤´ res.write(â€˜hello worldâ€˜); res.end(); Content-Typeå†…å®¹ç±»å‹ï¼Œä¸€èˆ¬æ˜¯æŒ‡ç½‘é¡µä¸­å­˜åœ¨çš„Content-Typeï¼Œç”¨äºå®šä¹‰ç½‘ç»œæ–‡ä»¶çš„ç±»å‹å’Œç½‘é¡µçš„ç¼–ç ï¼Œå†³å®šæ–‡ä»¶æ¥æ”¶æ–¹å°†ä»¥ä»€ä¹ˆå½¢å¼ã€ä»€ä¹ˆç¼–ç è¯»å–è¿™ä¸ªæ–‡ é€šè¿‡ req.urlå’Œreq.methodçš„ä¸åŒç»™å‡ºä¸åŒçš„å“åº” if (req.url == â€˜/â€˜ &amp;&amp; req.method == â€˜GETâ€™) { res.writeHead(200, { â€˜Content-Typeâ€™: â€˜text/html; charset=utf-8â€™ }); res.write(â€˜é¦–é¡µâ€˜); res.end(); } requesté€šè¿‡dataäº‹ä»¶å’Œendäº‹ä»¶æ¥æ¥æ”¶postçš„æ•°æ®let data = â€˜â€™;req.on(â€˜dataâ€™, (chunk) =&gt; { data += chunk;}); req.on(â€˜endâ€™, () =&gt; { console.log(data); res.writeHead(200, { â€˜Content-Typeâ€™: â€˜text/html; charset=utf-8â€™ }); res.write(â€˜æ”¶åˆ°æ•°æ®äº†â€˜); res.end(); }); é€šè¿‡ querystringè§£æpostçš„æ•°æ®querystring.parse(â€˜foo=bar&amp;baz=qux&amp;baz=quux&amp;corgeâ€™)// returns { foo: â€˜barâ€™, baz: [â€˜quxâ€™, â€˜quuxâ€™], corge: â€˜â€™ } url url.parse(urlStr, [parseQueryString], [slashesDenoteHost])urlStr-&gt;urlå­—ç¬¦ä¸²parseQueryString-&gt;ä¸ºtrueæ—¶å°†ä½¿ç”¨queryStringåˆ†ææŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œé»˜è®¤ä¸ºfalseslashesDenoteHosté»˜è®¤ä¸ºfalseï¼Œ//foo/bar å½¢å¼çš„å­—ç¬¦ä¸²å°†è¢«è§£é‡Šæˆ { pathname: â€˜//foo/barâ€™ }å¦‚æœè®¾ç½®æˆtrueï¼Œ//foo/bar å½¢å¼çš„å­—ç¬¦ä¸²å°†è¢«è§£é‡Šæˆ { host: â€˜fooâ€™, pathname: â€˜/barâ€™ } æœåŠ¡å™¨ç›¸å…³æ“ä½œäº‹ä»¶å’ŒAPI Event: â€˜closeâ€™ Event: â€˜connectionâ€™ Event: â€˜requestâ€™ server.close([callback]) server.listen(port[, hostname][, backlog][, callback]) è¯·æ±‚å¯¹è±¡ Event: â€˜dataâ€™ message.headers message.httpVersion message.method message.url require(â€˜urlâ€™).parse(request.url) require(â€˜urlâ€™).parse(request.url, true) å“åº”å¯¹è±¡ response.end([data][, encoding][, callback]) response.setHeader(name, value) response.statusCode response.statusMessage response.write(chunk[, encoding][, callback]) response.writeHead(statusCode[, statusMessage][, headers]) gulp å®˜ç½‘ ä¸­æ–‡ç½‘ å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·jså‹ç¼©,var x,xnameï¼Œæ··æ·†åˆå¹¶.csså‹ç¼©htmlå‹å‹ç¼© grunt ,webpackâ€¦ æ ¸å¿ƒå°±5ä¸ªæ–¹æ³• task,gulpä¸­æ˜¯ä¸€ä¸ªä¸ªä»»åŠ¡çš„å½¢å¼æ¥å®ç°åŠŸèƒ½ã€‚ task(â€˜ä»»åŠ¡åâ€™,function(){â€¦..}); src src(â€˜./*.jsâ€™) dest(â€˜./minjs/â€˜)// æŒ‡å®šå¤„ç†åçš„æ–‡ä»¶çš„è¾“å‡ºè·¯å¾„. watch(â€˜./*.jsâ€™,[â€˜ä»»åŠ¡å1â€™,â€™ä»»åŠ¡å2â€™]); run(â€˜ä»»åŠ¡åâ€™);//æ‰§è¡ŒæŒ‡å®šçš„ä»»åŠ¡. gulpçš„å®‰è£… ä½¿ç”¨npm è¿›è¡Œå®‰è£… npm install gulp-cli -g; npm i -g gulp-cli; gulp ä½¿ç”¨ä½¿ç”¨æ—¶è¿˜éœ€è¦åœ¨é¡¹ç›®ä¸­é€šè¿‡npméå…¨å±€å®‰è£…gulp npm install gulp --save-dev è¿˜éœ€è¦åœ¨å½“å‰é¡¹ç›®æ ¹ç›®å½•æ·»åŠ ä¸€ä¸ªgulpfile.jsæ–‡ä»¶æ¥å†™å…·ä½“çš„ä»»åŠ¡ä»£ç .gulpçš„ä¸€äº›æ’ä»¶ ä¹Ÿæ˜¯ä½¿ç”¨npmå®‰è£… å¯¹jsä»£ç è¿›è¡Œå‹ç¼© gulp-uglify.pipe(uglify()) å¯¹ä»£ç è¿›è¡Œåˆå¹¶ gulp-concat.pipe(concat(â€˜all.jsâ€™)).pipe(concat(â€˜all.cssâ€™)) å¯¹cssè¿›è¡Œå‹ç¼© gulp-cssnano.pipe(cssnano()) å¯¹htmlè¿›è¡Œå‹ç¼© gulp-htmlmin.pipe(htmlmin({collapseWhitespace:true,minifyJS:false,minifyCSS:true}))","categories":[{"name":"javascript","slug":"javascript","permalink":"http://blogzhou.top/categories/javascript/"}],"tags":[{"name":"JS","slug":"JS","permalink":"http://blogzhou.top/tags/JS/"}]},{"title":"node-lesson5","slug":"old_08.node-lesson5","date":"2016-12-23T10:30:50.000Z","updated":"2020-12-16T07:46:41.405Z","comments":true,"path":"2016/12/23/old_08.node-lesson5/","link":"","permalink":"http://blogzhou.top/2016/12/23/old_08.node-lesson5/","excerpt":"node-lesson51.å¤ä¹ 1.1nodeçš„è°ƒè¯• å‰ä¸¤æ ·è°ƒè¯•ç”¨äºé¢è¯• nodeè‡ªå¸¦çš„debugè°ƒè¯•å‘½ä»¤ nä¸‹ä¸€æ­¥ sæ­¥å…¥ oæ­¥å‡º node-debug foo.js node-inspector vsc æ¨èä½¿ç”¨ vsc launch.json æŠ½é£å¼çš„å¥½ä½¿ ws1.2 es6 ç”¨esæ–°ç‰¹æ€§ä¹‹å‰åŠ ä¸Šä¸¥æ ¼æ¨¡å¼ ä»€ä¹ˆæ˜¯esï¼Ÿ ä¸ºä»€ä¹ˆç”¨esçš„æ–°æ ‡å‡†ï¼Ÿ ä¸ºä»€ä¹ˆå‰ç«¯ä¸ç”¨ï¼Œnodeè¦ç”¨ï¼Ÿes6å®šä¹‰äº†ä¸€ä¸ªæ ‡å‡†â€”-&gt;letå‘½ä»¤â€”-&gt;jsä»£ç é‡Œé¢å†™äº†letâ€”-&gt;v8å¼•æ“è§£æï¼Œèƒ½è§£æè¯´æ˜æ”¯æŒäº†es6é‡Œçš„letå‘½ä»¤â€”-&gt;nodeå‡çº§äº† ä¸¥æ ¼æ¨¡å¼ let const å—çº§ä½œç”¨åŸŸ{}let foo =456;{let foo =123;}console.log(foo); å­—ç¬¦ä¸²çš„æ‰©å±• includes(str) startsWith(str) endsWith(str) repeat(num) ${å˜é‡å}var bar=â€™æš—ç¤ºçš„åæ€â€™var foo=â€™123â€™+â€™é˜¿æ–¯é¡¿å‘æ–¯è’‚èŠ¬â€™+bar+â€™æ˜¯çŸ­å‘é£â€™;var foo2=é˜¿æ–¯é¡¿å‘æ–¯è’‚èŠ¬${bar}æ˜¯çŸ­å‘é£ ç®­å¤´å‡½æ•°ã€ let const ç®­å¤´å‡½æ•° ç”¨æ¥çœ‹apiä½¿ç”¨","text":"node-lesson51.å¤ä¹ 1.1nodeçš„è°ƒè¯• å‰ä¸¤æ ·è°ƒè¯•ç”¨äºé¢è¯• nodeè‡ªå¸¦çš„debugè°ƒè¯•å‘½ä»¤ nä¸‹ä¸€æ­¥ sæ­¥å…¥ oæ­¥å‡º node-debug foo.js node-inspector vsc æ¨èä½¿ç”¨ vsc launch.json æŠ½é£å¼çš„å¥½ä½¿ ws1.2 es6 ç”¨esæ–°ç‰¹æ€§ä¹‹å‰åŠ ä¸Šä¸¥æ ¼æ¨¡å¼ ä»€ä¹ˆæ˜¯esï¼Ÿ ä¸ºä»€ä¹ˆç”¨esçš„æ–°æ ‡å‡†ï¼Ÿ ä¸ºä»€ä¹ˆå‰ç«¯ä¸ç”¨ï¼Œnodeè¦ç”¨ï¼Ÿes6å®šä¹‰äº†ä¸€ä¸ªæ ‡å‡†â€”-&gt;letå‘½ä»¤â€”-&gt;jsä»£ç é‡Œé¢å†™äº†letâ€”-&gt;v8å¼•æ“è§£æï¼Œèƒ½è§£æè¯´æ˜æ”¯æŒäº†es6é‡Œçš„letå‘½ä»¤â€”-&gt;nodeå‡çº§äº† ä¸¥æ ¼æ¨¡å¼ let const å—çº§ä½œç”¨åŸŸ{}let foo =456;{let foo =123;}console.log(foo); å­—ç¬¦ä¸²çš„æ‰©å±• includes(str) startsWith(str) endsWith(str) repeat(num) ${å˜é‡å}var bar=â€™æš—ç¤ºçš„åæ€â€™var foo=â€™123â€™+â€™é˜¿æ–¯é¡¿å‘æ–¯è’‚èŠ¬â€™+bar+â€™æ˜¯çŸ­å‘é£â€™;var foo2=é˜¿æ–¯é¡¿å‘æ–¯è’‚èŠ¬${bar}æ˜¯çŸ­å‘é£ ç®­å¤´å‡½æ•°ã€ let const ç®­å¤´å‡½æ•° ç”¨æ¥çœ‹apiä½¿ç”¨ 1.3 buffer åˆ›å»ºBuffer Bufferçš„ä¸€äº›å±æ€§å’Œæ–¹æ³• Bufferçš„ä¸€äº›å±æ€§å’Œæ–¹æ³• buf[index] é€šè¿‡ä¸‹æ ‡è®¿é—® buffer çš„æŸä¸ªå­—èŠ‚çš„æ•°æ® buf.indexOf(value,[byteOffset],[encoding]) æŸ¥æ‰¾æŸä¸ªå­—ç¬¦åœ¨ buffer å†…å­˜ä¸­çš„å­—èŠ‚ä¸‹æ ‡ buf.includes(value,[byteOffset],[encoding]) buf.length buf.slice([start,[end]]) buf.toString([encoding],[start], [end]) buf.write(string,[offset],[length],[encoding])1.4 æ–‡ä»¶æµ æµå¯¹è±¡ stream pipeï¼ˆï¼‰2.ç½‘ç»œç¼–ç¨‹ æˆ‘ä»¬å¤„äºäº’è”ç½‘æ—¶ä»£ï¼Œæˆ‘ä»¬å¯ä»¥éšæ—¶éšåœ°é€šè¿‡ Internet ä¸Šç½‘ã€æµè§ˆæ–°é—»ã€ç©LOLã€ä¸Šæ·˜å®è´­ç‰©ç­‰ç­‰ã€‚è¿™äº›è¿‡ç¨‹éƒ½å‘ç”Ÿäº†ç½‘ç»œæ•°æ®çš„äº¤äº’ã€‚bs browser servercs client server ç½‘ç»œç¼–ç¨‹ æ˜¯æŒ‡ç¼–å†™ç¨‹åºä½¿ä¸¤å°è”ç½‘çš„è®¡ç®—æœºå¯ä»¥å®Œæˆç½‘ç»œæ•°æ®äº¤äº’ï¼Œå®Œæˆç½‘ç»œé€šä¿¡ã€‚æ³¨æ„ï¼šè¿™é‡Œçš„è®¡ç®—æœºæ³›æŒ‡å¯ä»¥ä¸Šç½‘çš„è®¾å¤‡ï¼Œæ¯”å¦‚PCã€æ‰‹æœºã€æœåŠ¡å™¨ã€æ™ºèƒ½ç”µè§†ç­‰ç­‰ã€‚ å¼ºè°ƒï¼šç½‘ç»œç¼–ç¨‹é‡åœ¨æ€æƒ³ï¼Œnodeåªæ˜¯ä¸€ä¸ªå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç½‘ç»œç¼–ç¨‹çš„ä¸€ä¸ªå·¥å…·è€Œå·²ã€‚ä½¿ç”¨å…¶ä»–ç¼–ç¨‹è¯­è¨€æˆ–è€…æ“ä½œç³»ç»Ÿè¿›è¡Œç½‘ç»œç¼–ç¨‹ï¼Œæ€æƒ³éƒ½æ˜¯ä¸€æ ·çš„ã€‚ ä»€ä¹ˆæ˜¯æœåŠ¡å™¨ï¼Ÿ1234æœåŠ¡å™¨å°±æ˜¯ä¸€ä¸ªå°ç”µè„‘ï¼Œæ˜¯ä¸€å°æ€§èƒ½æ¯”è¾ƒå¥½çš„å¤§ç”µè„‘ï¼Œå®ƒéœ€è¦æ”¯æŒé«˜æ‰©å±•æ€§ï¼Œæä¾›æœåŠ¡çš„æœåŠ¡å™¨ä¸€æ—¦éƒ¨ç½²å¥½æœåŠ¡åï¼Œä¸€èˆ¬åŠ¨çš„æ¯”è¾ƒå°‘ï¼Œlinuxç³»ç»Ÿæ¯”è¾ƒå¸¸ç”¨ï¼Œä¸éœ€è¦æ¯”è¾ƒå¤æ‚çš„å¯è§†åŒ–æ“ä½œç•Œé¢ï¼Œå› ä¸ºå¤æ‚çš„å¯è§†åŒ–æ“ä½œç³»ç»Ÿæ¯”è¾ƒè€—èµ„æºï¼Œå¦‚win10ï¼Œå’Œwindowsç›¸æ¯”linuxæ¯”è¾ƒå®‰å…¨æœåŠ¡å™¨ç”¨linuxçš„centosï¼Œubuntuæ˜¯æœ‰æ¡Œé¢ç‰ˆçš„æœåŠ¡å™¨å¤šç”¨centos ä»€ä¹ˆæ˜¯åº”ç”¨æœåŠ¡å™¨ï¼Ÿ1ä½œä¸ºæœåŠ¡å™¨æ‰§è¡Œå…±äº«ä¸šåŠ¡åº”ç”¨ç¨‹åºçš„åº•å±‚çš„ç³»ç»Ÿè½¯ä»¶ ä»€ä¹ˆæ˜¯webæœåŠ¡å™¨ï¼Ÿ1webæœåŠ¡å™¨æ˜¯ä¸€ç§åº”ç”¨æœåŠ¡å™¨ï¼Œæä¾›äº†webæœåŠ¡ï¼Œå¯¹å†…æä¾›webåº”ç”¨ç¨‹åºçš„çš„è¿è¡Œç¯å¢ƒ Apacheã€Nginxã€IISã€tomcat Node æ²¡æœ‰ Web å®¹å™¨å¦‚æœæˆ‘ç”¨jså†™äº†ä¸€ä¸ªwebåº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆnodeå°±æ˜¯webæœåŠ¡å™¨.netå¹³å°çš„ ASPæˆ–è€…ASP.net éœ€è¦ IIS ä½œä¸ºæœåŠ¡å™¨å®¹å™¨ï¼ŒPHPéœ€è¦æ­è½½ Apache æˆ–è€… Nginx ä½œä¸ºæœåŠ¡å™¨å®¹å™¨ï¼ŒJava çš„ JSP éœ€è¦ tomcat ä½œä¸ºæœåŠ¡å™¨å®¹å™¨ï¼Œruby çš„ ruby on rails éœ€è¦ æ­é… Apache ç­‰ä½œä¸ºè‡ªå·±çš„æœåŠ¡å™¨å®¹å™¨ã€‚ã€‚ã€‚ Nodeï¼Œä¸éœ€è¦æœåŠ¡å™¨å®¹å™¨ã€‚ Nodeï¼Œä¸éœ€è¦æœåŠ¡å™¨å®¹å™¨ã€‚ Nodeï¼Œä¸éœ€è¦æœåŠ¡å™¨å®¹å™¨ã€‚ ä¸ºä»€ä¹ˆå« NodeNodeæ˜¯ä¸€ä¸ªé¢å‘ç½‘ç»œè€Œç”Ÿçš„å¹³å°ã€‚ Ryan Dahl åœ¨åˆ›å»ºNodeé¡¹ç›®çš„æ—¶å€™ç»™å®ƒèµ·äº†ä¸€ä¸ªåå­—å«åš web.js ï¼Œå°±æ˜¯ä¸€ä¸ªWebæœåŠ¡å™¨ã€‚ç±»ä¼¼äº Apacheã€tomcatã€IIS ç­‰æœåŠ¡å™¨è½¯ä»¶ã€‚ web.js çš„å‘å±•è¶…å‡ºäº†ä½œè€…çš„æœ€åˆæƒ³æ³•ï¼Œå˜æˆäº†æ„å»ºç½‘ç»œåº”ç”¨çš„ä¸€ä¸ªåŸºç¡€å¹³å°ã€‚ç„¶åå°±å¯ä»¥åœ¨è¿™ä¸ªåŸºç¡€å¹³å°ä¹‹ä¸Šæ„å»ºå¾ˆå¤šä¸œè¥¿ï¼Œæ¯”å¦‚æœåŠ¡å™¨ã€å®¢æˆ·ç«¯ã€å„ç§å„æ ·çš„å‘½ä»¤è¡Œå·¥å…·ç­‰ã€‚ Nodeçš„ç›®æ ‡å°±æ˜¯æˆä¸ºä¸€ä¸ªæ„å»ºå¿«é€Ÿã€å¯ä¼¸ç¼©çš„ç½‘ç»œåº”ç”¨å¹³å°ã€‚ æ¯ä¸€ä¸ªNodeè¿›ç¨‹æ„æˆç½‘ç»œåº”ç”¨ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚è¿™å°±æ˜¯ Node çš„å«ä¹‰ã€‚ ipipå”¯ä¸€æ ‡è¯† ä¸€å°è®¾å¤‡ç«¯å£å·æ ‡è¯†ä¸€ä¸ªè®¾å¤‡ä¸Šçš„åº”ç”¨ è·¨åŸŸçš„åœºæ™¯1.åŸŸåä¸åŒ ï¼ˆwww.wuyou.com å’Œwww.liuxi.com å³ä¸ºä¸åŒçš„åŸŸåï¼‰2.äºŒçº§åŸŸåç›¸åŒï¼Œå­åŸŸåä¸åŒ ï¼ˆwww.wuyou.wu.com www.liuxi.wu.com ä¸ºå­åŸŸä¸åŒï¼‰3.ç«¯å£ä¸åŒï¼Œåè®®ä¸åŒ ï¼ˆ http://www.wuyou.com å’Œhttps://www.wuyou.comå±äºè·¨åŸŸwww.wuyou.con:8888å’Œwww.wuyou.con:8080) å‰ååˆ†ç¦»åè®® åŒæ–¹æˆ–å¤šæ–¹åŒæ„ï¼Œå¹¶ä¸”è¾¾æˆå…±è¯†ï¼Œéµå®ˆè¿™æ ·çš„çº¦æŸurlç«¯å£å· ipèƒ½å¤Ÿå®šä½ç”µè„‘ï¼Œç«¯å£å·å¯ä»¥å®šä½ä¸€ä¸ªåº”ç”¨ç¨‹åºnode é»˜è®¤æ˜¯3000 å¤šäº†å¾€ä¸ŠåŠ  2 httpåè®®é€šè¿‡æŠ¥æ–‡ä¼ è¾“ 2.1åœ¨åœ°å€æ è¾“å…¥ç½‘å€åé¡µé¢æ˜¯å¦‚ä½•å‘ˆç°çš„ï¼Ÿ DNS æŠŠåŸŸåè½¬åŒ–æˆip DNSæœåŠ¡å™¨æ¥åšè¿™ä¸ªäº‹æƒ… è¿è¥å•†æä¾›çš„dnsæœåŠ¡å™¨ CDN å†…å®¹åˆ†å‘ç½‘ç»œ è¾“å…¥ URLï¼šhttp://www.baidu.com DNS åŸŸåè§£æ è®¡ç®—æœºæ— æ³•è¯†åˆ«åŸŸåï¼Œè®¡ç®—æœºä¸è®¡ç®—æœºä¹‹é—´è¦æƒ³è¿›è¡Œé€šä¿¡ï¼Œå¿…é¡»é€šè¿‡ipåœ°å€ç”¨æ¥å®šä½è¯¥è®¡ç®—æœºæ‰€åœ¨çš„ä½ç½® åœ¨æµè§ˆå™¨ä¸­ï¼Œè¾“å…¥çš„ipåœ°å€æˆ–è€…åŸŸåï¼Œé»˜è®¤ç»™ä½ åŠ äº†ä¸€ä¸ª80ç«¯å£å·ï¼ˆå¯¹æ–¹çš„æœåŠ¡å™¨ç›‘å¬çš„å°±æ˜¯80ç«¯å£ï¼‰ 158.12.25.652 åŸŸåå°±æ˜¯ä¸ºäº†å¥½è®° ä¸ºäº†å¥½è®°ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ ä¸‡ç»´ç½‘æä¾›äº† ä¸€ä¸ª åŸŸåè¿™æ ·çš„æ¦‚å¿µ å½“ä½ è¾“å…¥äº† ip åœ°å€åï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å» æ‰¾DNSåŸŸåè§£ææœåŠ¡å™¨ï¼Œ å°†ç”¨æˆ·è¾“å…¥çš„åœ°å€å°è£…æˆ HTTP Request è¯·æ±‚æŠ¥æ–‡ å‘é€åˆ°æœåŠ¡å™¨ æµè§ˆå™¨å°†ç”¨æˆ·è¾“å…¥çš„ URL åœ°å€æ ¹æ®HTTPåè®® å°è£…æˆäº† http è¯·æ±‚æŠ¥æ–‡ï¼ˆè¯·æ±‚å¤´+è¯·æ±‚è¡Œ+è¯·æ±‚ä½“ï¼‰ è¯¥æŠ¥æ–‡è¯´ç™½äº†ä¹Ÿå°±æ˜¯å­—ç¬¦ä¸²è€Œå·²ï¼Œæœ€ç»ˆä¹Ÿè¦è¢«è½¬æˆäº†äºŒè¿›åˆ¶æ•°æ®å†å‘é€åˆ°æœåŠ¡å™¨ åå°æœåŠ¡å™¨æ¥æ”¶åˆ°ç”¨æˆ·HTTP Request è¯·æ±‚æŠ¥æ–‡ åå°æœåŠ¡å™¨æ¥æ”¶åˆ° å®¢æˆ·ç«¯å‘é€ç»™è‡ªå·±çš„æ•°æ®ï¼ˆäºŒè¿›åˆ¶æ•°æ®ï¼‰ é¦–å…ˆæŠŠäºŒè¿›åˆ¶æ•°æ®æŒ‰ç…§ç¼–ç è§£ææˆå­—ç¬¦ï¼Œï¼ˆäººç±»å¯ä»¥è¯†åˆ«çš„ï¼‰ è§£ææˆå­—ç¬¦ä¹‹åï¼Œå†æŒ‰ç…§ HTTP åè®®è§„èŒƒä¸­å®šä¹‰çš„æ ¼å¼è§£æå‡ºæ¥ åå°æœåŠ¡å™¨å¤„ç†ç”¨æˆ·è¯·æ±‚ä¿¡æ¯ å½“å¾—åˆ°ç”¨æˆ·è¯·æ±‚æŠ¥æ–‡ä¹‹åï¼Œæ ¹æ®è¯·æ±‚æŠ¥æ–‡ä¸­çš„ getã€portæˆ–è€… URLã€æˆ–è€…URLä¸­çš„æŸ¥è¯¢å­—ç¬¦ä¸²æˆ–è€… è¯·æ±‚ä½“ä¸­çš„æ•°æ® æ ¹æ®ç”¨æˆ·çš„ç‰¹å®šçš„è¯·æ±‚æ•°æ®åšç‰¹å®šçš„å¤„ç† åå°æœåŠ¡å™¨å°†ç›¸åº”ç»“æœå°è£…åˆ° HTTP Response å“åº”æŠ¥æ–‡ä¸­ å‘é€ç»™å®¢æˆ·ç«¯ å½“æˆ‘ä»¬è§£æå’Œå¤„ç†å®Œç”¨æˆ·è¯·æ±‚æŠ¥æ–‡æ¶ˆæ¯ä¹‹å æœåŠ¡å™¨å¼€å§‹å°†å…·ä½“çš„ è¦å‘é€ç»™å®¢æˆ·ç«¯çš„æ•°æ® æ ¹æ® HTTP åè®®è§„èŒƒ å°è£…æˆ HTTPåè®®å“åº”æŠ¥æ–‡ å“åº”å¤´ã€å“åº”å­—æ®µã€å“åº”ä½“ è¯¥æ•°æ®è¯´ç™½äº†ä¹Ÿæ˜¯å…·æœ‰ç‰¹å®šæ ¼å¼çš„å­—ç¬¦ä¸²è€Œå·²ï¼Œæœ€ç»ˆè¿™ä¸ªå­—ç¬¦ä¸²ä¹Ÿè¦è½¬æ¢æˆäºŒè¿›åˆ¶æ•°æ®å‘é€åˆ°å®¢æˆ·ç«¯ å‘é€åˆ°å®¢æˆ·ç«¯ä¹Ÿæ˜¯é€šè¿‡ Socketï¼ˆipåœ°å€ã€ç«¯å£å·ï¼‰ å‘é€åˆ°äº†è¯¥å®¢æˆ·å• ç”¨æˆ·æµè§ˆå™¨æ¥æ”¶åˆ°å“åº”åå¼€å§‹æ¸²æŸ“htmlã€cssï¼Œè§£æå’Œæ‰§è¡Œ JavaScript ä»£ç  å½“å®¢æˆ·ç«¯è§£æåˆ° æœåŠ¡å™¨å‘é€è¿‡æ¥çš„ äºŒè¿›åˆ¶æ•°æ® å®¢æˆ·ç«¯æµè§ˆå™¨ä¹Ÿä¼šå°† äºŒè¿›åˆ¶æ•°æ® æ ¹æ®ç¼–ç ç±»å‹è§£ææˆ å­—ç¬¦ä¸² ç„¶åæ ¹æ® HTTP åè®®ï¼Œè§£ææœåŠ¡å™¨å‘é€è¿‡æ¥çš„ å“åº”æŠ¥æ–‡ ç„¶åæ ¹æ®å“åº”æŠ¥æ–‡ä¸­çš„æŠ¥æ–‡å†…å®¹ï¼ˆæŠ¥æ–‡å¤´ã€æŠ¥æ–‡ä½“ï¼‰åšå…·ä½“çš„è§£æ å½“æµè§ˆå™¨åœ¨è§£æçš„è¿‡ç¨‹ä¸­é‡åˆ° ä¸€äº›é™æ€èµ„æºæ—¶ï¼Œä¼šå†æ¬¡é‡å¤ä¸Šé¢çš„æ­¥éª¤2.2HTTPåè®®HTTPåè®®å°±æ˜¯ æµè§ˆå™¨ å’Œ æœåŠ¡å™¨ ä¹‹é—´é€šä¿¡çš„ä¸€ä¸ªæ•°æ®æ ¼å¼è§„èŒƒ åœ¨HTTPåè®®ä¸­ï¼Œå§‹ç»ˆæ˜¯ä»¥ä¸€ç§ ä¸€é—®ä¸€ç­” çš„å½¢å¼åœ¨è¿›è¡Œæ²Ÿé€šå’Œäº¤æµï¼ˆæ•°æ®äº¤æ¢ï¼‰ æœåŠ¡å™¨å¦‚æœæ²¡æœ‰æ”¶åˆ°æµè§ˆå™¨çš„è¯·æ±‚æ¶ˆæ¯ï¼ŒæœåŠ¡å™¨æ°¸è¿œä¸ä¼šä¸»åŠ¨çš„å‘é€å“åº”æ¶ˆæ¯ æµè§ˆå™¨ä¸å‘å‡ºè¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¸ä¼šä¸»åŠ¨çš„å‘é€å“åº” æµè§ˆå™¨å‘é€è¯·æ±‚æ•°æ®åˆ°æœåŠ¡å™¨ æœåŠ¡å™¨è§£ææµè§ˆå™¨å‘é€çš„è¯·æ±‚æ•°æ® æœåŠ¡å™¨å“åº”æ•°æ®åˆ°å®¢æˆ·ç«¯æµè§ˆå™¨ 2.3cookie&amp;session httpæ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„åè®®ï¼Œæ¯æ¬¡å»è¯·æ±‚æœåŠ¡å™¨çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨æ˜¯ä¸èƒ½è®°ä½å®¢æˆ·ç«¯çš„ cookie ä¿¡ç‰©ï¼Œå®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡å™¨äº†ä»¥åï¼ŒæœåŠ¡å™¨ç»™å®¢æˆ·ç«¯ä¸€ä¸ªä¿¡ç‰©ï¼Œä¸‹æ¬¡å®¢æˆ·ç«¯å†è¯·æ±‚æœåŠ¡å™¨çš„æ—¶å€™ï¼Œç»™æœåŠ¡å™¨è¿™ä¸ªä¿¡ç‰©æœåŠ¡å™¨å°±çŸ¥é“æ˜¯å“ªä¸ªå®¢æˆ·ç«¯äº† ç¼ºç‚¹æ˜¯ï¼Œä¸èƒ½å­˜å‚¨å¤ªå¤šå†…å®¹ã€ä¸å®‰å…¨ session å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯çš„ï¼Œä¿å­˜ç€ç”¨æˆ·ä¿¡æ¯çš„ï¼Œå’Œcookieæ­é…æ¥ä½¿ç”¨ï¼Œå¯ä»¥ç”¨cookieé‡Œé¢çš„keyå¯¹åº”ä¸Šsessioné‡Œé¢çš„å€¼sessionå¯ä»¥å­˜åœ¨å†…å­˜æˆ–ç¡¬ç›˜ä¸Šéƒ½å¯ä»¥ã€‚ 2.4å‰åç«¯åˆ†ç¦» 2.5 loaclhost 127.0.0.1 ipåœ°å€ Nginxä»£ç†ï¼Œå§”æ‰˜ä¸€ä¸ªäººå¸®æˆ‘å»åšäº‹æƒ…ï¼Œä¸Šç½‘ä»£ç†ï¼Œå°±æ˜¯æˆ‘ä¸Šç½‘çš„æ—¶å€™å¦‚æœä¸Šç½‘è¢«å¢™äº†ï¼Œæˆ‘å¯ä»¥ç”¨ä»£ç†å¸®æˆ‘ä»¬å»ä¸Šç½‘ã€‚123nginxé™¤äº†æ˜¯ä¸ªwebæœåŠ¡å™¨è¿˜èƒ½å¤Ÿåšåå‘ä»£ç†æœåŠ¡å™¨ï¼Œåå‘ä»£ç†æœåŠ¡å™¨çš„ä½œç”¨ï¼Œå¯ä»¥ç”¨æ¥åšè´Ÿè½½å‡è¡¡ä»£ç†ï¼Œå§”æ‰˜ä¸€ä¸ªäººå¸®æˆ‘å»åšäº‹æƒ…ï¼Œä¸Šç½‘ä»£ç†ï¼Œå°±æ˜¯æˆ‘ä¸Šç½‘çš„æ—¶å€™å¦‚æœä¸Šç½‘è¢«å¢™äº†ï¼Œæˆ‘å¯ä»¥ç”¨ä»£ç†å¸®æˆ‘ä»¬å»ä¸Šç½‘ã€‚ å¯ä»¥ç”¨nginxæ¥åšè´Ÿè½½å‡è¡¡","categories":[{"name":"javascript","slug":"javascript","permalink":"http://blogzhou.top/categories/javascript/"}],"tags":[{"name":"JS","slug":"JS","permalink":"http://blogzhou.top/tags/JS/"}]},{"title":"node-lesson4","slug":"old_07.node-lesson4","date":"2016-12-15T03:30:50.000Z","updated":"2020-12-16T07:46:11.553Z","comments":true,"path":"2016/12/15/old_07.node-lesson4/","link":"","permalink":"http://blogzhou.top/2016/12/15/old_07.node-lesson4/","excerpt":"#node-lesson4 ###1.1ä»€ä¹ˆæ˜¯io?1io æ˜¯è¾“å…¥è¾“å‡º æ–‡ä»¶æ“ä½œçš„è¯»å†™ ç½‘ç»œæ“ä½œä¸­çš„è¯·æ±‚å’Œåº”ç­” ###1.2è¿›ç¨‹å’Œçº¿ç¨‹ï¼Ÿ12345è¿›ç¨‹æ˜¯ä¸ºè¿è¡Œä¸­çš„åº”ç”¨ç¨‹åºæä¾›è¿è¡Œç¯å¢ƒçš„çº¿ç¨‹å°±æ˜¯æ‰§è¡Œåº”ç”¨ç¨‹åºå½“ä¸­çš„ä»£ç çš„åŒä¸€æ—¶é—´åªå¹²ä¸€ä»¶äº‹æƒ…nodeä¸­å¼‚æ­¥å°±æ˜¯å¸®ä½ å®Œæˆå¤šçº¿ç¨‹ç¼–ç¨‹å¤šçº¿ç¨‹ç¼–ç¨‹æ¯”è¾ƒå¤æ‚ ###1.3åŒæ­¥å’Œå¼‚æ­¥ï¼Ÿ12åŒæ­¥ä¼šé˜»å¡ä»£ç å¼‚æ­¥ä¸ä¼šé˜»å¡ä»£ç ","text":"#node-lesson4 ###1.1ä»€ä¹ˆæ˜¯io?1io æ˜¯è¾“å…¥è¾“å‡º æ–‡ä»¶æ“ä½œçš„è¯»å†™ ç½‘ç»œæ“ä½œä¸­çš„è¯·æ±‚å’Œåº”ç­” ###1.2è¿›ç¨‹å’Œçº¿ç¨‹ï¼Ÿ12345è¿›ç¨‹æ˜¯ä¸ºè¿è¡Œä¸­çš„åº”ç”¨ç¨‹åºæä¾›è¿è¡Œç¯å¢ƒçš„çº¿ç¨‹å°±æ˜¯æ‰§è¡Œåº”ç”¨ç¨‹åºå½“ä¸­çš„ä»£ç çš„åŒä¸€æ—¶é—´åªå¹²ä¸€ä»¶äº‹æƒ…nodeä¸­å¼‚æ­¥å°±æ˜¯å¸®ä½ å®Œæˆå¤šçº¿ç¨‹ç¼–ç¨‹å¤šçº¿ç¨‹ç¼–ç¨‹æ¯”è¾ƒå¤æ‚ ###1.3åŒæ­¥å’Œå¼‚æ­¥ï¼Ÿ12åŒæ­¥ä¼šé˜»å¡ä»£ç å¼‚æ­¥ä¸ä¼šé˜»å¡ä»£ç  ###1.4äº‹ä»¶é©±åŠ¨æ¨¡å‹1234567891011121314151617ä¸»çº¿ç¨‹ï¼š1.æ‰§è¡Œnodeçš„ä»£ç ï¼ŒæŠŠä»£ç æ”¾å…¥é˜Ÿåˆ—2.äº‹ä»¶å¾ªç¯ç¨‹åºï¼ˆä¸»çº¿ç¨‹ï¼‰æŠŠé˜Ÿåˆ—é‡Œé¢çš„åŒæ­¥ä»£ç éƒ½å…ˆæ‰§è¡Œäº†ï¼Œ3.åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œæ‰§è¡Œå¼‚æ­¥ä»£ç 4.å¼‚æ­¥ä»£ç é2ç§çŠ¶å†µï¼Œ 1å¼‚æ­¥éio setTimeout() setInterval() åˆ¤æ–­æ˜¯å¦å¯æ‰§è¡Œï¼Œå¦‚æœå¯ä»¥æ‰§è¡Œå°±æ‰§è¡Œï¼Œä¸å¯ä»¥è·³è¿‡ã€‚ 2å¼‚æ­¥io æ–‡ä»¶æ“ä½œ ä¼šä»çº¿ç¨‹æ± å½“ä¸­å»å–ä¸€æ¡çº¿ç¨‹ï¼Œå¸®åŠ©ä¸»çº¿ç¨‹å»æ‰§è¡Œã€‚5ä¸»çº¿ç¨‹ä¼šä¸€ç›´è½®è®­ï¼Œé˜Ÿåˆ—ä¸­æ²¡æœ‰ä»£ç äº†ï¼Œä¸»çº¿ç¨‹å°±ä¼šé€€å‡ºã€‚å­çº¿ç¨‹ï¼šè¢«æ”¾åœ¨çº¿ç¨‹æ± é‡Œé¢çš„çº¿ç¨‹ï¼Œç”¨æ¥æ‰§è¡Œå¼‚æ­¥ioæ“ä½œ 1.åœ¨çº¿ç¨‹æ± é‡Œä¼‘æ¯ 2.å¼‚æ­¥ioçš„æ“ä½œæ¥äº†ï¼Œæ‰§è¡Œå¼‚æ­¥ioæ“ä½œã€‚ 3.å­çº¿ç¨‹ä¼šæŠŠå¼‚æ­¥ioæ“ä½œçš„callbackå‡½æ•°ï¼Œæ‰”å›ç»™é˜Ÿåˆ— 4.å­çº¿ç¨‹ä¼šå›åˆ°çº¿ç¨‹æ± äº†å»ä¼‘æ¯ã€‚ callback åœ¨å¼‚æ­¥ioä»£ç æ‰§è¡Œå®Œæˆçš„æ—¶å€™è¢«æ‰”å›ä¸»çº¿ç¨‹ã€‚ ###1.5æ–‡ä»¶æ“ä½œ1234567- fs.readFile() è¯»æ–‡ä»¶- fs.access() åˆ¤æ–­è·¯å¾„- fs.writeFile() å†™æ–‡ä»¶- fs.appendFile() åœ¨æ–‡ä»¶çš„å†…éƒ¨å»è¿½åŠ å†™ä¸€äº›å†…å®¹- fs.mkdir() åˆ›å»ºæ–‡ä»¶å¤¹- fs.stat() åˆ¤æ–­æ–‡ä»¶æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶/æ–‡ä»¶å¤¹çš„å±æ€§- fs.readdir() è¿­ä»£ f(1),f(2),f(3),f(4)â€¦â€¦é€’å½’ f(f()),f(f(f())),f(f(f(f())))â€¦.. ###1.6path path.join(â€œ/aâ€,â€/bâ€,,,,,) #1.7 $http $http({ method: â€˜GETâ€™,//å‘é€getè¯·æ±‚ url: â€˜http://127.0.0.1:3000/in_theaters/&#39;}).then(function(data){},function(error){}) .thençš„æˆåŠŸæ–¹æ³•é‡Œé¢è¿”å›çš„dataæ˜¯æ•´ä¸ªæŠ¥æ–‡ï¼Œå¦‚æœå–é‡Œé¢jsonæ•°æ®éœ€è¦data.data.successçš„æ–¹å¼å»å–çš„dataæ˜¯æŠ¥æ–‡ä½“ï¼Œdataå°±æ˜¯æ•°æ® #2.nodeçš„è°ƒè¯• ###2.1 nodeè‡ªå¸¦çš„debugg ###2.2 node-inspectorç¬¬ä¸‰æ–¹çš„è°ƒè¯•åŒ… ###2.3 vsc è°ƒè¯• ###2.4 ws è°ƒè¯• ###2.5å¼‚å¸¸å¤„ç†error .message .stack .code var err =new Error(â€˜è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰é”™è¯¯â€™); å…¶å®ƒ vscæ•™ç¨‹http://i5ting.github.io/vsc/#3.es6###3.1ä»€ä¹ˆæ˜¯es6ï¼Ÿ1ECMAScript esæ ‡å‡†çš„ä½œç”¨ å®šä¹‰jsçš„å‘å±•æ–¹å‘çš„ä¸€å¥—æ ‡å‡† ###3.2ä¸ºä»€ä¹ˆç”¨es6ï¼Ÿ1æ–°çš„è¯­æ³•ï¼Œå†™èµ·æ¥æ›´ä¸¥è°¨æ›´å®‰å…¨æ›´ç®€ä¾¿ã€‚ ###3.3ä¸ºä»€ä¹ˆå‰ç«¯ä¸ç”¨ï¼Œnodeè¦ç”¨ï¼Ÿ12345js---&gt;æµè§ˆå™¨--&gt;å¼•æ“æ‰§è¡Œjsä»£ç ie ff chromenode----&gt;v8æ‰§è¡Œjsä»£ç node ä¸è€ƒè™‘å…¼å®¹æ€§ï¼Œes6èƒ½ç»™æˆ‘ä»¬å¸¦æ¥å¾ˆå¤šå¥½å¤„ã€‚Node.js 6è¦†ç›–äº†93%çš„ECMAScript 6 é˜®ä¸€å³°es6å…¥é—¨###3.4 use strictä¸¥æ ¼æ¨¡å¼ 123456789æ¶ˆé™¤Javascriptè¯­æ³•çš„ä¸€äº›ä¸åˆç†ã€ä¸ä¸¥è°¨ä¹‹å¤„ï¼Œå‡å°‘ä¸€äº›æ€ªå¼‚è¡Œä¸º; - æ¶ˆé™¤ä»£ç è¿è¡Œçš„ä¸€äº›ä¸å®‰å…¨ä¹‹å¤„ï¼Œä¿è¯ä»£ç è¿è¡Œçš„å®‰å…¨ï¼› - æé«˜ç¼–è¯‘å™¨æ•ˆç‡ï¼Œå¢åŠ è¿è¡Œé€Ÿåº¦ï¼› - ä¸ºæœªæ¥æ–°ç‰ˆæœ¬çš„Javascriptåšå¥½é“ºå«ã€‚&apos;use strict&apos;ä¿ç•™å­—ï¼šä¸€æ—¦å‡ºç°Unexpected strict mode reserved wordè¿™æ ·çš„é”™è¯¯è¯´æ˜ä½ ç”¨ä¿ç•™å­—åšäº†å‚æ•°åäº†ã€‚es6--&gt;implements, interface, let, package, private, protected, public, static, yieldes5--&gt;class, enum, export, extends, import, super é˜®ä¸€å³° ä¸¥æ ¼æ¨¡å¼ ###3.5 letåœ¨ä½¿ç”¨letå‘½ä»¤å£°æ˜å˜é‡æ—¶ï¼Œä¸€ä¸ªå˜é‡ååªèƒ½å£°æ˜ä¸€æ¬¡ï¼Œä¸å­˜åœ¨å‘½åå†²çªã€‚letå®šä¹‰ä½œç”¨åŸŸåœ¨ä»£ç å—é‡Œ,è§£å†³å‘½åå†²çªé—®é¢˜ï¼Œèƒ½ä½“ç°ä»£ç çš„å°è£…æ€§å˜é‡æç¤ºï¼Œç”¨letä¸å­˜åœ¨å˜é‡æç¤ºï¼Œä¼šç›´æ¥æŠ¥é”™ï¼Œå‘Šè¯‰ä½ å˜é‡æ²¡æœ‰å®šä¹‰letå‘½ä»¤æ¯æ¬¡å®šä¹‰çš„ä½œç”¨åŸŸéƒ½åœ¨æœ¬æ¬¡å¾ªç¯çš„æ–¹æ³•ä½“å†… ###3.6 const//å®šä¹‰å¸¸é‡ï¼Œä¸ä¼šå‘ç”Ÿå˜åŒ–//å¦‚å®šä¹‰äº†å¸¸é‡ï¼Œå†å»ä¿®æ”¹å°±ä¼šæŠ¥é”™error Assignment to constant variable ä¸å¯ä»¥ç»™å¸¸é‡èµ‹å€¼//constå®šä¹‰çš„å¸¸é‡ï¼Œä½œç”¨åŸŸä¸letç›¸åŒ//åº”ç”¨åœºæ™¯constç”¨æ¥å®šä¹‰é™æ€å˜é‡,åŠ è½½æ¨¡å—çš„æ—¶å€™ï¼Œå®šä¹‰ä¸ªå¸¸é‡ï¼ŒæŠŠæ¨¡å—èµ‹å€¼ç»™å¸¸é‡ ###3.7 å—çº§ä½œç”¨åŸŸå‡¡æ˜¯è¢«{}åŒ…è£¹çš„ä»£ç å±äºä¸€ä¸ªä»£ç å— ###3.8promisehttps://cnodejs.org/topic/560dbc826a1ed28204a1e7deå¼‚æ­¥æµç¨‹æ§åˆ¶çš„è§£å†³æ–¹æ¡ˆå›è°ƒåœ°ç‹± å¼‚æ­¥æµç¨‹â€”&gt;å›è°ƒå‡½æ•°çš„åµŒå¥— å¼‚æ­¥æµç¨‹æ§åˆ¶â€”-&gt;ç”¨åŒæ­¥çš„æ–¹å¼å»å†™å¼‚æ­¥çš„ä»£ç  ###3.8 å­—ç¬¦ä¸²çš„ä¸€äº›æ‰©å±•${} 4. æ–‡ä»¶æ“ä½œ4.1 Bufferåå…­è¿›åˆ¶ï¼š0ã€1ã€2ã€3ã€4ã€5ã€6ã€7ã€8ã€9ã€aã€bã€cã€dã€eã€f æ»¡16è¿›ä½ æ‰€ä»¥ 0X10=16è®¡ç®—æœºæœ€æ—©è¯ç”Ÿçš„æ—¶å€™ï¼Œæ²¡æœ‰ä¸­æ–‡ï¼Œåœ¨ç¾å›½ 26ä¸ªè‹±æ–‡å­—æ¯ï¼Œ@ ! , . - + = è®¡ç®—æœºåªèƒ½è¯†åˆ« 0 æˆ–è€… 1 æŠŠä½ çš„å­—ç¬¦å’Œè®¡ç®—æœºçœŸæ­£å­˜å‚¨çš„äºŒè¿›åˆ¶æ•°æ®åšäº†ä¸€ä¸ªå­—å…¸ï¼š å¯ä»¥é€šè¿‡ å¼€æºä¸­å›½ å®˜ç½‘ç½‘ç«™æä¾›çš„ä¸€ä¸ªå·¥å…·é¡µé¢ï¼šhttp://tool.oschina.net/ éšç€è®¡ç®—æœºæ™®åŠåˆ°äº†ä¸–ç•Œå„åœ°ï¼ŒASCII ç  å·²ç»ä¸èƒ½æ»¡è¶³ä¸–ç•Œå„åœ°äººä»¬çš„éœ€æ±‚äº† è®¡ç®—æœºè¿›å…¥ä¸­å›½ä¹‹åï¼Œåæ¥åœ¨åŸæ¥çš„ ASCII ç åŸºç¡€ä¹‹ä¸Šæ‰©å±•äº†ä¸€ä¸ªæ–°çš„å­—ç¬¦é›†ç¼–ç ï¼šgb2012ï¼Œå­—å…¸ å¤§å­—å…¸utf-8ç”¨æ¥æ”¯æŒä¸­æ–‡å­—èŠ‚çš„è½¬åŒ– 1æ±‰å­—=2å­—èŠ‚ 00100010 000000001å­—èŠ‚ï¼ˆByte)ï¼8å­—ä½ï¼8ä¸ªäºŒè¿›åˆ¶æ•°1å­—ä½(bit)ï¼1ä¸ªäºŒè¿›åˆ¶æ•°1B=8b1KB=1024B1MB=1024KB1GB=1024MB 4.1.1 åˆ›å»ºBufferBuffer æ˜¯ä¸€ä¸ªåƒ Array çš„å¯¹è±¡ï¼Œå®ƒçš„å…ƒç´ ä¸º16è¿›åˆ¶çš„ä¸¤ä½æ•°ï¼ˆ0-255çš„å€¼ï¼‰ï¼Œä¸»è¦ç”¨äºæ“ä½œå­—èŠ‚ï¼ŒBuffer æ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œä½¿ç”¨çš„æ—¶å€™ä¸éœ€è¦ require new Buffer(size) new Buffer(str,[encoding]) 4.1.2 Bufferçš„ä¸€äº›å±æ€§å’Œæ–¹æ³• buf[index] é€šè¿‡ä¸‹æ ‡è®¿é—® buffer çš„æŸä¸ªå­—èŠ‚çš„æ•°æ® buf.indexOf(value,[byteOffset],[encoding]) æŸ¥æ‰¾æŸä¸ªå­—ç¬¦åœ¨ buffer å†…å­˜ä¸­çš„å­—èŠ‚ä¸‹æ ‡ buf.includes(value,[byteOffset],[encoding]) buf.length buf.slice([start,[end]]) buf.toString([encoding],[start], [end]) buf.write(string,[offset],[length],[encoding]) 4.1.3 é€ æˆä¹±ç çš„åŸå› æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„ç¼–ç ä¸€èˆ¬å°±æ˜¯æŒ‡ å­—ç¬¦é›†ç¼–ç ï¼Œä¸€èˆ¬ç”¨äºå­—ç¬¦ä¸² å½“ä½ æŠŠä¸€ä¸ª gbk ç¼–ç æ–‡ä»¶å‘é€ç»™äº†ä½ çš„ä¸€ä¸ªå›½å¤–å‹äººçš„æ—¶å€™ï¼Œä¹±ç çš„åŸå› å°±æ˜¯ï¼šä»–çš„æœºå™¨ä¸Šæ²¡æœ‰è¯¥ç¼–ç  è®¡ç®—æœºä¸ºäº†è®©å¤šè¯­è¨€æ“ä½œç³»ç»Ÿä¸‹å¯ä»¥è¯†åˆ«å’Œå…±äº«ä¸€ç§ç¼–ç æ ¼å¼ï¼šæ‰€ä»¥è¯ç”Ÿäº† è¶…çº§å¤§å­—å…¸ï¼šutf-8 é€ æˆä¹±ç çš„åŸå› å…¶å®å°±æ˜¯ è¯»å–çš„ç¼–ç å’Œæ–‡ä»¶çš„ç¼–ç ä¸ä¸€è‡´ è¦æƒ³è§£å†³ä¹±ç ï¼šè®©æ–‡ä»¶ç¼–ç å’Œè¯»å–ç¼–ç ç»Ÿä¸€å³å¯ ä»€ä¹ˆæ˜¯å­—ç¬¦é›†ç¼–ç  ä¸ºä»€ä¹ˆè¦æœ‰ç¼–ç  è®¡ç®—æœºåªèƒ½è¯†åˆ«äºŒè¿›åˆ¶ ä¸ºäº†è®©è®¡ç®—æœºå¯ä»¥è¯†åˆ«å­—ç¬¦ï¼Œäººç±»åšäº†ä¸€ä¸ªå­—å…¸ äºŒè¿›åˆ¶ -&gt; å­—ç¬¦ çš„æ˜ å°„å…³ç³» ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿä¹±ç  æ–‡ä»¶ç¼–ç å’Œè¯»å–è¯¥æ–‡ä»¶çš„ç¼–ç ä¸ä¸€è‡´å¯¼è‡´çš„ å¦‚ä½•è§£å†³ä¹±ç  è®©æ–‡ä»¶å’Œè¯»å–çš„å­—ç¬¦ç¼–ç é›†ä¸€è‡´å³å¯ å¦‚ä½•è§£å†³ Node åŸç”Ÿä¸æ”¯æŒçš„ä¸€äº›ç¼–ç  é€šè¿‡ ç¬¬ä¸‰æ–¹åŒ…ï¼šiconv-lite è¯¥ç¬¬ä¸‰æ–¹åŒ…å¯ä»¥è§£å†³ gbk ç­‰ç¼–ç ä¸æ”¯æŒçš„é—®é¢˜###4.2æ–‡ä»¶æµ æµå¯¹è±¡ stream fs.readFile()å’Œfs.writeFile()é—®é¢˜ï¼Ÿ å¯¹å¤§æ–‡ä»¶çš„å¤„ç†ï¼Œä¾‹å¦‚ä¸‹è½½ é€šè¿‡æ–‡ä»¶æµçš„å½¢å¼ä¼ è¾“å¤§æ–‡ä»¶ const rs = fs.createReadStream(path1); const ws = fs.createWriteStream(path1); rs.pipe(ws);-å¦‚ä½•å»æ§åˆ¶æµã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç›‘å¬streamå¯¹è±¡é‡Œé¢çš„äº‹ä»¶ï¼Œå»æ§åˆ¶è¯»å†™æµã€‚ å…¶å®ƒ vscæ•™ç¨‹http://i5ting.github.io/vsc/","categories":[{"name":"javascript","slug":"javascript","permalink":"http://blogzhou.top/categories/javascript/"}],"tags":[{"name":"JS","slug":"JS","permalink":"http://blogzhou.top/tags/JS/"}]},{"title":"node-lesson3","slug":"old_06.node-lesson3","date":"2016-12-08T02:30:50.000Z","updated":"2020-12-16T07:58:47.382Z","comments":true,"path":"2016/12/08/old_06.node-lesson3/","link":"","permalink":"http://blogzhou.top/2016/12/08/old_06.node-lesson3/","excerpt":"","text":"#node-lesson3 1.0 nvmå¸¸ç”¨å‘½ä»¤ nvmé¡¹ç›®åœ°å€ï¼šnvm-githubåœ°å€ æŸ¥çœ‹æ‰€æœ‰å·²å®‰è£…çš„æœ¬åœ°çš„nodeç‰ˆæœ¬nvm list åˆ‡æ¢nodeç‰ˆæœ¬nvm use ç‰ˆæœ¬å· å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„nodenvm install ç‰ˆæœ¬å· ä½æ•° å¸è½½å·²å®‰è£…çš„æŒ‡å®šç‰ˆæœ¬çš„nodenvm uninstall ç‰ˆæœ¬å· ###1.1æ¨¡å—çš„åˆ†ç±» ```12345678910111213141516- æ ¸å¿ƒæ¨¡å— + fs file system + http + os + path + querystring + url&lt;!--more--&gt;###1.2æ¨¡å—ä¸‰å…„å¼Ÿ requireã€moduleã€exports- requireçš„å®ç°åŸç†```æŠŠä»£ç ä»æ–‡ä»¶ä¸­è¯»å‡ºæ¥ï¼Œç”¨åŒ¿åå‡½æ•°çš„æ–¹å¼å¤´å°¾åŒ…è£…ï¼Œè¿”å›modules.exportså¯¹è±¡ï¼Œæ›éœ²å‡ºæƒ³è¦æ›éœ²å‡ºæ¥çš„å±æ€§ã€æ–¹æ³•ã€å¯¹è±¡ã€‚ è¡¥å……äº†exportsæ˜¯æŒ‡å‘modules.exportsçš„ä¸€ä¸ªæŒ‡é’ˆï¼Œexportsèƒ½åšçš„ï¼Œmodules.exportséƒ½èƒ½åšçš„ã€‚ requireæŸ¥æ‰¾æ–‡ä»¶ã€åŒ…åŸç† 12ç¬¬äºŒæ¬¡åŠ è½½çš„æ—¶å€™ä¼˜å…ˆä»ç¼“å­˜æŸ¥æ‰¾è¯»å–ï¼Œnode_modulesä¸­æ²¡æœ‰çš„ï¼Œä»çˆ¶æ–‡ä»¶å¤¹ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ²¡æœ‰ï¼Œç›´åˆ°æ ¹ç›®å½•ä¸ºæ­¢ module 1é‡Œé¢ä¿å­˜äº†æ¨¡å—çš„ä¿¡æ¯è·¯å¾„ã€çˆ¶å­ä¿¡æ¯ã€æ›éœ²å‡ºçš„å¯¹è±¡ä¿¡æ¯ exports 123module.exports åˆ«åmodule.exports=123;å·²ç»ä½¿ç”¨è¿‡ä¸€æ¬¡äº†ï¼Œexportså°±ä¸ç”Ÿæ•ˆäº†module.exports.a=12;è¿™æ ·ä½¿ç”¨,exportsæ˜¯è¿˜å¯ä»¥ä½¿ç”¨çš„ ###1.4åŒ…123package.jsonæ˜¯åŒ…çš„è¯´æ˜ä¹¦ï¼Œdependencieså½“å‰åŒ…æ‰€ä¾èµ–çš„åŒ…ï¼š&gt;ã€&lt;ã€&gt;=ã€&lt;=ã€~ã€*ã€&quot; &quot;ã€Xã€^ã€ devDependencies å¼€å‘ç¯å¢ƒä¸­åŒ…æ‰€ä¾èµ–çš„åŒ…ï¼š ###1.5npm12345678npm init åˆ›å»ºpackage.jsonæ–‡ä»¶npm install å°†package.jsonä¸­çš„æ–‡ä»¶ä¾èµ–çš„åŒ…ä»ç½‘ä¸Šä¸‹è½½åˆ°æœ¬åœ°npm install -save åŒ…å å°†åŒ…ä¸‹è½½ä¸‹æ¥å¹¶ä¸”åŠ è½½åˆ°dependenciesä¸­å»npm i -S åŒ…å æ›¿ä»£ä¸Šé¢çš„å‘½ä»¤npm install -save-dev åŒ…å å°†åŒ…ä¸‹è½½ä¸‹æ¥å¹¶ä¸”åŠ è½½åˆ°devDependenciesä¸­å»npm i -D åŒ…å æ›¿ä»£ä¸Šé¢çš„å‘½ä»¤npm install -g åŒ…å å…¨å±€å®‰è£… å®‰è£…çš„æ˜¯å…¨å±€å·¥å…·npm docs åŒ…å æŸ¥çœ‹åŒ…çš„æ–‡æ¡£ ###1.6nrm npmçš„æ•°æ®æºç®¡ç†å·¥å…·123nrm ls æŸ¥çœ‹npmçš„æ•°æ®æºnrm use åˆ‡æ¢npmä¸‹è½½åŒ…çš„åœ°å€nrm test æµ‹è¯•ä¸‹å“ªä¸ªæ•°æ®æºå¿« 1.7 3mnpm nodeçš„åŒ…ç®¡ç†å·¥å…·nvm nodeçš„ç‰ˆæœ¬ç®¡ç†å·¥å…·nrm npmçš„æ•°æ®æºç®¡ç†å·¥å…· ###1.8ç®­å¤´å‡½æ•°1è¯­æ³•ç³–æ›¿ä»£function()&#123;&#125; v=&gt;v #2.i/o ###2.1ä»€ä¹ˆæ˜¯i/oï¼Ÿ 12io inputã€output è¾“å…¥è¾“å‡ºï¼Œç”µè„‘çš„è¾“å…¥è¾“å‡ºï¼Œä¾‹å¦‚éŸ³é¢‘å½•éŸ³è¡¨ç¤ºå£°éŸ³è¾“å…¥ã€å¬éŸ³ä¹æ˜¯å£°éŸ³çš„è¾“å‡ºç½‘ç»œä¸Šçš„ä¼ è¾“å…¨éƒ¨æ˜¯åœ¨ä¼ å­—ç¬¦ä¸²ï¼Œi/oåœ¨æœåŠ¡å™¨ä¸Šå¯ä»¥ç†è§£ä¸ºè¯»å†™æ“ä½œã€‚ ###2.2ä»€ä¹ˆæ˜¯å¹¶å‘ï¼Ÿ1ä¸€ä¸ªæ—¶é—´æ®µä¸­æœ‰å‡ ä¸ªç¨‹åºéƒ½å¤„äºå·²å¯åŠ¨è¿è¡Œåˆ°è¿è¡Œå®Œæ¯•ä¹‹é—´ã€‚ #3å¼‚æ­¥i/oä¸äº‹ä»¶é©±åŠ¨ ###3.1ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿ12è¿›ç¨‹æ˜¯ä¸ºè¿è¡Œå½“ä¸­çš„åº”ç”¨ç¨‹åºæä¾›è¿è¡Œç¯å¢ƒçš„ä¸€ä¸ªè¿è¡Œå½“ä¸­çš„åº”ç”¨ç¨‹åºå°±ä¼šæœ‰ä¸€ä¸ªè¿›ç¨‹ä¸ä¹‹ç›¸å¯¹åº” ###3.2ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿ1234çº¿ç¨‹æ˜¯ç”¨æ¥è¿è¡Œåº”ç”¨ç¨‹åºä¸­ä»£ç çš„ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨ä¸€ä¸ªæ—¶é—´åªèƒ½åšä¸€ä»¶äº‹ä»¶ã€‚å¤šçº¿ç¨‹ï¼Œè°ƒåº¦èµ·æ¥å¾ˆéº»çƒ¦ã€‚nodeæ˜¯å•çº¿ç¨‹æ‰§è¡Œï¼Œç”¨å¼‚æ­¥æ›¿ä»£äº†å¤šçº¿ç¨‹ ###3.3åŒæ­¥ã€å¼‚æ­¥æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ12å¼‚æ­¥ä¸ä¼šé˜»å¡åé¢çš„ä»£ç ï¼ŒåŒæ­¥ä¼šé˜»å¡åé¢çš„ä»£ç ä¸€æ¡çº¿ç¨‹å…ˆæ‰§è¡ŒåŒæ­¥çš„ä»£ç åæ‰§è¡Œå¼‚æ­¥çš„ä»£ç ã€‚ ###3.4å¼‚æ­¥éi/oæ“ä½œå’Œå¼‚æ­¥i/oæ“ä½œ12å¼‚æ­¥éio setTimeout setIntervalå¼‚æ­¥IOæ“ä½œ æ“ä½œæ–‡ä»¶ ç½‘ç»œæ“ä½œ fs ###3.5nodeçš„äº‹ä»¶é©±åŠ¨æ¨¡å‹ï¼Ÿ12 ###3.5å¼‚æ­¥å’Œå¤šçº¿ç¨‹çš„æ¯”è¾ƒï¼Ÿ1nodeçš„å¼‚æ­¥æ˜¯å¸®åŠ©æˆ‘ä»¬å»åšäº†å¤šçº¿ç¨‹çš„æ“ä½œï¼Œç®€åŒ–äº†ä»£ç  #4.æ–‡ä»¶æ“ä½œ ###4.1æ–‡ä»¶çš„å®Œæ•´è¯»å†™12fsæ¨¡å—---ã€‹æ“ä½œæ–‡ä»¶---ã€‹io----ã€‹nodeçš„ç‰¹é•¿fsæ¨¡å—æ˜¯nodeéå¸¸é‡è¦çš„æ¨¡å—ï¼Œèƒ½ä½“ç°å‡ºnodeçš„ä¼˜åŠ¿ fs.readFile() è¯»æ–‡ä»¶ fs.writeFile() å†™æ–‡ä»¶ fs.appendFile() åœ¨æ–‡ä»¶çš„å†…éƒ¨å»è¿½åŠ å†™ä¸€äº›å†…å®¹ fs.mkdir() åˆ›å»ºæ–‡ä»¶å¤¹ fs.readdir() è¯»æ–‡ä»¶å¤¹ fs.access() åˆ¤æ–­è·¯å¾„ fs.stat()isFileï¼šç”¨äºåˆ¤æ–­è¢«æŸ¥çœ‹çš„å¯¹è±¡æ˜¯å¦ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæ˜¯è¿”å›trueï¼Œå¦åˆ™ï¼Œè¿”å›falseï¼›isDirectoryï¼šç”¨äºåˆ¤æ–­è¢«æŸ¥çœ‹çš„å¯¹è±¡æ˜¯å¦ä¸ºä¸€ä¸ªç›®å½•ï¼Œå¦‚æœæ˜¯çš„è¯åˆ™è¿”å›trueï¼Œå¦åˆ™ï¼Œè¿”å›falseï¼›isSymbolicLinkï¼šç”¨äºåˆ¤æ–­è¢«æŸ¥çœ‹çš„æ–‡ä»¶æ˜¯å¦ä¸ºä¸€ä¸ªç¬¦å·é“¾æ¥æ–‡ä»¶ï¼Œå¦‚æœæ˜¯çš„è¯åˆ™è¿”å›trueï¼Œå¦åˆ™ï¼Œè¿”å›falseã€‚è¯¥æ–¹æ³•ä»…åœ¨lstatæ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸­æœ‰æ•ˆï¼› #5.å¼‚å¸¸å¤„ç†ä»€ä¹ˆæ˜¯å¼‚å¸¸ï¼Ÿè®¡ç®—æœºä¸èƒ½å¤„ç†çš„çŠ¶å†µç§°ä¹‹ä¸ºå¼‚å¸¸try catch åªèƒ½æ•è·åŒæ­¥å¼‚å¸¸try { fs.accessSync(â€˜./02sfdasdfio.jsâ€™);} catch (err) { console.log(â€œ1â€+err);}å¼‚æ­¥å¼‚å¸¸å¯¹è±¡å’Œè¢«try catchæ•è·çš„å¯¹è±¡æ˜¯ä¸€æ ·çš„ #6.path","categories":[{"name":"javascript","slug":"javascript","permalink":"http://blogzhou.top/categories/javascript/"}],"tags":[{"name":"JS","slug":"JS","permalink":"http://blogzhou.top/tags/JS/"}]},{"title":"node-lesson2","slug":"old_05.node-lesson2","date":"2016-11-28T08:50:30.000Z","updated":"2020-12-16T07:38:00.857Z","comments":true,"path":"2016/11/28/old_05.node-lesson2/","link":"","permalink":"http://blogzhou.top/2016/11/28/old_05.node-lesson2/","excerpt":"node-lesson21.1 æ¦‚å¿µ Node.jsä¸JavaScriptçš„å…³ç³»? Node.jsåŸºäºå“ªä¸ªJavaScriptå¼•æ“ï¼Ÿ Node.jsçš„ç‰¹ç‚¹ï¼Ÿ Node.jsåªèƒ½è¿è¡Œåœ¨Windowsä¸Šå—ï¼Ÿ 1.2 cmd cdï¼ˆchange directoryï¼‰åˆ‡æ¢ç›®å½• mdï¼ˆmake directoryï¼‰æ–°å»ºç›®å½• rdï¼ˆremove directoryï¼‰åˆ é™¤éç©ºç›®å½• dirï¼ˆdirectoryï¼‰æŸ¥çœ‹ç›®å½•ä¸­çš„æ¡ç›®ls linux renï¼ˆrenameï¼‰é‡å‘½åæ–‡ä»¶ delï¼ˆdeleteï¼‰åˆ é™¤æ–‡ä»¶ clsï¼ˆclear screenï¼‰æ¸…å±clear linux","text":"node-lesson21.1 æ¦‚å¿µ Node.jsä¸JavaScriptçš„å…³ç³»? Node.jsåŸºäºå“ªä¸ªJavaScriptå¼•æ“ï¼Ÿ Node.jsçš„ç‰¹ç‚¹ï¼Ÿ Node.jsåªèƒ½è¿è¡Œåœ¨Windowsä¸Šå—ï¼Ÿ 1.2 cmd cdï¼ˆchange directoryï¼‰åˆ‡æ¢ç›®å½• mdï¼ˆmake directoryï¼‰æ–°å»ºç›®å½• rdï¼ˆremove directoryï¼‰åˆ é™¤éç©ºç›®å½• dirï¼ˆdirectoryï¼‰æŸ¥çœ‹ç›®å½•ä¸­çš„æ¡ç›®ls linux renï¼ˆrenameï¼‰é‡å‘½åæ–‡ä»¶ delï¼ˆdeleteï¼‰åˆ é™¤æ–‡ä»¶ clsï¼ˆclear screenï¼‰æ¸…å±clear linux 1.3 path ç¯å¢ƒå˜é‡ pathç¯å¢ƒå˜é‡çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ åœ¨Windowsä¸­é…ç½®pathç¯å¢ƒå˜é‡çš„æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ 1.4 REPLï¼ˆRead Eval Print Loopï¼‰äº¤äº’å¼è¿è¡Œç¯å¢ƒ ä½œç”¨ï¼šä¸€èˆ¬æ¥è¯´ï¼Œå¯ä»¥ç”¨æ¥åšä¸€äº›APIçš„æµ‹è¯• è¿›å…¥REPLè¿è¡Œç¯å¢ƒ é€€å‡ºREPLè¿è¡Œç¯å¢ƒ 1.5 Node.jsåŸºç¡€çŸ¥è¯† å¦‚ä½•è®©Node.jsæ‰§è¡Œä¸€ä¸ªjsæ–‡ä»¶node æ–‡ä»¶å -ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„ .\\æˆ–è€…..\\ ç›¸å¯¹è·¯å¾„ c:/xx/xx.jsç»å¯¹è·¯å¾„ \\ linux æ ¹ç›®å½• windows ç›˜ç¬¦çš„æ ¹ç›®å½• 1.6 globals global __dirnameå’Œ__filenameå…³äºè¿™ä¿©å®¶ä¼™ï¼Œä¸€èˆ¬åœ¨è¯»å–æ–‡ä»¶çš„æ—¶å€™ï¼Œæœ€å¥½ä½¿ç”¨ç»å¯¹è·¯å¾„çš„æ–¹å¼ï¼Œé€šè¿‡è¿™ä¿©å®¶ä¼™æ‹¼æ¥ console assert(foo==1,â€å¤±è´¥â€);æ–­è¨€ time(â€˜timerâ€™) timeEnd(â€˜timerâ€™) æˆå¯¹çš„å‡ºç° 1.7 æ¨¡å—ç³»ç»Ÿ ä»€ä¹ˆæ˜¯æ¨¡å—ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å— æ¨¡å—ä½œç”¨åŸŸåœ¨ä¸€ä¸ªæ¨¡å—å†…å˜é‡ã€å‡½æ•°ã€å¯¹è±¡éƒ½å±äºè¿™ä¸ªæ¨¡å—ï¼Œå¯¹å¤–æ˜¯å°é—­çš„ã€‚ requirerequire(&quot;è·¯å¾„&quot;)//è·¯å¾„ç°é˜¶æ®µä½¿ç”¨ç›¸å¯¹è·¯å¾„ exportsæ˜¯module.exportsçš„ä¸€ä¸ªåˆ«åã€å¼•ç”¨ï¼Œexportsèƒ½åšçš„module.exportséƒ½å¯ä»¥å®Œæˆã€‚ module.exportsæœ€ç»ˆæ›éœ²å‡ºå»çš„å¯¹è±¡ï¼Œæƒ³æ›éœ²å‡ºå»å¯¹è±¡ã€å±æ€§ã€æ–¹æ³•å°±æŒ‚è½½åˆ°module.exports #2.æ¨¡å—ç³»ç»Ÿ ##2.1æ¨¡å—çš„ç§ç±» åœ¨Node.jsä¸­ï¼Œæ¨¡å—åˆ†ä¸ºä¸¤ç±»ï¼š12345678910ç¬¬ä¸€ç±»ï¼Œæ ¸å¿ƒæ¨¡å—ï¼ˆåŸç”Ÿæ¨¡å—ï¼‰ï¼Œnodeè‡ªå¸¦ï¼Œç”¨åç§°ç›´æ¥å¯ä»¥åŠ è½½ã€‚- æ ¸å¿ƒæ¨¡å— + fs file system + http + os + path + querystring + url ...ç¬¬äºŒç±»ï¼Œæ–‡ä»¶æ¨¡å—ï¼Œç”¨è·¯å¾„åŠ è½½ï¼Œæœ‰ä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶æ¨¡å—-----&gt;åŒ…ï¼Œå¯ä»¥ç”¨åå­—ã€‚ module æ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œå®ƒçš„ä½œç”¨æ˜¯å­˜å‚¨æ¨¡å—ä¿¡æ¯çš„,æ¯ä¸€ä¸ªjsæ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæ¯ä¸€ä¸ªæ¨¡å—é‡Œé¢éƒ½æœ‰ä¸€ä¸ªmoduleï¼Œmoduleé‡Œé¢è¿˜å­˜å‚¨äº†çˆ¶å­ç»“æ„ç›´æ¥ç»™module.exportsèµ‹å€¼ï¼Œexportsæ˜¯æ— æ•ˆï¼Œç”¨å±æ€§çš„å½¢å¼å»èµ‹å€¼çš„æ—¶å€™äºŒè€…éƒ½æœ‰æ•ˆ 2.2 ä¼˜å…ˆä»ç¼“å­˜åŠ è½½1common.jsè§„èŒƒ-----&gt;åŠ è½½åï¼Œå†æ¬¡åŠ è½½æ—¶ï¼Œå»ç¼“å­˜ä¸­å–module.exports 2.3 requireå‚æ•°è§£æ 1234æ ¸å¿ƒæ¨¡å—æ˜¯Node.jsåŸç”Ÿæä¾›çš„åŠ è½½æ ¸å¿ƒæ¨¡å—çš„æ—¶å€™ï¼Œä¸éœ€è¦ä¼ å…¥è·¯å¾„ï¼Œå› ä¸ºNode.jså·²ç»å°†æ ¸å¿ƒæ¨¡å—çš„æ–‡ä»¶ä»£ç ç¼–è¯‘åˆ°äº†äºŒè¿›åˆ¶çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­äº†åœ¨åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼ŒåŸç”Ÿçš„æ ¸å¿ƒæ¨¡å—çš„ä¼˜å…ˆçº§æ˜¯æ˜¯æœ€é«˜çš„ ./æˆ–../å¼€å§‹çš„ç›¸å¯¹è·¯å¾„æ–‡ä»¶æ¨¡å— å’Œ ä½ è¦åŠ è½½çš„æ¨¡å—çš„æ–‡ä»¶åæ‹¼æ¥ ```1- ä»¥/å¼€å§‹çš„ç»å¯¹è·¯å¾„æ–‡ä»¶æ¨¡å— åœ¨Linuxæˆ–è€…MAcçš„æ“ä½œç³»ç»Ÿä¸­ï¼Œ/è¡¨ç¤ºç³»ç»Ÿçš„æ ¹è·¯å¾„ åœ¨Windowsä¸­ï¼Œ/è¡¨ç¤ºå½“å‰æ–‡ä»¶æ¨¡å—æ‰€å±çš„æ ¹ç£ç›˜è·¯å¾„ä¸å»ºè®®ä½¿ç”¨ï¼Œäº†è§£12- æ ‡è¯†ç¬¦ä¸­å¯ä»¥ä¸åŒ…å«æ‰©å±•å + Nodeä¼šæŒ‰ç…§`.jsã€.nodeã€.json`çš„æ¬¡åºè¡¥è¶³æ‰©å±•åï¼Œä¾æ¬¡å°è¯• ä¸åŒ…å«æ‰©å±•åçš„æ—¶å€™ï¼ŒNode.jsä¼šæŒ‰ç…§ è·¯å¾„.js ä»¥åè‡ªå·±åœ¨åŠ è½½jsæ–‡ä»¶æ¨¡å—çš„æ—¶å€™ï¼Œå°±çœç•¥æ‰.jsåç¼€å°±å¯ä»¥äº† è·¯å¾„.node åç¼€ä¸ºnodeçš„æ–‡ä»¶æ˜¯c/c++å†™çš„ä¸€äº›æ‰©å±•æ¨¡å— è·¯å¾„.json å¦‚æœæ˜¯åŠ è½½jsonæ–‡ä»¶æ¨¡å—ï¼Œæœ€å¥½åŠ ä¸Šåç¼€.jsonï¼Œèƒ½ç¨å¾®çš„æé«˜ä¸€ç‚¹åŠ è½½çš„é€Ÿåº¦ .jsonæ–‡ä»¶æœ€ç»ˆNode.jsä¹Ÿæ˜¯é€šè¿‡fsè¯»æ–‡ä»¶çš„å½¢å¼è¯»å–å‡ºæ¥çš„ï¼Œç„¶åé€šè¿‡JSON.parse()è½¬æ¢æˆä¸€ä¸ªå¯¹è±¡ Node.jsä¼šé€šè¿‡åŒæ­¥é˜»å¡çš„æ–¹å¼çœ‹è¿™ä¸ªè·¯å¾„æ˜¯å¦å­˜åœ¨ ä¾æ¬¡å°è¯•ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢ï¼Œ å¦‚æœæ‰¾ä¸åˆ°ï¼ŒæŠ¥é”™ 123456 - require åŠ è½½åŒ…çš„æ—¶å€™``` ç›´æ¥å†™åŒ…åï¼Œå…ˆåœ¨åŒ…å†…çš„node_modules, ç›®å½•ä¸‹æŸ¥æ‰¾ï¼Œå»çˆ¶çº§ç›®å½•ä¸‹çš„node_modulesç›®å½•ä¸‹æŸ¥æ‰¾ï¼Œ ä¾æ¬¡å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°æ ¹ç›®å½•ã€‚ å‚è€ƒæ–‡çŒ® 3.åŒ…è¿˜æœ‰ä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶æ¨¡å—ï¼Œå…¶å®å°±æ˜¯åŒ… é—®é¢˜ï¼šä½ å¼€çš„ä¸€ä¸ªåŠŸèƒ½æ¨¡å—ï¼Œè¿˜æ˜¯ä»¥æ–‡ä»¶çš„å½¢å¼æ•£åˆ—çš„ï¼Œä½ ç»™åˆ«äººä½¿ç”¨çš„æ—¶å€™å¾ˆéº»çƒ¦ã€‚ åŒ…çš„ä½œç”¨ï¼šåœ¨æ¨¡å—çš„åŸºç¡€ä¸Šè¿›ä¸€æ­¥ç»„ç»‡JavaScriptä»£ç  3.1 åŒ…çš„ç»„æˆ åŒ…ç»“æ„ åŒ…æè¿°æ–‡ä»¶package.json æè¿°ä½ çš„å½“å‰çš„åŒ…çš„ä¸€äº›ç›¸å…³çš„ä¿¡æ¯+dependencies åŒ…åï¼šâ€œç‰ˆæœ¬å·â€ +ç‰ˆæœ¬å· ä¸‹è½½å¤§äºæŸä¸ªç‰ˆæœ¬å·ï¼Œnpmä¼šä¸‹æœ€æ–°ç‰ˆ &lt; +ç‰ˆæœ¬å· ä¸‹è½½å°äºæŸä¸ªç‰ˆæœ¬å·ï¼Œnpmä¼šä¸‹å°äºè¿™ä¸ªç‰ˆæœ¬å·æœ€æ–°ç‰ˆ &lt;= å°äºç­‰äº ä¸€å®šä¼šä¸‹ä½ å†™çš„è¿™ä¸ªç‰ˆæœ¬ï¼Œé™¤éæ²¡æœ‰ä½ å†™çš„è¿™ä¸ªç‰ˆæœ¬ = å¤§äºç­‰äº ä¸‹è½½æœ€æ–°ç‰ˆ *ã€â€ â€œã€X ä»»æ„ npmä¼šç»™ä½ ä¸‹æœ€æ–°ç‰ˆ ~ +ç‰ˆæœ¬å· ä¼šå»ä¸‹çº¦ç­‰äºè¿™ä¸ªç‰ˆæœ¬çš„æœ€æ–°ç‰ˆï¼Œåœ¨å¤§ç‰ˆæœ¬ä¸å˜çš„æƒ…å†µä¸‹ä¸‹ä¸€ä¸ªæ¯”è¾ƒæ–°çš„ç‰ˆæœ¬ ^ +ç‰ˆæœ¬å· ä¸è·ƒè¿ç‰ˆæœ¬ä¸‹è½½ï¼Œ^2.1.0 npmä¼šä¸‹è½½å¤§ç‰ˆæœ¬ä¸å˜ï¼Œå»ä¸‹è½½2.x.xç‰ˆæœ¬é‡Œçš„æœ€è¿‘ç‰ˆ å‚è€ƒæ–‡çŒ® package.jsonå…¨å­—æ®µè§£æ ##npm install -g fast-init 3.2 package.jsonåŒ…çš„æè¿°æ–‡ä»¶ package.jsonæ–‡ä»¶å†…éƒ¨å°±æ˜¯ä¸€ä¸ªJSONå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„æ¯ä¸€ä¸ªæˆå‘˜å°±æ˜¯å½“å‰é¡¹ç›®çš„ä¸€é¡¹è®¾ç½®ï¼Œæ¯”å¦‚nameå°±æ˜¯é¡¹ç›®åç§°ï¼Œversionå°±æ˜¯é¡¹ç›®çš„ç‰ˆæœ¬å· åœ¨æ¨¡å—çš„åŠ è½½æœºåˆ¶ä¸­ï¼Œæœ‰ä¸€ä¸ªmainå±æ€§æ˜¯éå¸¸é‡è¦çš„ï¼Œå®ƒå¾ˆå¤§æ„ä¹‰ä¸Šå†³å®šäº†åŒ…è¦å¯¼å‡ºçš„æ¨¡å—ä½ç½® 3.3npm åŸºäºNode.jså¼€å‘çš„åŒ…çš„æ‰˜ç®¡ç½‘ç«™ Node.jsåŒ…ç®¡ç†å·¥å…· npm :åŸºäºåŒ…çš„è§„èŒƒå®ç°çš„ä¸€ä¸ªåŒ…ç®¡ç†å·¥å…· npm install åŒ…å å½“æ‰§è¡Œnpm installçš„æ—¶å€™ï¼Œå®ƒä¼šè‡ªåŠ¨è·‘åˆ°npmçš„ç½‘ç«™ï¼Œç„¶åæ‰¾åˆ°è¯¥åŒ…çš„githubåœ°å€ï¼Œæ‰¾åˆ°ä¹‹åï¼Œä¸‹è½½è¿™ä¸ªå‹ç¼©åŒ…ï¼Œç„¶ååœ¨æ‰§è¡Œnpm installçš„å½“å‰ç›®å½•ä¸‹æ‰¾ä¸€ä¸ªå«åšnode_modulesç›®å½•å¦‚æœæ‰¾åˆ°ï¼Œç›´æ¥è§£å‹è¿™ä¸ªå‹ç¼©åŒ…ï¼Œåˆ°node_modulesç›®å½•ä¸‹å¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™æ–°å»ºä¸€ä¸ªnode_modulesç›®å½•ï¼Œè§£å‹åˆ°è¯¥ç›®å½• npm install -g åŒ…å è¡¨ç¤ºå…¨å±€å®‰è£… npmåœ¨å®‰è£…çš„æ—¶å€™ï¼Œåœ¨å…¨å±€è®¾ç½®äº†ä¸€ä¸ªå®‰è£…ç›®å½•ï¼Œåªè¦æ˜¯å…¨å±€å®‰è£…å°±ä¼šæŠŠåŒ…å®‰è£…åˆ°è¿™ä¸ªç›®å½•é‡Œé¢å» npm install -g åŒ…å åªè¦æ˜¯å…¨å±€å®‰è£…å°±æ˜¯å®‰è£…å‘½ä»¤è¡Œå·¥å…· npm install ç¼©å†™ npm i å½“æ‰§è¡Œnpm installçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨åœ¨å½“å‰ç›®å½•ä¸­æŸ¥æ‰¾package.jsonæ–‡ä»¶å¦‚æœæ‰¾åˆ°ï¼Œæ‰¾é‡Œé¢çš„ dependencies å­—æ®µï¼Œå®‰è£…è¯¥å­—æ®µä¸­æ‰€æœ‰ä¾èµ–çš„é¡¹ npm docs åŒ…åé€šé£è¿™ä¸ªå‘½ä»¤æ‰“å¼€ åŒ…ç›¸å¯¹åº”çš„æ–‡æ¡£ npm install â€“save ç”Ÿäº§ç¯å¢ƒnpm i -S jquery@3.*å’±ä»¬ä»¥ååœ¨åšé¡¹ç›®çš„æ—¶å€™ï¼Œå…ˆåˆå§‹åŒ–ä¸€ä¸ªpackage.jsonæ–‡ä»¶ï¼Œåœ¨å®‰è£…ç¬¬ä¸‰æ–¹åŒ…ä¾èµ–çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿ç”¨npm install â€“save express,æ·»åŠ ä¾èµ–é¡¹åˆ°package.jsonæ–‡ä»¶ä¸­ï¼Œå®é™…å°±æ˜¯æ·»åŠ åˆ°dependencieså­—æ®µä¸­ npm install -save-dev å¼€å‘ç¯å¢ƒnpm i -D jquery@3.*å’±ä»¬ä»¥ååœ¨åšé¡¹ç›®çš„æ—¶å€™ï¼Œå…ˆåˆå§‹åŒ–ä¸€ä¸ªpackage.jsonæ–‡ä»¶ï¼Œåœ¨å®‰è£…ç¬¬ä¸‰æ–¹åŒ…ä¾èµ–çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿ç”¨npm install â€“save express,æ·»åŠ ä¾èµ–é¡¹åˆ°package.jsonæ–‡ä»¶ä¸­ï¼Œå®é™…å°±æ˜¯æ·»åŠ åˆ°devDependencieså­—æ®µä¸­ npm config set prefix ä¿®æ”¹å…¨å±€å®‰è£…ç›®å½•ä¸å»ºè®®ä½¿ç”¨ï¼Œå»ºè®®å»æ–‡ä»¶å¤¹é‡Œé¢æ”¹ C:\\Users\\ç”¨æˆ·å é‡Œé¢æœ‰ä¸€ä¸ª .npmrcæ–‡ä»¶å»é‡Œé¢æ”¹prefix = C:\\dev\\npm ï¼ˆå†™ä½ çš„è·¯å¾„ï¼‰å»å…¨å±€çš„ç¯å¢ƒå˜é‡pathé‡ŒæŠŠC:\\dev\\npm è·¯å¾„åŠ è¿›å» å‚è€ƒæ–‡çŒ® npmçš„å‘½ä»¤ npm è¿™ç§ä¸œè¥¿çš„æœ€ç»ˆçš„ç›®çš„å°±æ˜¯ï¼šè®©ä½ çš„å¼€å‘æ¨¡å¼å·¥ç¨‹åŒ–ï¼Œéƒ½ä¾é å·¥å…·æ¥ç®¡ç†nvm npm nrm3m12345nvm nodeç‰ˆæœ¬çš„ç®¡ç†å·¥å…·npm nodeçš„åŒ…ç®¡ç†å·¥å…·nrm npmçš„æ•°æ®æºç®¡ç†å·¥å…· npm install -g nrm #4.æ–‡ä»¶æ“ä½œ ###4.1ç®­å¤´å‡½æ•°12345678910111213141516171819202122ç®­å¤´å‡½æ•°å°±æ˜¯ä¸€ç§è¯­æ³•ç³–è¯­æ³•ç³–æ˜¯ä¸€ç§è¯­æ³•ï¼Œç”¨è¿™ç§è¯­æ³•èƒ½å°åˆ°ç”œå¤´ï¼Œèƒ½æ˜¯ç¼–ç¨‹é«˜æ•ˆå½“å‡½æ•°ä½“æœ‰ä¸€ä¸ªå‚æ•°æœ‰è¿”å›å€¼çš„æ—¶å€™var foo=function(v)&#123; return v;&#125;var foo=v=&gt;v;å½“å‡½æ•°ä½“æ²¡æœ‰å‚æ•°æœ‰è¿”å›å€¼çš„æ—¶å€™var foo=function()&#123; return v;&#125;var foo=()=&gt;v;å½“å‡½æ•°ä½“æœ‰å¤šä¸ªå‚æ•°æœ‰è¿”å›å€¼çš„æ—¶å€™var foo=function(v1,v2)&#123; return v1+v2;&#125;var foo=(v1,v2)=&gt;v1+v2;å½“å‡½æ•°ä½“æœ‰å¤šä¸ªå‚æ•°æ²¡æœ‰è¿”å›å€¼çš„æ—¶å€™var foo=function(v1,v2)&#123; console.log(v1); console.log(v2); &#125;var foo=(v1,v2)=&gt;&#123; console.log(v1); console.log(v2); &#125;; ###4.2æ–‡ä»¶è¯»å†™ fs.readFile() è¯»æ–‡ä»¶ fs.readFile(file, [options], callback)//file è¯»æ–‡ä»¶çš„è·¯å¾„//options ç”¨[]åŒ…è£¹çš„å¯é€‰å‚æ•°ï¼Œobject {â€œencodingâ€:â€uft8â€,â€flagâ€:â€râ€} string â€˜utf8â€™//callback function callbackå‡½æ•°é‡Œé¢æœ‰ä¸¤ä¸ªå‚æ•°//errè¡¨ç¤ºé”™è¯¯å¯¹è±¡ï¼Œå¦‚æœreadFileå‘ç”Ÿé”™è¯¯äº†ï¼Œåœ¨callbackå‡½æ•°é‡Œé¢ä¼šå›è¿”å›errï¼Œerrå¯¹è±¡é‡Œé¢å­˜ç€é”™è¯¯ä¿¡æ¯//å¦‚ä½•è¯»æ–‡ä»¶æˆåŠŸï¼Œerrä¸ºnull//dataå°±æ˜¯è¯»æ–‡ä»¶ï¼Œè¯»å‡ºæ¥çš„å†…å®¹ã€‚ fs.access(path,[mode], callback) ç”¨æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨//path åˆ¤æ–­è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼ˆä¹Ÿå¯ä»¥åˆ¤æ–­æ–‡ä»¶ï¼‰â€™./picâ€™//modeä¸€èˆ¬ä¸ç”¨ï¼Œé»˜è®¤å°±å¯ä»¥äº†ï¼Œç”¨çš„è¯æ˜¯ç”¨æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å¯è¯»å¯å†™å¯æ‰§è¡Œ//callback åªæœ‰ä¸€ä¸ªå‚æ•°errï¼Œé”™ï¼Œæ–‡ä»¶æœ‰é—®é¢˜ å…¶å®ƒ vscæ•™ç¨‹http://i5ting.github.io/vsc/ nrm ls æŸ¥çœ‹æ•°æ®æºnrm test æµ‹è¯•ä½ çš„ç½‘è¿é‚£ä¸ªnpmçš„æ•°æ®æºå¿«nrm use åˆ‡æ¢æ•°æ®æº5.é˜…è¯»å‚è€ƒæ–‡çŒ® æœ´çµ requireé˜…è¯»å‚è€ƒæ–‡çŒ® package.jsonå…¨å­—æ®µè§£æ6.githubè‡ªå·±ç©ç©","categories":[{"name":"javascript","slug":"javascript","permalink":"http://blogzhou.top/categories/javascript/"}],"tags":[{"name":"JS","slug":"JS","permalink":"http://blogzhou.top/tags/JS/"}]},{"title":"node-lesson1","slug":"old_04.node-lesson1","date":"2016-11-21T04:31:30.000Z","updated":"2020-12-16T07:35:11.562Z","comments":true,"path":"2016/11/21/old_04.node-lesson1/","link":"","permalink":"http://blogzhou.top/2016/11/21/old_04.node-lesson1/","excerpt":"#node-lesson1 ##1.è§£å†³å‡ ä¸ªé—®é¢˜ï¼Ÿ ###1.å‰ç«¯ã€åç«¯éƒ½æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿå‰ç«¯ åšé™æ€èµ„æºçš„åç«¯ æ“æ§æœåŠ¡å™¨çš„ç¡¬ä»¶çš„ ###2.ä¸ºä»€ä¹ˆå­¦ä¹ node.jsï¼Ÿ1.å°±ä¸šæœ‰å¸‚åœº2.æœ‰å•†ä¸šç”¨é€”å›½å†…ä¸€äº›åˆ›ä¸šå…¬å¸ç”¨ç”¨çš„æ¯”è¾ƒå¤šï¼ŒåŠŸå¤«ç†Šï¼ˆåšä¸Šé—¨ä¿å¥çš„ï¼Œç¾ç”²ã€æŒ‰æ‘©ï¼‰å›½å¤–çš„ä¸€äº›å¤§å…¬å¸éƒ½æœ‰ä½¿ç”¨ï¼šFacebookã€Twitterã€Googleå›½å†…çš„ä¸€äº›å¤§å…¬å¸ï¼šAlibabaï¼ˆå¤©çŒ«æ‰€æœ‰çš„é¡µé¢éƒ½æ˜¯é€šè¿‡Nodeæä¾›çš„æœåŠ¡ï¼‰ã€Tencentã€Baidu3.æœ¬èº«æŠ€æœ¯æ˜¯æœ‰ä»·å€¼4.jså¼€å‘ ###3.ä»€ä¹ˆæ˜¯JavaScriptï¼Ÿä¸€é—¨è„šæ­¥è¯­è¨€ éœ€è¦åµŒå…¥htmlæ‰§è¡Œ ###4.æµè§ˆå™¨ä¸­çš„JavaScriptå¯ä»¥åšä»€ä¹ˆï¼Ÿæ ¡éªŒè¡¨å• æ“ä½œdom ç­‰ç­‰ ###5.æµè§ˆå™¨ä¸­çš„JavaScriptä¸å¯ä»¥åšä»€ä¹ˆï¼Ÿæ“ä½œæœåŠ¡å™¨ç¡¬ä»¶","text":"#node-lesson1 ##1.è§£å†³å‡ ä¸ªé—®é¢˜ï¼Ÿ ###1.å‰ç«¯ã€åç«¯éƒ½æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿå‰ç«¯ åšé™æ€èµ„æºçš„åç«¯ æ“æ§æœåŠ¡å™¨çš„ç¡¬ä»¶çš„ ###2.ä¸ºä»€ä¹ˆå­¦ä¹ node.jsï¼Ÿ1.å°±ä¸šæœ‰å¸‚åœº2.æœ‰å•†ä¸šç”¨é€”å›½å†…ä¸€äº›åˆ›ä¸šå…¬å¸ç”¨ç”¨çš„æ¯”è¾ƒå¤šï¼ŒåŠŸå¤«ç†Šï¼ˆåšä¸Šé—¨ä¿å¥çš„ï¼Œç¾ç”²ã€æŒ‰æ‘©ï¼‰å›½å¤–çš„ä¸€äº›å¤§å…¬å¸éƒ½æœ‰ä½¿ç”¨ï¼šFacebookã€Twitterã€Googleå›½å†…çš„ä¸€äº›å¤§å…¬å¸ï¼šAlibabaï¼ˆå¤©çŒ«æ‰€æœ‰çš„é¡µé¢éƒ½æ˜¯é€šè¿‡Nodeæä¾›çš„æœåŠ¡ï¼‰ã€Tencentã€Baidu3.æœ¬èº«æŠ€æœ¯æ˜¯æœ‰ä»·å€¼4.jså¼€å‘ ###3.ä»€ä¹ˆæ˜¯JavaScriptï¼Ÿä¸€é—¨è„šæ­¥è¯­è¨€ éœ€è¦åµŒå…¥htmlæ‰§è¡Œ ###4.æµè§ˆå™¨ä¸­çš„JavaScriptå¯ä»¥åšä»€ä¹ˆï¼Ÿæ ¡éªŒè¡¨å• æ“ä½œdom ç­‰ç­‰ ###5.æµè§ˆå™¨ä¸­çš„JavaScriptä¸å¯ä»¥åšä»€ä¹ˆï¼Ÿæ“ä½œæœåŠ¡å™¨ç¡¬ä»¶ ###6.æµè§ˆå™¨ä¸JavaScriptæ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿæµè§ˆå™¨è§£æjsï¼Œç›®çš„æ˜¯ä¸ºäº†è®©è®¡ç®—æœºèƒ½çœ‹æ‡‚jsï¼Œçœ‹æ‡‚01010101ï¼Œæœºå™¨ç ã€å­—èŠ‚ç ç¼–è¯‘ å†…æ ¸â€“&gt;jså¼•æ“ å¼•æ“ 1.è½¬åŒ– æ±½æ²¹æŸ´æ²¹ç­‰ç­‰-&gt;è½¬åŒ–-&gt;æˆåŠ¨èƒ½ æ¨¡æ¿+æ•°æ®â€”&gt;é¡µé¢ jsä»£ç â€”&gt;æœºå™¨ç \\å­—èŠ‚ç  2.ç§»æ¤æ€§ jså¼•æ“å¥—ä¸€ä¸ªå£³å­ï¼Œå†™jsä»£ç ä¼ ç»™jså¼•æ“ï¼Œæ“ä½œç¡¬ä»¶ node.js v8å¼•æ“å»è§£æjs ###7.JavaScriptåªå¯ä»¥è¿è¡Œåœ¨æµè§ˆå™¨ä¸­å—ï¼Ÿ ##ä»€ä¹ˆæ˜¯ Node? https://nodejs.org/en/ nodeæ˜¯jsè¿è¡Œç¯å¢ƒåŸºäºv8å¼•æ“ç‰¹ç‚¹ç”¨äº‹ä»¶é©±åŠ¨ã€æ— é˜»å¡çš„ioæ¨¡å‹ä¼˜åŠ¿è½»é‡ã€é«˜æ•ˆ nodeæ˜¯é—¨æŠ€æœ¯ä¸æ˜¯è¯­è¨€java java.net c#node js Node.jsÂ® is a JavaScript runtime built on Chromeâ€™s V8 JavaScript engine. JavaScript runtime JavaScript è¿è¡Œæ—¶ Chromeâ€™s V8 JavaScript engine Chrome æµè§ˆå™¨ V8 å¼•æ“ Node.js æ˜¯ä¸€ä¸ª æ„å»ºäº è°·æ­Œçš„ Chrome æµè§ˆå™¨çš„ V8 å¼•æ“ä¹‹ä¸Šçš„ä¸€ä¸ª JavaScriptè¿è¡Œæ—¶ ç¯å¢ƒ Node.jså¯ä»¥è§£æå’Œæ‰§è¡Œ JavaScript ä»£ç  Node.js uses an event-driven, non-blocking I/O model that makes it lightweight and efficient. event-driven äº‹ä»¶é©±åŠ¨æ¨¡å‹ non-blocking I/O model éé˜»å¡IOæ¨¡å‹ IOï¼ˆinput/outputï¼‰è¾“å…¥ä¸è¾“å‡º lightweight[ËˆlaÉªtweÉªt] è½»é‡çº§ åœ¨è½¯ä»¶å¼€å‘è¡Œä¸šä¸­ï¼Œè½»é‡çº§æ ‡è¯†è¤’ä¹‰è¯ è½»é‡çº§ä¹Ÿå°±æ„å‘³ç€ è¿è¡Œé€Ÿåº¦å¿« è½»é‡çº§ä¹Ÿå°±æ„å‘³ç€æœ‰æ›´å¥½çš„ è·¨å¹³å° ç‰¹æ€§ï¼ˆå¹³å°çš„å·®å¼‚æ€§ï¼Œå…¼å®¹æ€§ï¼‰ efficient[ÉªËˆfÉªÊƒnt] é«˜æ•ˆçš„ Node.jsçš„ äº‹ä»¶é©±åŠ¨å’Œéé˜»å¡IOæ¨¡å‹ä½¿å¾—Node.jsæœ¬èº«éå¸¸çš„è½»é‡å’Œé«˜æ•ˆ Node.jsâ€™ package ecosystem, npm, is the largest ecosystem of open source libraries in the world. package ecosystem npm åŒ…ç”Ÿæ€ç³»ç»Ÿ npm largest æœ€å¤§çš„ open source libraries å¼€æºåº“ ç†è®ºæ„ä¹‰ä¸Š å¼€æºå°±è¡¨ç¤ºæœ‰æˆç†Ÿçš„ç¤¾åŒºï¼Œå¼€æ”¾æºä»£ç  Node.js çš„npmåŒ…ç”Ÿæ€ç³»ç»Ÿï¼Œæ˜¯ä¸–ç•Œä¸Š æœ€å¤§çš„ å¼€æºåº“ ç”Ÿæ€ç³»ç»Ÿ ä»¥å‰çš„ å®¢æˆ·ç«¯ä¸­ JavaScript åº“ æ•£åˆ—åœ¨äº’è”ç½‘çš„å„ä¸ªåœ°æ–¹ npm å°±æ˜¯ æŠŠå¤§å®¶ç»å¸¸ä½¿ç”¨çš„ä¸€äº›å¼€æºåº“ ç»™ ç»„ç»‡åˆ°äº†ä¸€èµ· Node æ˜¯ä¸€ä¸ªå¯ä»¥è§£æå’Œæ‰§è¡Œ JavaScript ä»£ç çš„ è¿è¡Œæ—¶ç¯å¢ƒ Node.js çš„ä½œè€… ç‘æ©.è¾¾å°” Node çš„å®ç°ç»“æ„ V8 JavaScript è§£ææ‰§è¡Œå¼•æ“ ECMAScript ä¸­é—´å±‚ ï¼ˆæä¾›äº†æ–‡ä»¶æ“ä½œã€ç½‘ç»œæ“ä½œç™»é™†æ¥å£ï¼‰æ›´åŠ æ¥è¿‘æ“ä½œç³»ç»Ÿçš„æ¥å£ä¾›å¼€å‘äººå‘˜ä½¿ç”¨ ç¡¬ä»¶å±‚ å®‰è£…ä¸é…ç½®3må®‰è£…æ³• nvm npm nrmå®‰è£…åŒ…çš„æ–¹å¼å®‰è£… é—®é¢˜1ï¼šå®‰è£…äº†node æ²¡æœ‰å¸è½½ 2:32å’Œ64ææ··äº† 3ï¼šï¼›æ‹¼å†™é”™è¯¯ï¼Œè·¯å¾„é”™è¯¯â€”â€”&gt;è€å¸ˆçœ¼åŠ› ä¸‹è½½åœ°å€ï¼š ä¸€è·¯ä¸‹ä¸€æ­¥ next å¦‚ä½•ç¡®è®¤æ˜¯å¦å®‰è£…æˆåŠŸï¼š win + r ï¼Œç„¶åè¾“å…¥ cmd ï¼Œç„¶åæ•²å›è½¦ å°±å¯ä»¥è¿›å…¥ cmd æ§åˆ¶å° nvm å®‰è£…å’Œç®¡ç†æˆ‘ä»¬çš„ Node.jsç‰ˆæœ¬1234567nvmçš„å®‰è£…æ–¹å¼ï¼Œnode.js version manager æ˜¯ä¸€ä¸ªnodeçš„ç‰ˆæœ¬ç®¡ç†å·¥å…·ä¸ºäº†è§£å†³nodeç‰ˆæœ¬åˆ‡æ¢é—®é¢˜å³é”®åœ¨æ­¤ç”µè„‘ä¸Šç‚¹å‡»ä¸€ä¸‹--ã€‹å±æ€§---ã€‹ç³»ç»Ÿ---ã€‹é«˜çº§ç³»ç»Ÿè®¾ç½®---ã€‹ç¯å¢ƒå˜é‡æ§åˆ¶é¢æ¿---ã€‹ç³»ç»Ÿ---ã€‹é«˜çº§ç³»ç»Ÿè®¾ç½®---ã€‹ç¯å¢ƒå˜é‡NVM_HOME---C:\\dev\\nvmNVM_SYMLINK--C:\\dev\\nodejsæ–°å»ºä¸€ä¸ªpath %NVM_HOME%;%NVM_SYMLINK% nvm ç”¨æ³•æŸ¥çœ‹ç‰ˆæœ¬å·nvm listç”¨å“ªä¸ªç‰ˆæœ¬ï¼ˆå·²ç»ä¸‹è½½è¿‡çš„ç‰ˆæœ¬ï¼‰nvm use ç‰ˆæœ¬å·nvm use ç‰ˆæœ¬å· 32ä¸‹è½½ç›¸å¯¹åº”ç‰ˆæœ¬nvm install ç‰ˆæœ¬å·nvm install ç‰ˆæœ¬å· 32 nvmä¸‹è½½çš„æ˜¯äºŒè¿›åˆ¶ç‰ˆæœ¬123456789101112131415## æ§åˆ¶å°åŸºæœ¬ä½¿ç”¨å…è®¸ç”¨æˆ·å¯ä»¥åœ¨ç»ˆç«¯å‘½ä»¤å°ä¸­ä¸æ“ä½œç³»ç»Ÿäº¤äº’ï¼Œå…¶å®å°±æ˜¯è¾“å…¥ä¸è¾“å‡º### å¦‚ä½•æ‰“å¼€cmd1. é€šè¿‡ æŒ‰ window é”®ï¼Œè¾“å…¥ `cmd` æ‰“å¼€cmdç¨‹åº2. é€šè¿‡ `win+r` è¾“å…¥ `cmd`ï¼Œæ•²å›è½¦å°±å¯ä»¥è¿›å…¥### åŸºæœ¬å‘½ä»¤- `dir` directory åˆ—å‡ºå½“å‰ç›®å½•ä¸‹æ‰€æœ‰çš„æ¡ç›® + åˆ«å `ls` åœ¨ powershell ä¸­å¯ä»¥ä½¿ç”¨- `cd` change directory åˆ‡æ¢ç›®å½• åˆ‡æ¢åˆ°å½“å‰ç›®å½•ä¸‹çš„ Desktop ç›®å½•å½“æƒ³åˆ‡æ¢åˆ°å½“å‰ç›®å½•çš„æ—¶å€™ï¼Œæœ€å¥½ä½¿ç”¨ cd ./ ç›¸å¯¹è·¯å¾„çš„å½¢å¼C:\\Users\\iroc&gt;cd DesktopC:\\Users\\iroc\\Desktop&gt; åœ¨Windows ä¸Šåˆ‡æ¢ç›˜ç¬¦ï¼šd: åˆ‡æ¢ç»å¯¹è·¯å¾„ä¹‹åå†åŒä¸€ä¸ªç›˜ç¬¦ä¸‹æ‰æœ‰æ•ˆ åˆ‡æ¢åˆ°ä¸Šä¸€çº§ç›®å½•C:\\Users\\iroc\\Desktop\\code\\seajs&gt;cd ../C:\\Users\\iroc\\Desktop\\code&gt; è¿ç»­è¿›å…¥å¤šçº§ç›®å½•C:\\Users\\iroc\\Desktop\\code&gt;cd seajs/aC:\\Users\\iroc\\Desktop\\code\\seajs\\a&gt;123456789101112131415161718192021222324252627282930313233343536373839404142- `cls` clear screen æ¸…å± + åˆ«å clear åœ¨widnowsä¸­çš„ `powershell` ä¸­å¯ä»¥ä½¿ç”¨ windowsä¸‹çš„å¯»å€ç”¨\\åæ–œæ  ### path ç¯å¢ƒå˜é‡ç›®çš„æ˜¯ä¸ºäº†åœ¨æ§åˆ¶å°ä¸­çš„ä»»ä½•ç›®å½•éƒ½å¯ä»¥å¿«é€Ÿæ‰“å¼€æˆ–è€…ä½¿ç”¨è¯¥å¯æ‰§è¡Œæ–‡ä»¶ç¯å¢ƒå˜é‡å°±æ˜¯ç”¨æ¥å­˜å‚¨ç³»ç»Ÿçº§åˆ«çš„å˜é‡- æ·»åŠ ç¯å¢ƒå˜é‡ + æˆ‘çš„ç”µè„‘ -&gt; å³é”®é€‰æ‹©å±æ€§ -&gt; é«˜çº§ç³»ç»Ÿè®¾ç½® -&gt; åˆ‡æ¢åˆ°`é«˜çº§`é¢æ¿ -&gt; ç¯å¢ƒå˜é‡ + ç¬¬ä¸€ç§æ–¹å¼ï¼šç›´æ¥æŠŠå¯æ‰§è¡Œæ–‡ä»¶æ‰€å±çš„ç›®å½• æ”¾åˆ° PATH ç¯å¢ƒå˜é‡ä¸­ï¼ˆå¦‚æœæ²¡æœ‰PATHç¯å¢ƒå˜é‡ï¼Œè‡ªå·±æ–°å»ºï¼‰ + ç¬¬äºŒç§æ–¹å¼ï¼šæ–°å»ºä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œå˜é‡åè§„èŒƒï¼šé€»è¾‘å_HOME å˜é‡å€¼ï¼šè¯¥å¯æ‰§è¡Œæ–‡ä»¶æ‰€å±çš„ç›®å½• + æ³¨æ„ï¼šæ— è®ºæ˜¯ç›´æ¥æ·»åŠ çš„è·¯å¾„è¿˜æ˜¯å¼•ç”¨çš„å˜é‡åï¼Œä¸€å®šè¦ç”¨ è‹±æ–‡çš„åˆ†å· åŒºåˆ†å¼€ + å¼•ç”¨å˜é‡åçš„æ—¶å€™ï¼Œå˜é‡åä¸¤è¾¹éƒ½æ˜¯ `%``&gt; feiq`å½“ä½ åœ¨æ§åˆ¶å°ä¸­è¾“å…¥ä¸€ä¸ªç¨‹åºçš„åå­—çš„æ—¶å€™ï¼Œcmd é»˜è®¤æŠŠå®ƒå½“æˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶å»æ‰§è¡Œäº†ï¼Œä¼˜å…ˆæ‰¾å½“å‰ç›®å½•ä¸‹æ˜¯å¦æœ‰æ²¡æœ‰ä¸€ä¸ªå«åšfeiq.exe çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¦‚æœæœ‰ï¼Œç›´æ¥æ‰§è¡Œæ‰“å¼€å¦‚æœæ²¡æœ‰ï¼Œcmdä¼šè¿›å…¥ path ç¯å¢ƒå˜é‡ä¸­ ä¸€ä¸ªç›®å½•ä¸€ä¸ªç›®å½•çš„æŒ¨ç€æŸ¥æ‰¾é‡Œé¢æ˜¯å¦æœ‰è¯¥å¯æ‰§è¡Œæ–‡ä»¶## REPL(Read-eval-print-loop) è¿è¡Œç¯å¢ƒç”¨æ¥æµ‹è¯•ä¸€ä¸‹ä»£ç çš„ï¼Œreplå’Œchromeçš„æ§åˆ¶å°å¾ˆåƒ- é€šè¿‡åœ¨æ§åˆ¶å°ä¸­è¾“å…¥ `node` æ•²å›è½¦å°±å¯ä»¥è®¡å…¥ REPL è¿è¡Œç¯å¢ƒ- é€šè¿‡åœ¨REPLè¿è¡Œç¯å¢ƒä¸­ è¿ç»­æŒ‰ä¸¤æ¬¡ `Ctrl+C` å°±å¯ä»¥é€€å‡º REPL è¿è¡Œç¯å¢ƒ## æ‰§è¡Œjsæ–‡ä»¶ ç”¨nodeæ‰§è¡Œjsæ–‡ä»¶ï¼Œæ–‡ä»¶åœ¨å½“å‰ç›®å½•ä¸‹----&gt;node +æ–‡ä»¶å å¦‚æœä¸åœ¨å½“å‰ç›®å½•ä¸‹ï¼Œnode +æ–‡ä»¶è·¯å¾„çš„å½¢å¼æ‰§è¡Œ ç›¸å¯¹è·¯å¾„ ./å½“å‰è·¯å¾„ ../ä¸Šçº§ç›®å½• ç»å¯¹è·¯å¾„æ‰§è¡Œjsçš„æ–¹å¼ node c:\\Users\\cena\\Desktop\\code\\01helloworld.js## Globalglobalå’Œwindowå¾ˆåƒï¼Œéƒ½æ˜¯å…¨å±€å¯¹è±¡## CONSOLE æ–­è¨€ æ˜¯ç”¨æ¥æµ‹è¯•ç”¨çš„æ–­è¨€å°±æ˜¯å‡å®šä¸€ä¸ªæ¡ä»¶ï¼Œå¦‚æœæ¡ä»¶æˆç«‹åˆ™ä¸è¾“å‡ºä»»ä½•å†…å®¹ï¼Œå¦‚æœæ¡ä»¶ä¸æˆç«‹åˆ™æŠ¥é”™è¿˜è¦è¾“å‡ºæƒ³è¦è¾“å‡ºçš„å†…å®¹ã€‚console.assert(æ¡ä»¶,æ¡ä»¶ä¸æˆç«‹è¾“å‡ºçš„å†…å®¹);var foo=3;console.assert(foo==3,â€å¤±è´¥â€);time() timeEnd()æˆå¯¹å‡ºç°ï¼Œè®¡ç®—åœ¨ä¸¤ä¸ªæ–¹æ³•ä¸­é—´çš„ä»£ç çš„è¿è¡Œæ—¶é—´ï¼Œä¼ å…¥çš„å‚æ•°è¦ä¸€è‡´console.time(â€˜testâ€™); console.timeEnd(â€˜test1â€™);1234567891011121314151617181920212223### __dirname å’Œ __filename__dirnamee ç”¨æ¥æ‰¾åˆ°å½“å‰æ–‡ä»¶å¤¹çš„è·¯å¾„__filename ç”¨æ¥å»åˆ°å½“å‰æ–‡ä»¶çš„è·¯å¾„ä¸çŸ¥é“ä»£ç è¦æ‰å“ªä½¿ç”¨çš„æ—¶å€™ï¼Œç”¨äºçµæ´»çš„å†™ä»£ç å–è·¯å¾„çš„æ—¶å€™ã€‚å®ƒä»¬å±äºæ¨¡å—ä½œç”¨åŸŸï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒä»¬ä¸¤ä¸ªç”¨æ¥è·å–è·¯å¾„çš„ï¼Œä¸€èˆ¬ç”¨äºæ“ä½œæ–‡ä»¶è·¯å¾„çš„æ—¶å€™ï¼Œæ‰ä¼šç”¨åˆ°## processprocess æ˜¯ä¸€ä¸ªå…¨å±€å¯ç”¨å¯¹è±¡ï¼Œç”¨æ¥å’Œæˆ‘ä»¬ç°åœ¨å¯åŠ¨ä¸­çš„nodeè¿›è¡Œäº¤äº’çš„process.versionå–ç‰ˆæœ¬å·åœ¨æ§åˆ¶å°åšæ ‡å‡†è¾“å‡ºprocess.stdout.write(`123123`);process.pidï¼šå½“å‰è¿›ç¨‹çš„è¿›ç¨‹å·ã€‚process.versionï¼šNodeçš„ç‰ˆæœ¬ï¼Œæ¯”å¦‚v0.10.18ã€‚process.platformï¼šå½“å‰ç³»ç»Ÿå¹³å°ï¼Œæ¯”å¦‚Linuxã€‚process.envï¼šæŒ‡å‘å½“å‰shellçš„ç¯å¢ƒå˜é‡ï¼Œæ¯”å¦‚process.env.HOMEã€‚process.stdoutï¼šæŒ‡å‘æ ‡å‡†è¾“å‡ºã€‚process.stdinï¼šæŒ‡å‘æ ‡å‡†è¾“å…¥ã€‚process.stderrï¼šæŒ‡å‘æ ‡å‡†é”™è¯¯ã€‚## æ¨¡å—ç³»ç»Ÿ## node.jsæ¨¡å—åŒ– ä¸€ä¸ªjsæ–‡ä»¶åœ¨nodeé‡Œé¢æˆ‘ä»¬å°±ç†è§£ä¸ºä¸€ä¸ªæ¨¡å—requireç”¨æ¥åŠ è½½æ¨¡å—module.exportsç”¨æ¥æ›éœ²å±æ€§å’Œæ–¹æ³•çš„ï¼Œå› ä¸ºæ¨¡å—æœ‰å°è£…æ€§ï¼Œéœ€è¦æ‰“ç ´å°è£…æ€§æ›éœ²æ–¹æ³•å’Œå±æ€§æ¥exportsæ˜¯module.exportsçš„åˆ«åï¼Œexportså¯ä»¥åšçš„äº‹æƒ…ï¼Œmodule.exportséƒ½å¯ä»¥åšï¼Œexportsåªèƒ½ç”¨.çš„å½¢å¼æ›éœ²å±æ€§å’Œæ–¹æ³•`","categories":[{"name":"javascript","slug":"javascript","permalink":"http://blogzhou.top/categories/javascript/"}],"tags":[{"name":"JS","slug":"JS","permalink":"http://blogzhou.top/tags/JS/"}]},{"title":"JavaScript æ¨¡å—åŒ–ç¼–ç¨‹","slug":"old_03.JavaScript æ¨¡å—åŒ–ç¼–ç¨‹","date":"2016-11-11T02:31:30.000Z","updated":"2020-12-16T07:34:56.043Z","comments":true,"path":"2016/11/11/old_03.JavaScript æ¨¡å—åŒ–ç¼–ç¨‹/","link":"","permalink":"http://blogzhou.top/2016/11/11/old_03.JavaScript æ¨¡å—åŒ–ç¼–ç¨‹/","excerpt":"JavaScript æ¨¡å—åŒ–ç¼–ç¨‹ç½‘ç«™è¶Šæ¥è¶Šå¤æ‚ï¼Œjsä»£ç ã€jsæ–‡ä»¶ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Ÿ1.å‘½åå†²çª 2.æ–‡ä»¶ä¾èµ–é—®é¢˜ ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–æ¨¡å—åŒ–å¼€å‘æ¼”å˜å…¨å±€å‡½æ•° å‘½åå†²çª æ–‡ä»¶ä¾èµ–çš„é—®é¢˜ å¯¹è±¡å°è£… ç”¨å‘½åç©ºé—´çš„æ–¹å¼è¿›è¡Œå°è£… å…ˆçº¦å®šå‘½åçš„è§„èŒƒçš„å½¢å¼ å¯¹è±¡é‡Œé¢çš„å±æ€§å’Œæ–¹æ³•å¾ˆå®¹æ˜“è¢«ä¿®æ”¹æ‰ï¼Œå¾ˆä¸å®‰å…¨ åˆ’åˆ†ç§æœ‰ç©ºé—´-é€šè¿‡åŒ¿åå‡½æ•°è‡ªæ‰§è¡Œçš„æ–¹æ³•å°è£…æ¨¡å—ï¼Œ-å¯ä»¥ä¿æŠ¤ç§æœ‰å˜é‡å’Œæ–¹æ³• æ¨¡å—çš„ç»´æŠ¤æ‰©å±• å¼€é—­åŸåˆ™ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾ã€‚ å¢åŠ äº†ä»£ç çš„å¥å£®æ€§å’Œå®¹é”™æ€§ æ¨¡å—çš„ç¬¬ä¸‰æ–¹ä¾èµ– æ¨¡å—èŒè´£å”¯ä¸€æ€§ æŠŠä¾èµ–çš„æ¨¡å—ï¼Œé€šè¿‡ä¾èµ–æ³¨å…¥çš„å½¢å¼ï¼Œåœ¨ä½ çš„å‚æ•°ä¸Šè¿›è¡Œä½“ç°ã€‚","text":"JavaScript æ¨¡å—åŒ–ç¼–ç¨‹ç½‘ç«™è¶Šæ¥è¶Šå¤æ‚ï¼Œjsä»£ç ã€jsæ–‡ä»¶ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Ÿ1.å‘½åå†²çª 2.æ–‡ä»¶ä¾èµ–é—®é¢˜ ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–æ¨¡å—åŒ–å¼€å‘æ¼”å˜å…¨å±€å‡½æ•° å‘½åå†²çª æ–‡ä»¶ä¾èµ–çš„é—®é¢˜ å¯¹è±¡å°è£… ç”¨å‘½åç©ºé—´çš„æ–¹å¼è¿›è¡Œå°è£… å…ˆçº¦å®šå‘½åçš„è§„èŒƒçš„å½¢å¼ å¯¹è±¡é‡Œé¢çš„å±æ€§å’Œæ–¹æ³•å¾ˆå®¹æ˜“è¢«ä¿®æ”¹æ‰ï¼Œå¾ˆä¸å®‰å…¨ åˆ’åˆ†ç§æœ‰ç©ºé—´-é€šè¿‡åŒ¿åå‡½æ•°è‡ªæ‰§è¡Œçš„æ–¹æ³•å°è£…æ¨¡å—ï¼Œ-å¯ä»¥ä¿æŠ¤ç§æœ‰å˜é‡å’Œæ–¹æ³• æ¨¡å—çš„ç»´æŠ¤æ‰©å±• å¼€é—­åŸåˆ™ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾ã€‚ å¢åŠ äº†ä»£ç çš„å¥å£®æ€§å’Œå®¹é”™æ€§ æ¨¡å—çš„ç¬¬ä¸‰æ–¹ä¾èµ– æ¨¡å—èŒè´£å”¯ä¸€æ€§ æŠŠä¾èµ–çš„æ¨¡å—ï¼Œé€šè¿‡ä¾èµ–æ³¨å…¥çš„å½¢å¼ï¼Œåœ¨ä½ çš„å‚æ•°ä¸Šè¿›è¡Œä½“ç°ã€‚ æ€»ç»“ æœ€å¤§çš„é—®é¢˜ï¼Œè§„èŒƒçš„é—®é¢˜ å¦‚æœåœ¨å¤šäººåä½œå¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¼šæœ‰å¾ˆå¤§çš„é—®é¢˜ å¤šäººåä½œå¼€å‘è¿‡ç¨‹ä¸­ï¼šä»£ç çš„é£æ ¼ä¸€å®šè¦ç»Ÿä¸€ æ¨¡å—åŒ–è§„èŒƒæœåŠ¡å™¨ç«¯æ¨¡å—åŒ–è§„èŒƒæµè§ˆå™¨ç«¯æ¨¡å—åŒ–è§„èŒƒ AMD RequireJS CMD SeaJScommonjs node.js SeaJSåŸºæœ¬ä½¿ç”¨æ•´ä½“æ„ŸçŸ¥å®šä¹‰æ¨¡å— define å®šä¹‰æ¨¡å— define(function(){}) å‡½æ•°ä½“å†…çš„æ–¹æ³•å±æ€§éƒ½å±äºè¿™ä¸ªæ–¹æ³•ï¼Œå¯¹å¤–æœ‰å°è£…æ€§;è§£å†³äº†å‘½åå†²çªé—®é¢˜ï¼Œä½¿jsä»£ç æœ‰äº†å°è£…æ€§ ç›´æ¥è°ƒç”¨ jQuery æ’ä»¶ç­‰éæ ‡å‡†æ¨¡å—çš„æ–¹æ³• http://my.oschina.net/briviowang/blog/208587 å¯åŠ¨æ¨¡å— seajs.use åŠ è½½å…¥å£æ¨¡å—ï¼Œæˆ‘ä»¬æŠŠdefineå®šä¹‰çš„jså°±å«æ¨¡å— è¿™ä¸ªç”¨äºåœ¨htmlä»£ç é‡Œé¢çš„åŠ è½½åŠ è½½æ¨¡å— require-åŠ è½½æ–‡ä»¶ä¾èµ–ã€æ¨¡å—ä¾èµ–çš„ï¼Œç”¨äºdefineå‡½æ•°ä½“å†…æš´éœ²æ¥å£ exports å’Œ module.exports module.exportsæ›éœ²å‡ºä¸€ä¸ªå®Œæ•´çš„å¯¹è±¡ï¼Œåªèƒ½æ‰”ä¸€æ¬¡åªèƒ½æ›éœ²å‡ºæ¥ä¸€ä¸ª exportsæ˜¯module.exportsçš„åˆ«åï¼Œå¯ä»¥ç”¨æ¥å•ä¸ªå±æ€§ã€æ–¹æ³•ã€å¯¹è±¡çš„æ›éœ²ï¼Œç”¨.çš„å½¢å¼,exportsèƒ½åšçš„äº‹æƒ…module.exportsä¹Ÿå¯ä»¥åš ä½¿ç”¨åœºæ™¯ç”¨.å±æ€§çš„å½¢å¼æ›éœ²å±æ€§å’Œæ–¹æ³•çš„æ—¶å€™ï¼Œè€Œä¸”æ˜¯å¤šä¸ªçš„æ—¶å€™ç”¨exports module.exportsç›´æ¥ç­‰äºçš„æ–¹å¼ç”¨ï¼Œç›´æ¥ç­‰äºä¸€ä¸ªæ–¹æ³•å±æ€§å¯¹è±¡ç­‰ç­‰~~~##requirejsä¸seajsçš„åŒºåˆ«requirejsæ˜¯ä¼˜å…ˆåŠ è½½çš„seajsæ˜¯æ‡’åŠ è½½çš„ï¼Œå°±æ˜¯æœ‰æ‹–å»¶ç—‡ï¼Œç”¨çš„æ—¶å€™æ‰åŠ è½½http://www.requirejs.cn/","categories":[{"name":"javascript","slug":"javascript","permalink":"http://blogzhou.top/categories/javascript/"}],"tags":[{"name":"JS","slug":"JS","permalink":"http://blogzhou.top/tags/JS/"}]},{"title":"æ·±å…¥ç†è§£CADisplayLinkå’ŒNSTimer","slug":"old_01.æ·±å…¥ç†è§£CADisplayLinkå’ŒNSTimer","date":"2016-01-25T02:31:30.000Z","updated":"2020-12-16T06:09:57.784Z","comments":true,"path":"2016/01/25/old_01.æ·±å…¥ç†è§£CADisplayLinkå’ŒNSTimer/","link":"","permalink":"http://blogzhou.top/2016/01/25/old_01.æ·±å…¥ç†è§£CADisplayLinkå’ŒNSTimer/","excerpt":"æ·±å…¥ç†è§£CADisplayLinkå’ŒNSTimer ä¸€ã€ä»€ä¹ˆæ˜¯CADisplayLinkç®€å•åœ°è¯´ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ¯éš”å‡ æ¯«ç§’åˆ·æ–°ä¸€æ¬¡å±å¹•ã€‚ CADisplayLinkæ˜¯ä¸€ä¸ªèƒ½è®©æˆ‘ä»¬ä»¥å’Œå±å¹•åˆ·æ–°ç‡ç›¸åŒçš„é¢‘ç‡å°†å†…å®¹ç”»åˆ°å±å¹•ä¸Šçš„å®šæ—¶å™¨ã€‚æˆ‘ä»¬åœ¨åº”ç”¨ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ CADisplayLink å¯¹è±¡ï¼ŒæŠŠå®ƒæ·»åŠ åˆ°ä¸€ä¸ªrunloopä¸­ï¼Œå¹¶ç»™å®ƒæä¾›ä¸€ä¸ª target å’Œ selector åœ¨å±å¹•åˆ·æ–°çš„æ—¶å€™è°ƒç”¨ã€‚ ä¸€ä½† CADisplayLink ä»¥ç‰¹å®šçš„æ¨¡å¼æ³¨å†Œåˆ°runloopä¹‹åï¼Œæ¯å½“å±å¹•éœ€è¦åˆ·æ–°çš„æ—¶å€™ï¼Œrunloopå°±ä¼šè°ƒç”¨CADisplayLinkç»‘å®šçš„targetä¸Šçš„selectorï¼Œè¿™æ—¶targetå¯ä»¥è¯»åˆ° CADisplayLink çš„æ¯æ¬¡è°ƒç”¨çš„æ—¶é—´æˆ³ï¼Œç”¨æ¥å‡†å¤‡ä¸‹ä¸€å¸§æ˜¾ç¤ºéœ€è¦çš„æ•°æ®ã€‚ä¾‹å¦‚ä¸€ä¸ªè§†é¢‘åº”ç”¨ä½¿ç”¨æ—¶é—´æˆ³æ¥è®¡ç®—ä¸‹ä¸€å¸§è¦æ˜¾ç¤ºçš„è§†é¢‘æ•°æ®ã€‚åœ¨UIåšåŠ¨ç”»çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦é€šè¿‡æ—¶é—´æˆ³æ¥è®¡ç®—UIå¯¹è±¡åœ¨åŠ¨ç”»çš„ä¸‹ä¸€å¸§è¦æ›´æ–°çš„å¤§å°ç­‰ç­‰ã€‚ åœ¨æ·»åŠ è¿›runloopçš„æ—¶å€™æˆ‘ä»¬åº”è¯¥é€‰ç”¨é«˜ä¸€äº›çš„ä¼˜å…ˆçº§ï¼Œæ¥ä¿è¯åŠ¨ç”»çš„å¹³æ»‘ã€‚å¯ä»¥è®¾æƒ³ä¸€ä¸‹ï¼Œæˆ‘ä»¬åœ¨åŠ¨ç”»çš„è¿‡ç¨‹ä¸­ï¼Œrunloopè¢«æ·»åŠ è¿›æ¥äº†ä¸€ä¸ªé«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼Œé‚£ä¹ˆï¼Œä¸‹ä¸€æ¬¡çš„è°ƒç”¨å°±ä¼šè¢«æš‚åœè½¬è€Œå…ˆå»æ‰§è¡Œé«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼Œç„¶ååœ¨æ¥ç€æ‰§è¡ŒCADisplayLinkçš„è°ƒç”¨ï¼Œä»è€Œé€ æˆåŠ¨ç”»è¿‡ç¨‹çš„å¡é¡¿ï¼Œä½¿åŠ¨ç”»ä¸æµç•…ã€‚ durationå±æ€§:æä¾›äº†æ¯å¸§ä¹‹é—´çš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯å±å¹•æ¯æ¬¡åˆ·æ–°ä¹‹é—´çš„çš„æ—¶é—´ã€‚è¯¥å±æ€§åœ¨targetçš„selectorè¢«é¦–æ¬¡è°ƒç”¨ä»¥åæ‰ä¼šè¢«èµ‹å€¼ã€‚selectorçš„è°ƒç”¨é—´éš”æ—¶é—´è®¡ç®—æ–¹å¼æ˜¯ï¼šæ—¶é—´=durationÃ—frameIntervalã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ—¶é—´æ¥è®¡ç®—å‡ºä¸‹ä¸€å¸§è¦æ˜¾ç¤ºçš„UIçš„æ•°å€¼ã€‚ä½†æ˜¯ durationåªæ˜¯ä¸ªå¤§æ¦‚çš„æ—¶é—´ï¼Œå¦‚æœCPUå¿™äºå…¶å®ƒè®¡ç®—ï¼Œå°±æ²¡æ³•ä¿è¯ä»¥ç›¸åŒçš„é¢‘ç‡æ‰§è¡Œå±å¹•çš„ç»˜åˆ¶æ“ä½œï¼Œè¿™æ ·ä¼šè·³è¿‡å‡ æ¬¡è°ƒç”¨å›è°ƒæ–¹æ³•çš„æœºä¼šã€‚ frameIntervalå±æ€§:æ˜¯å¯è¯»å¯å†™çš„NSIntegerå‹å€¼ï¼Œæ ‡è¯†é—´éš”å¤šå°‘å¸§è°ƒç”¨ä¸€æ¬¡selector æ–¹æ³•ï¼Œé»˜è®¤å€¼æ˜¯1ï¼Œå³æ¯å¸§éƒ½è°ƒç”¨ä¸€æ¬¡ã€‚å¦‚æœæ¯å¸§éƒ½è°ƒç”¨ä¸€æ¬¡çš„è¯ï¼Œå¯¹äºiOSè®¾å¤‡æ¥è¯´é‚£åˆ·æ–°é¢‘ç‡å°±æ˜¯60HZä¹Ÿå°±æ˜¯æ¯ç§’60æ¬¡ï¼Œå¦‚æœå°† frameIntervalè®¾ä¸º2 é‚£ä¹ˆå°±ä¼šä¸¤å¸§è°ƒç”¨ä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯å˜æˆäº†æ¯ç§’åˆ·æ–°30æ¬¡ã€‚ pauseå±æ€§:æ§åˆ¶CADisplayLinkçš„è¿è¡Œã€‚å½“æˆ‘ä»¬æƒ³ç»“æŸä¸€ä¸ªCADisplayLinkçš„æ—¶å€™ï¼Œåº”è¯¥è°ƒç”¨-(void)invalidateä»runloopä¸­åˆ é™¤å¹¶åˆ é™¤ä¹‹å‰ç»‘å®šçš„targetè·Ÿselector timestampå±æ€§: åªè¯»çš„CFTimeIntervalå€¼ï¼Œè¡¨ç¤ºå±å¹•æ˜¾ç¤ºçš„ä¸Šä¸€å¸§çš„æ—¶é—´æˆ³ï¼Œè¿™ä¸ªå±æ€§é€šå¸¸è¢«targetç”¨æ¥è®¡ç®—ä¸‹ä¸€å¸§ä¸­åº”è¯¥æ˜¾ç¤ºçš„å†…å®¹ã€‚ æ‰“å°timestampå€¼ï¼Œå…¶æ ·å¼ç±»ä¼¼äºï¼š179699.631584ã€‚","text":"æ·±å…¥ç†è§£CADisplayLinkå’ŒNSTimer ä¸€ã€ä»€ä¹ˆæ˜¯CADisplayLinkç®€å•åœ°è¯´ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ¯éš”å‡ æ¯«ç§’åˆ·æ–°ä¸€æ¬¡å±å¹•ã€‚ CADisplayLinkæ˜¯ä¸€ä¸ªèƒ½è®©æˆ‘ä»¬ä»¥å’Œå±å¹•åˆ·æ–°ç‡ç›¸åŒçš„é¢‘ç‡å°†å†…å®¹ç”»åˆ°å±å¹•ä¸Šçš„å®šæ—¶å™¨ã€‚æˆ‘ä»¬åœ¨åº”ç”¨ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ CADisplayLink å¯¹è±¡ï¼ŒæŠŠå®ƒæ·»åŠ åˆ°ä¸€ä¸ªrunloopä¸­ï¼Œå¹¶ç»™å®ƒæä¾›ä¸€ä¸ª target å’Œ selector åœ¨å±å¹•åˆ·æ–°çš„æ—¶å€™è°ƒç”¨ã€‚ ä¸€ä½† CADisplayLink ä»¥ç‰¹å®šçš„æ¨¡å¼æ³¨å†Œåˆ°runloopä¹‹åï¼Œæ¯å½“å±å¹•éœ€è¦åˆ·æ–°çš„æ—¶å€™ï¼Œrunloopå°±ä¼šè°ƒç”¨CADisplayLinkç»‘å®šçš„targetä¸Šçš„selectorï¼Œè¿™æ—¶targetå¯ä»¥è¯»åˆ° CADisplayLink çš„æ¯æ¬¡è°ƒç”¨çš„æ—¶é—´æˆ³ï¼Œç”¨æ¥å‡†å¤‡ä¸‹ä¸€å¸§æ˜¾ç¤ºéœ€è¦çš„æ•°æ®ã€‚ä¾‹å¦‚ä¸€ä¸ªè§†é¢‘åº”ç”¨ä½¿ç”¨æ—¶é—´æˆ³æ¥è®¡ç®—ä¸‹ä¸€å¸§è¦æ˜¾ç¤ºçš„è§†é¢‘æ•°æ®ã€‚åœ¨UIåšåŠ¨ç”»çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦é€šè¿‡æ—¶é—´æˆ³æ¥è®¡ç®—UIå¯¹è±¡åœ¨åŠ¨ç”»çš„ä¸‹ä¸€å¸§è¦æ›´æ–°çš„å¤§å°ç­‰ç­‰ã€‚ åœ¨æ·»åŠ è¿›runloopçš„æ—¶å€™æˆ‘ä»¬åº”è¯¥é€‰ç”¨é«˜ä¸€äº›çš„ä¼˜å…ˆçº§ï¼Œæ¥ä¿è¯åŠ¨ç”»çš„å¹³æ»‘ã€‚å¯ä»¥è®¾æƒ³ä¸€ä¸‹ï¼Œæˆ‘ä»¬åœ¨åŠ¨ç”»çš„è¿‡ç¨‹ä¸­ï¼Œrunloopè¢«æ·»åŠ è¿›æ¥äº†ä¸€ä¸ªé«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼Œé‚£ä¹ˆï¼Œä¸‹ä¸€æ¬¡çš„è°ƒç”¨å°±ä¼šè¢«æš‚åœè½¬è€Œå…ˆå»æ‰§è¡Œé«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼Œç„¶ååœ¨æ¥ç€æ‰§è¡ŒCADisplayLinkçš„è°ƒç”¨ï¼Œä»è€Œé€ æˆåŠ¨ç”»è¿‡ç¨‹çš„å¡é¡¿ï¼Œä½¿åŠ¨ç”»ä¸æµç•…ã€‚ durationå±æ€§:æä¾›äº†æ¯å¸§ä¹‹é—´çš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯å±å¹•æ¯æ¬¡åˆ·æ–°ä¹‹é—´çš„çš„æ—¶é—´ã€‚è¯¥å±æ€§åœ¨targetçš„selectorè¢«é¦–æ¬¡è°ƒç”¨ä»¥åæ‰ä¼šè¢«èµ‹å€¼ã€‚selectorçš„è°ƒç”¨é—´éš”æ—¶é—´è®¡ç®—æ–¹å¼æ˜¯ï¼šæ—¶é—´=durationÃ—frameIntervalã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ—¶é—´æ¥è®¡ç®—å‡ºä¸‹ä¸€å¸§è¦æ˜¾ç¤ºçš„UIçš„æ•°å€¼ã€‚ä½†æ˜¯ durationåªæ˜¯ä¸ªå¤§æ¦‚çš„æ—¶é—´ï¼Œå¦‚æœCPUå¿™äºå…¶å®ƒè®¡ç®—ï¼Œå°±æ²¡æ³•ä¿è¯ä»¥ç›¸åŒçš„é¢‘ç‡æ‰§è¡Œå±å¹•çš„ç»˜åˆ¶æ“ä½œï¼Œè¿™æ ·ä¼šè·³è¿‡å‡ æ¬¡è°ƒç”¨å›è°ƒæ–¹æ³•çš„æœºä¼šã€‚ frameIntervalå±æ€§:æ˜¯å¯è¯»å¯å†™çš„NSIntegerå‹å€¼ï¼Œæ ‡è¯†é—´éš”å¤šå°‘å¸§è°ƒç”¨ä¸€æ¬¡selector æ–¹æ³•ï¼Œé»˜è®¤å€¼æ˜¯1ï¼Œå³æ¯å¸§éƒ½è°ƒç”¨ä¸€æ¬¡ã€‚å¦‚æœæ¯å¸§éƒ½è°ƒç”¨ä¸€æ¬¡çš„è¯ï¼Œå¯¹äºiOSè®¾å¤‡æ¥è¯´é‚£åˆ·æ–°é¢‘ç‡å°±æ˜¯60HZä¹Ÿå°±æ˜¯æ¯ç§’60æ¬¡ï¼Œå¦‚æœå°† frameIntervalè®¾ä¸º2 é‚£ä¹ˆå°±ä¼šä¸¤å¸§è°ƒç”¨ä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯å˜æˆäº†æ¯ç§’åˆ·æ–°30æ¬¡ã€‚ pauseå±æ€§:æ§åˆ¶CADisplayLinkçš„è¿è¡Œã€‚å½“æˆ‘ä»¬æƒ³ç»“æŸä¸€ä¸ªCADisplayLinkçš„æ—¶å€™ï¼Œåº”è¯¥è°ƒç”¨-(void)invalidateä»runloopä¸­åˆ é™¤å¹¶åˆ é™¤ä¹‹å‰ç»‘å®šçš„targetè·Ÿselector timestampå±æ€§: åªè¯»çš„CFTimeIntervalå€¼ï¼Œè¡¨ç¤ºå±å¹•æ˜¾ç¤ºçš„ä¸Šä¸€å¸§çš„æ—¶é—´æˆ³ï¼Œè¿™ä¸ªå±æ€§é€šå¸¸è¢«targetç”¨æ¥è®¡ç®—ä¸‹ä¸€å¸§ä¸­åº”è¯¥æ˜¾ç¤ºçš„å†…å®¹ã€‚ æ‰“å°timestampå€¼ï¼Œå…¶æ ·å¼ç±»ä¼¼äºï¼š179699.631584ã€‚ å¦å¤– CADisplayLink ä¸èƒ½è¢«ç»§æ‰¿ã€‚ ç»™éUIå¯¹è±¡æ·»åŠ åŠ¨ç”»æ•ˆæœ æˆ‘ä»¬çŸ¥é“åŠ¨ç”»æ•ˆæœå°±æ˜¯ä¸€ä¸ªå±æ€§çš„çº¿æ€§å˜åŒ–ï¼Œæ¯”å¦‚ UIView åŠ¨ç”»çš„ EasyIn EasyOut ã€‚é€šè¿‡æ•°å€¼æŒ‰ç…§ä¸åŒé€Ÿç‡çš„å˜åŒ–æˆ‘ä»¬èƒ½ç”Ÿæˆæ›´æ¥è¿‘çœŸå®ä¸–ç•Œçš„åŠ¨ç”»æ•ˆæœã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§æ¥ä½¿ä¸€äº›å…¶ä»–å±æ€§æŒ‰ç…§æˆ‘ä»¬æœŸæœ›çš„æ›²çº¿å˜åŒ–ã€‚æ¯”å¦‚å½“æ’­æ”¾è§†é¢‘æ—¶å…³æ‰è§†é¢‘çš„å£°éŸ³æˆ‘å¯ä»¥é€šè¿‡ CADisplayLink æ¥å®ç°ä¸€ä¸ª EasyOutçš„æ¸å‡ºæ•ˆæœï¼šå…ˆå¿«é€Ÿçš„é™ä½éŸ³é‡ï¼Œåœ¨æ…¢æ…¢çš„æ¸å˜åˆ°é™éŸ³ã€‚ æ³¨æ„ : é€šå¸¸æ¥è®²ï¼šiOSè®¾å¤‡çš„åˆ·æ–°é¢‘ç‡äº‹60HZä¹Ÿå°±æ˜¯æ¯ç§’60æ¬¡ã€‚é‚£ä¹ˆæ¯ä¸€æ¬¡åˆ·æ–°çš„æ—¶é—´å°±æ˜¯1/60ç§’ å¤§æ¦‚16.7æ¯«ç§’ã€‚å½“æˆ‘ä»¬çš„frameIntervalå€¼ä¸º1çš„æ—¶å€™æˆ‘ä»¬éœ€è¦ä¿è¯çš„æ˜¯CADisplayLinkè°ƒç”¨çš„targetçš„å‡½æ•°è®¡ç®—æ—¶é—´ä¸åº”è¯¥å¤§äº 16.7å¦åˆ™å°±ä¼šå‡ºç°ä¸¥é‡çš„ä¸¢å¸§ç°è±¡ã€‚ åœ¨macåº”ç”¨ä¸­æˆ‘ä»¬ä½¿ç”¨çš„ä¸æ˜¯CADisplayLinkè€Œæ˜¯ CVDisplayLinkå®ƒæ˜¯åŸºäºCæ¥å£çš„ç”¨èµ·æ¥é…ç½®æœ‰äº›éº»çƒ¦ä½†æ˜¯ç”¨èµ·æ¥è¿˜æ˜¯å¾ˆç®€å•çš„ã€‚ #####äºŒã€CADisplayLink ä¸ NSTimer æœ‰ä»€ä¹ˆä¸åŒ? 1.åŸç†ä¸åŒ CADisplayLinkæ˜¯ä¸€ä¸ªèƒ½è®©æˆ‘ä»¬ä»¥å’Œå±å¹•åˆ·æ–°ç‡åŒæ­¥çš„é¢‘ç‡å°†ç‰¹å®šçš„å†…å®¹ç”»åˆ°å±å¹•ä¸Šçš„å®šæ—¶å™¨ç±»ã€‚ CADisplayLinkä»¥ç‰¹å®šæ¨¡å¼æ³¨å†Œåˆ°runloopåï¼Œ æ¯å½“å±å¹•æ˜¾ç¤ºå†…å®¹åˆ·æ–°ç»“æŸçš„æ—¶å€™ï¼Œrunloopå°±ä¼šå‘ CADisplayLinkæŒ‡å®šçš„targetå‘é€ä¸€æ¬¡æŒ‡å®šçš„selectoræ¶ˆæ¯ï¼Œ CADisplayLinkç±»å¯¹åº”çš„selectorå°±ä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚ NSTimerä»¥æŒ‡å®šçš„æ¨¡å¼æ³¨å†Œåˆ°runloopåï¼Œæ¯å½“è®¾å®šçš„å‘¨æœŸæ—¶é—´åˆ°è¾¾åï¼Œrunloopä¼šå‘æŒ‡å®šçš„targetå‘é€ä¸€æ¬¡æŒ‡å®šçš„selectoræ¶ˆæ¯ã€‚ 2.å‘¨æœŸè®¾ç½®æ–¹å¼ä¸åŒ iOSè®¾å¤‡çš„å±å¹•åˆ·æ–°é¢‘ç‡(FPS)æ˜¯60Hzï¼Œå› æ­¤CADisplayLinkçš„selectoré»˜è®¤è°ƒç”¨å‘¨æœŸæ˜¯æ¯ç§’60æ¬¡ï¼Œè¿™ä¸ªå‘¨æœŸå¯ä»¥é€šè¿‡frameIntervalå±æ€§è®¾ç½®ï¼Œ CADisplayLinkçš„selector`æ¯ç§’è°ƒç”¨æ¬¡æ•°=60/ frameIntervalã€‚æ¯”å¦‚å½“ frameIntervalè®¾ä¸º2ï¼Œæ¯ç§’è°ƒç”¨å°±å˜æˆ30æ¬¡ã€‚å› æ­¤ï¼ŒCADisplayLink `å‘¨æœŸçš„è®¾ç½®æ–¹å¼ç•¥æ˜¾ä¸ä¾¿ã€‚ NSTimerçš„selectorè°ƒç”¨å‘¨æœŸå¯ä»¥åœ¨åˆå§‹åŒ–æ—¶ç›´æ¥è®¾å®šï¼Œç›¸å¯¹å°±çµæ´»çš„å¤šã€‚ 3ã€ç²¾ç¡®åº¦ä¸åŒ iOSè®¾å¤‡çš„å±å¹•åˆ·æ–°é¢‘ç‡æ˜¯å›ºå®šçš„ï¼ŒCADisplayLinkåœ¨æ­£å¸¸æƒ…å†µä¸‹ä¼šåœ¨æ¯æ¬¡åˆ·æ–°ç»“æŸéƒ½è¢«è°ƒç”¨ï¼Œç²¾ç¡®åº¦ç›¸å½“é«˜ã€‚ NSTimerçš„ç²¾ç¡®åº¦å°±æ˜¾å¾—ä½äº†ç‚¹ï¼Œæ¯”å¦‚NSTimerçš„è§¦å‘æ—¶é—´åˆ°çš„æ—¶å€™ï¼Œrunloopå¦‚æœåœ¨é˜»å¡çŠ¶æ€ï¼Œè§¦å‘æ—¶é—´å°±ä¼šæ¨è¿Ÿåˆ°ä¸‹ä¸€ä¸ªrunloopå‘¨æœŸã€‚å¹¶ä¸” NSTimeræ–°å¢äº†toleranceå±æ€§ï¼Œè®©ç”¨æˆ·å¯ä»¥è®¾ç½®å¯ä»¥å®¹å¿çš„è§¦å‘çš„æ—¶é—´çš„å»¶è¿ŸèŒƒå›´ã€‚ 4ã€ä½¿ç”¨åœºæ™¯ CADisplayLinkä½¿ç”¨åœºåˆç›¸å¯¹ä¸“ä¸€ï¼Œé€‚åˆåšUIçš„ä¸åœé‡ç»˜ï¼Œæ¯”å¦‚è‡ªå®šä¹‰åŠ¨ç”»å¼•æ“æˆ–è€…è§†é¢‘æ’­æ”¾çš„æ¸²æŸ“ã€‚ NSTimerçš„ä½¿ç”¨èŒƒå›´è¦å¹¿æ³›çš„å¤šï¼Œå„ç§éœ€è¦å•æ¬¡æˆ–è€…å¾ªç¯å®šæ—¶å¤„ç†çš„ä»»åŠ¡éƒ½å¯ä»¥ä½¿ç”¨ã€‚ #####ä¸‰ã€CADisplayLinkå’ŒNSTimerçš„ä½¿ç”¨ CADisplayLinkçš„ä½¿ç”¨ 1.åˆ›å»ºæ–¹æ³•123self.displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(handleDisplayLink:)]; [self.displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode]; 2.åœæ­¢æ–¹æ³•123[self.displayLink invalidate]; self.displayLink = nil; å½“æŠŠCADisplayLinkå¯¹è±¡addåˆ°runloopä¸­åï¼Œselectorå°±èƒ½è¢«å‘¨æœŸæ€§è°ƒç”¨ï¼Œç±»ä¼¼äºé‡å¤çš„NSTimerè¢«å¯åŠ¨äº†ï¼›æ‰§è¡Œinvalidateæ“ä½œæ—¶ï¼ŒCADisplayLinkå¯¹è±¡å°±ä¼šä»runloopä¸­ç§»é™¤ï¼Œselectorè°ƒç”¨ä¹Ÿéšå³åœæ­¢ï¼Œç±»ä¼¼äºNSTimerçš„invalidateæ–¹æ³•ã€‚ NSTimerçš„ä½¿ç”¨ åˆ›å»ºæ–¹æ³• 123456789NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(action:) userInfo:nil repeats:NO]; TimerInterval : æ‰§è¡Œä¹‹å‰ç­‰å¾…çš„æ—¶é—´ã€‚æ¯”å¦‚è®¾ç½®æˆ1.0ï¼Œå°±ä»£è¡¨1ç§’åæ‰§è¡Œæ–¹æ³• target : éœ€è¦æ‰§è¡Œæ–¹æ³•çš„å¯¹è±¡ã€‚ selector : éœ€è¦æ‰§è¡Œçš„æ–¹æ³• repeats : æ˜¯å¦éœ€è¦å¾ªç¯ é‡Šæ”¾æ–¹æ³• 1[timer invalidate]; æ³¨æ„ :è°ƒç”¨åˆ›å»ºæ–¹æ³•åï¼Œtargetå¯¹è±¡çš„è®¡æ•°å™¨ä¼šåŠ 1ï¼Œç›´åˆ°æ‰§è¡Œå®Œæ¯•ï¼Œè‡ªåŠ¨å‡1ã€‚å¦‚æœæ˜¯å¾ªç¯æ‰§è¡Œçš„è¯ï¼Œå°±å¿…é¡»æ‰‹åŠ¨å…³é—­ï¼Œå¦åˆ™å¯ä»¥ä¸æ‰§è¡Œé‡Šæ”¾æ–¹æ³•ã€‚ ç‰¹æ€§ å­˜åœ¨å»¶è¿Ÿ ï¼Œä¸ç®¡æ˜¯ä¸€æ¬¡æ€§çš„è¿˜æ˜¯å‘¨æœŸæ€§çš„timerçš„å®é™…è§¦å‘äº‹ä»¶çš„æ—¶é—´ï¼Œéƒ½ä¼šä¸æ‰€åŠ å…¥çš„RunLoopå’ŒRunLoop Modeæœ‰å…³ï¼Œå¦‚æœæ­¤RunLoopæ­£åœ¨æ‰§è¡Œä¸€ä¸ªè¿ç»­æ€§çš„è¿ç®—ï¼Œtimerå°±ä¼šè¢«å»¶æ—¶å‡ºå‘ã€‚é‡å¤æ€§çš„timeré‡åˆ°è¿™ç§æƒ…å†µï¼Œå¦‚æœå»¶è¿Ÿè¶…è¿‡äº†ä¸€ä¸ªå‘¨æœŸï¼Œåˆ™ä¼šåœ¨å»¶æ—¶ç»“æŸåç«‹åˆ»æ‰§è¡Œï¼Œå¹¶æŒ‰ç…§ä¹‹å‰æŒ‡å®šçš„å‘¨æœŸç»§ç»­æ‰§è¡Œã€‚ æ³¨æ„ï¼šå¿…é¡»åŠ å…¥Runloop ä½¿ç”¨ä¸Šé¢çš„åˆ›å»ºæ–¹å¼ï¼Œä¼šè‡ªåŠ¨æŠŠtimeråŠ å…¥MainRunloopçš„NSDefaultRunLoopModeä¸­ã€‚å¦‚æœä½¿ç”¨ä»¥ä¸‹æ–¹å¼åˆ›å»ºå®šæ—¶å™¨ï¼Œå°±å¿…é¡»æ‰‹åŠ¨åŠ å…¥Runloop:123NSTimer *timer = [NSTimer timerWithTimeInterval:5 target:self selector:@selector(timerAction) userInfo:nil repeats:YES]; [[NSRunLoop mainRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode];","categories":[{"name":"iOSå¼€å‘","slug":"iOSå¼€å‘","permalink":"http://blogzhou.top/categories/iOSå¼€å‘/"}],"tags":[{"name":"OC","slug":"OC","permalink":"http://blogzhou.top/tags/OC/"}]}]}